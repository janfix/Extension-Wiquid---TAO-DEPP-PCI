define("taoQtiItem/portableLib/jquery_2_1_1",[],function(){return function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){function isArraylike(obj){var length=obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&(!(1!==obj.nodeType||!length)||("array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj))}function winnow(elements,qualifier,not){
if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}function createOptions(options){var object=optionsCache[options]={}
;return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function completed(){document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1),jQuery.ready()}function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=jQuery.expando+Math.random()}function dataAttr(elem,key,data){var name;if(void 0===data&&1===elem.nodeType)if(name="data-"+key.replace(rmultiDash,"-$1").toLowerCase(),"string"==typeof(data=elem.getAttribute(name))){try{
data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}data_user.set(elem,key,data)}else data=void 0;return data}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){
return elem.type=(null!==elem.getAttribute("type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var i=0,l=elems.length;i<l;i++)data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(1===dest.nodeType){if(data_priv.hasData(src)&&(pdataOld=data_priv.access(src),pdataCur=data_priv.set(dest,pdataOld),events=pdataOld.events)){delete pdataCur.handle,pdataCur.events={}
;for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}data_user.hasData(src)&&(udataOld=data_user.access(src),udataCur=jQuery.extend({},udataOld),data_user.set(dest,udataCur))}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase()
;"input"===nodeName&&rcheckableType.test(src.type)?dest.checked=src.checked:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),
"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),doc=iframe[0].contentDocument,doc.write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return computed=computed||getStyles(elem),computed&&(ret=computed.getPropertyValue(name)||computed[name]),computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,
maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0!==ret?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){return conditionFn()?void delete this.get:(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(style,name){if(name in style)return name;for(var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in style)return name;return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value)
;return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}
function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox="border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(val=curCSS(elem,name,styles),(val<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){
for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)elem=elements[index],elem.style&&(values[index]=data_priv.get(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),"none"===display&&hidden||data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)elem=elements[index],
elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){
for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,
jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),"inline"===("none"===display?data_priv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display)&&"none"===jQuery.css(elem,"float")&&(style.display="inline-block")),opts.overflow&&(style.overflow="hidden",anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,
value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else{dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=data_priv.access(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])})
;for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],
specialEasing[index]=easing)}else specialEasing[name]=easing}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)
},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1)
;return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);index<length;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),
animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType[0]?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){
if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),
!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}
return{state:"success",data:response}}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&elem.defaultView}
var arr=[],slice=arr.slice,concat=arr.concat,push=arr.push,indexOf=arr.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},document=window.document,jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:"2.1.1",constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){
var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice},
jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},
target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("2.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray,isWindow:function(obj){return null!=obj&&obj===obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)>=0},isPlainObject:function(obj){return"object"===jQuery.type(obj)&&!obj.nodeType&&!jQuery.isWindow(obj)&&!(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(obj){
var name;for(name in obj)return!1;return!0},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;(code=jQuery.trim(code))&&(1===code.indexOf("use strict")?(script=document.createElement("script"),script.text=code,document.head.appendChild(script).parentNode.removeChild(script)):indirect(code))},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},
each:function(obj,callback,args){var i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;i<length&&!1!==callback.apply(obj[i],args);i++);else for(i in obj)if(!1===callback.apply(obj[i],args))break}else if(isArray)for(;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){
return null==arr?-1:indexOf.call(arr,elem,i)},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;j++)first[i++]=second[j];return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)!callback(elems[i],i)!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;i<length;i++)null!=(value=callback(elems[i],i,arg))&&ret.push(value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&ret.push(value);return concat.apply([],ret)
},guid:1,proxy:function(fn,context){var tmp,args,proxy;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:Date.now,support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector
;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=context.nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{
if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName&&context.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i])
;newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{
div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){
for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&typeof context.getElementsByTagName!==strundefined&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)
}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}
function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),
markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],
i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){
for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))
}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){
var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,
seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}
var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},strundefined="undefined",MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1
},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={
ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")
},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){
push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,documentIsHTML=!isXML(doc),
parent&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",function(){setDocument()},!1):parent.attachEvent&&parent.attachEvent("onunload",function(){setDocument()})),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName)&&assert(function(div){return div.innerHTML="<div class='a'></div><div class='a i'></div>",div.firstChild.className="i",2===div.getElementsByClassName("i").length}),
support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(typeof context.getElementById!==strundefined&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id")
;return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(typeof context.getElementsByClassName!==strundefined&&documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],
(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){div.innerHTML="<select msallowclip=''><option selected=''></option></select>",div.querySelectorAll("[msallowclip^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),
div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),
contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,
1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf.call(sortInput,a)-indexOf.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur)
;for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},
Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0
;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},
Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),
match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){
return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="",
"="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result+" ").indexOf(check)>-1:"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){
var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],
node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){
var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf.call(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){
for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{
if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){
var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr
;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),
lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=function(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=function(type){return function(elem){var name=elem.nodeName.toLowerCase()
;return("input"===name||"button"===name)&&elem.type===type}}(i);return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),
soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),
cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){
if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}
return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),
support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,
jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){
for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(jQuery.fn.init=function(selector,context){var match,elem
;if(!selector)return this;if("string"==typeof selector){if(!(match="<"===selector[0]&&">"===selector[selector.length-1]&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),
rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}return elem=document.getElementById(match[2]),elem&&elem.parentNode&&(this.length=1,this[0]=elem),this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==rootjQuery.ready?rootjQuery.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))}).prototype=jQuery.fn,
rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(elem,dir,until){for(var matched=[],truncate=void 0!==until;(elem=elem[dir])&&9!==elem.nodeType;)if(1===elem.nodeType){if(truncate&&jQuery(elem).is(until))break;matched.push(elem)}return matched},sibling:function(n,elem){for(var matched=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&matched.push(n);return matched}}),jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){for(var i=0;i<l;i++)if(jQuery.contains(this,targets[i]))return!0})
},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?indexOf.call(jQuery(elem),this[0]):indexOf.call(this,elem.jquery?elem[0]:elem):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},
add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},
prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),
selector&&"string"==typeof selector&&(matched=jQuery.filter(selector,matched)),this.length>1&&(guaranteedUnique[name]||jQuery.unique(matched),rparentsprev.test(name)&&matched.reverse()),this.pushStack(matched)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,
firing=!0;list&&firingIndex<firingLength;firingIndex++)if(!1===list[firingIndex].apply(data[0],data[1])&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){
for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(index<=firingLength&&firingLength--,index<=firingIndex&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){return stack=void 0,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){
return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments)
;returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){
return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?slice.call(arguments):value,
values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},
jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){(!0===wait?--jQuery.readyWait:jQuery.isReady)||(jQuery.isReady=!0,!0!==wait&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready"))))}}),jQuery.ready.promise=function(obj){return readyList||(readyList=jQuery.Deferred(),"complete"===document.readyState?setTimeout(jQuery.ready):(document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1))),readyList.promise(obj)},jQuery.ready.promise()
;var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<len;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){
return 1===owner.nodeType||9===owner.nodeType||!+owner.nodeType},Data.uid=1,Data.accepts=jQuery.acceptData,Data.prototype={key:function(owner){if(!Data.accepts(owner))return 0;var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock},Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock,jQuery.extend(owner,descriptor)}}return this.cache[unlock]||(this.cache[unlock]={}),unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock]
;if("string"==typeof data)cache[data]=value;else if(jQuery.isEmptyObject(cache))jQuery.extend(this.cache[unlock],data);else for(prop in data)cache[prop]=data[prop];return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return void 0===key?cache:cache[key]},access:function(owner,key,value){var stored;return void 0===key||key&&"string"==typeof key&&void 0===value?(stored=this.get(owner,key),void 0!==stored?stored:this.get(owner,jQuery.camelCase(key))):(this.set(owner,key,value),void 0!==value?value:key)},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(void 0===key)this.cache[unlock]={};else{
jQuery.isArray(key)?name=key.concat(key.map(jQuery.camelCase)):(camel=jQuery.camelCase(key),key in cache?name=[key,camel]:(name=camel,name=name in cache?[name]:name.match(rnotwhite)||[])),i=name.length;for(;i--;)delete cache[name[i]]}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){owner[this.expando]&&delete this.cache[owner[this.expando]]}};var data_priv=new Data,data_user=new Data,rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){
return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=data_user.get(elem),1===elem.nodeType&&!data_priv.get(elem,"hasDataAttrs"))){for(i=attrs.length;i--;)attrs[i]&&(name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])));data_priv.set(elem,"hasDataAttrs",!0)}return data}
return"object"==typeof key?this.each(function(){data_user.set(this,key)}):access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&void 0===value){if(void 0!==(data=data_user.get(elem,key)))return data;if(void 0!==(data=data_user.get(elem,camelKey)))return data;if(void 0!==(data=dataAttr(elem,camelKey,void 0)))return data}else this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value),-1!==key.indexOf("-")&&void 0!==data&&data_user.set(this,key,value)})},null,value,arguments.length>1,null,!0)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}}),jQuery.extend({
queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=data_priv.get(elem,type),data&&(!queue||jQuery.isArray(data)?queue=data_priv.access(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){
var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){
return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)(tmp=data_priv.get(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},rcheckableType=/^(?:checkbox|radio)$/i
;!function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio"),input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue}();support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/
;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(elemData)for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return void 0!==jQuery&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):void 0}),types=(types||"").match(rnotwhite)||[""],
t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,
special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||elem.addEventListener&&elem.addEventListener(type,eventHandle,!1)),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0)},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(rnotwhite)||[""],
t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,
special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,data_priv.remove(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[]
;if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},
onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle"),handle&&handle.apply(cur,data),
(handle=ontype&&cur[ontype])&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault());return event.type=type,onlyHandlers||event.isDefaultPrevented()||special._default&&!1!==special._default.apply(eventPath.pop(),data)||!jQuery.acceptData(elem)||ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)&&(tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)),event.result}},dispatch:function(event){event=jQuery.event.fix(event)
;var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.namespace_re&&!event.namespace_re.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,
void 0!==(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!==this;cur=cur.parentNode||this)if(!0!==cur.disabled||"click"!==event.type){for(matches=[],i=0;i<delegateCount;i++)handleObj=handlers[i],sel=handleObj.selector+" ",
void 0===matches[sel]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){
return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),
event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop]
;return event.target||(event.target=document),3===event.target.nodeType&&(event.target=event.target.parentNode),fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&jQuery.nodeName(this,"input"))return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){
void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,
this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&e.stopPropagation&&e.stopPropagation()},
stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===target||jQuery.contains(target,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),
support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);attaches||doc.addEventListener(orig,handler,!0),data_priv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;attaches?data_priv.access(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),data_priv.remove(doc,fix))}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){
var origFn,type;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=void 0);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){
return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){
jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(!0),inPage=jQuery.contains(elem.ownerDocument,elem);if(!(support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0,l=srcElements.length;i<l;i++)fixInput(srcElements[i],destElements[i])
;if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0,l=srcElements.length;i<l;i++)cloneCopyEvent(srcElements[i],destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),clone},buildFragment:function(elems,context,scripts,selection){
for(var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;jQuery.merge(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}else nodes.push(context.createTextNode(elem));for(fragment.textContent="",
i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(fragment.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return fragment},cleanData:function(elems){for(var data,elem,type,key,special=jQuery.event.special,i=0;void 0!==(elem=elems[i]);i++){if(jQuery.acceptData(elem)&&(key=elem[data_priv.expando])&&(data=data_priv.cache[key])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle)
;data_priv.cache[key]&&delete data_priv.cache[key]}delete data_user.cache[elem[data_user.expando]]}}}),jQuery.fn.extend({text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=value)})},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){manipulationTarget(this,elem).appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){
var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),
elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++)1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.textContent="");return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value&&1===elem.nodeType)return elem.innerHTML
;if("string"==typeof value&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},
domManip:function(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),
hasScripts=scripts.length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval(node.textContent.replace(rcleanScript,"")))}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"
},function(name,original){jQuery.fn[name]=function(selector){for(var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,elemdisplay={},rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),getStyles=function(elem){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)};!function(){function computePixelPositionAndBoxSizingReliable(){
div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",div.innerHTML="",docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal="1%"!==divStyle.top,boxSizingReliableVal="4px"===divStyle.width,docElem.removeChild(container)}var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");div.style&&(div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",
support.clearCloneStyle="content-box"===div.style.backgroundClip,container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",container.appendChild(div),window.getComputedStyle&&jQuery.extend(support,{pixelPosition:function(){return computePixelPositionAndBoxSizingReliable(),pixelPositionVal},boxSizingReliable:function(){return null==boxSizingReliableVal&&computePixelPositionAndBoxSizingReliable(),boxSizingReliableVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"))
;return marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",marginDiv.style.marginRight=marginDiv.style.width="0",div.style.width="1px",docElem.appendChild(container),ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight),docElem.removeChild(container),ret}}))}(),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret}
;var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(elem,name,value,extra){
if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null!=value&&value===value&&("number"!==type||jQuery.cssNumber[origName]||(value+="px"),
support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra))||(style[name]=value))}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),
!0===extra||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){
if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),
len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,
this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{
get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},
jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],
parts=parts||[],start=+target||1;do{scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;index<length;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){
prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),
opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||data_priv.get(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){
var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1))
;!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return!1!==type&&(type=type||"fx"),this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),
jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers
;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time)
;hooks.stop=function(){clearTimeout(timeout)}})},function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox",support.checkOn=""!==input.value,support.optSelected=opt.selected,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.value="t",input.type="radio",support.radioValue="t"===input.value}();var boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){
jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return void 0===elem.getAttribute?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:void 0)),void 0===value?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?void 0:ret):null!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},
removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)&&(elem[propName]=!1),elem.removeAttribute(name)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):elem.setAttribute(name,name),name}},
jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}}),jQuery.extend({propFix:{for:"htmlFor",class:"className"},
prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode
;return parent&&parent.parentNode&&parent.parentNode.selectedIndex,null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed="string"==typeof value&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(elem=this[i],
cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=0===arguments.length||"string"==typeof value&&value,i=0,len=this.length;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(elem=this[i],
cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){
if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else"undefined"!==type&&"boolean"!==type||(this.className&&data_priv.set(this,"__className__",this.className),this.className=this.className||!1===value?"":data_priv.get(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){
var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))})
;if(elem)return(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(option=options[i],
(option.selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)option=options[i],(option.selected=jQuery.inArray(option.value,values)>=0)&&(optionSet=!0);return optionSet||(elem.selectedIndex=-1),values}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){
if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)
},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")},jQuery.parseXML=function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=void 0}
return xml&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,
lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){
return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&status<300||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),
response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",
isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=void 0),options=options||{}
;var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2]
;match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort
;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),
s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=s.global,fireGlobals&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),
s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();strAbort="abort"
;for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){
jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){var wrap;return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapAll(html.call(this,i))
}):(this[0]&&(wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstElementChild;)elem=elem.firstElementChild;return elem}).append(this)),this)},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){
return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)}
;if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type
;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();window.ActiveXObject&&jQuery(window).on("unload",function(){
for(var key in xhrCallbacks)xhrCallbacks[key]()}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,support.ajax=xhrSupported=!!xhrSupported,jQuery.ajaxTransport(function(options){var callback;if(support.cors||xhrSupported&&!options.crossDomain)return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest")
;for(i in headers)xhr.setRequestHeader(i,headers[i]);callback=function(type){return function(){callback&&(delete xhrCallbacks[id],callback=xhr.onload=xhr.onerror=null,"abort"===type?xhr.abort():"error"===type?complete(xhr.status,xhr.statusText):complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,"string"==typeof xhr.responseText?{text:xhr.responseText}:void 0,xhr.getAllResponseHeaders()))}},xhr.onload=callback(),xhr.onerror=callback("error"),callback=xhrCallbacks[id]=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback)throw e}},abort:function(){callback&&callback()}}}),jQuery.ajaxSetup({accepts:{
script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET")}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:!0,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove(),callback=null,evt&&complete("error"===evt.type?404:200,evt.type)}),
document.head.appendChild(script[0])},abort:function(){callback&&callback()}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data")
;if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,
oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load
;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,type,response,self=this,off=url.indexOf(" ");return off>=0&&(selector=jQuery.trim(url.slice(off)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){
self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),
calculatePosition=("absolute"===position||"fixed"===position)&&(curCSSTop+curCSSLeft).indexOf("auto")>-1,calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){
jQuery.offset.setOffset(this,options,i)});var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(void 0!==elem.getBoundingClientRect&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}):box},position:function(){if(this[0]){var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),
jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",
scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?win[prop]:elem[method];win?win.scrollTo(top?window.pageXOffset:val,top?val:window.pageYOffset):elem[method]=val},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){
jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)
},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack;var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},void 0===noGlobal&&(window.jQuery=window.$=jQuery),jQuery}),jQuery.noConflict(!0)}),define("explo/runtime/js/defaultConfig",[],function(){return{mapFile:[{fileId:1,node:"vol1",name:"config",extension:".js",size:"4000000000",dateMod:"2007-03-20",dateCreat:"2007-02-18",app:"codeEditor.exe",dateLastAcces:"2018-02-04",author:"John Smith"},{fileId:2,
node:"vol1",name:"notice",extension:".txt",size:"50000000",dateMod:"1998-02-04",dateCreat:"1997-02-03",content:"Ceci est un exemple de contenu",app:"Editor.exe",dateLastAcces:"2018-09-04",author:"Marc Smith"},{fileId:3,node:"vol1",name:"Settings",extension:".ppt",size:"50000000",dateMod:"2000-12-03",dateCreat:"2000-01-01",app:"",dateLastAcces:"",author:"Pierre Martin"},{fileId:4,node:"vol1",name:"agenda",extension:".pdf",size:"50000000",dateMod:"2007-10-22",dateCreat:"2007-10-20",app:"",dateLastAcces:"",author:"Pierre Martin"},{fileId:5,node:"vol1",name:"libras",extension:".cad",size:"50000000",dateMod:"2002-11-22",dateCreat:"2000-10-22",app:"",
dateLastAcces:"",author:"Pierre Martin"},{fileId:6,node:"vol2",name:"grunt",extension:".kop",size:"50000000",dateMod:"2002-01-27",dateCreat:"2002-01-22",app:"",dateLastAcces:"",author:"Pierre Martin"},{fileId:7,node:"cdRom",name:"boot",extension:".sig",size:"5000000",dateMod:"2012-12-3",dateCreat:"2001-01-22",app:"",dateLastAcces:"",author:"Pierre Martin"},{fileId:8,node:"images",name:"selfy1",extension:".png",size:"50000",dateMod:"2012-12-3",dateCreat:"2001-01-22",app:"",dateLastAcces:"",author:"Pierre Martin",image_url:"http://www.wiquid.fr/img/img1.png"},{fileId:9,node:"images",name:"selfy2",extension:".png",size:"500000",dateMod:"2012-12-3",
dateCreat:"2001-01-22",app:"",dateLastAcces:"",author:"Pierre Martin",image_url:"http://www.wiquid.fr/img/img2.png"},{fileId:10,node:"images",name:"selfy3",extension:".png",size:"500000",dateMod:"2012-12-3",dateCreat:"2001-01-22",app:"",dateLastAcces:"",author:"Pierre Martin",image_url:"http://www.wiquid.fr/img/img3.png"},{fileId:11,node:"images",name:"metadonnees",extension:".bulk",size:"50000000",dateMod:"2012-12-3",dateCreat:"2001-01-22",app:"",dateLastAcces:"",author:"Pierre Martin"},{fileId:12,node:"selidon",name:"protestor",extension:".non",size:"50000000",dateMod:"2018-08-3",dateCreat:"2018-08-22",app:"",dateLastAcces:"",author:"Pierre Martin"},{
fileId:13,node:"dir1",name:"config",extension:".js",size:"1000000000",dateMod:"2012-03-20",dateCreat:"2012-02-18",app:"codeEditor.exe",dateLastAcces:"2018-10-04",author:"Jean-Philippe"},{fileId:14,node:"vol2",name:"Settings",extension:".set",size:"1000000000",dateMod:"2000-01-20",dateCreat:"2000-01-18",app:"codeEditor.exe",dateLastAcces:"2018-10-04",author:"Jean-Philippe"},{fileId:15,node:"vol2",name:"config",extension:".js",size:"3000000000",dateMod:"2000-01-20",dateCreat:"2000-01-18",app:"codeEditor.exe",dateLastAcces:"2018-10-04",author:"Jean-Philippe"},{fileId:16,node:"videos",name:"longfilm",extension:".bog",size:"45210",dateMod:"2000-01-20",
dateCreat:"2000-01-18",app:"codeEditor.exe",dateLastAcces:"2018-10-04",author:"Jean-Philippe"},{fileId:17,node:"dir100",name:"biggoodfile",extension:".xlt",size:"300000",dateMod:"2009-01-20",dateCreat:"2003-01-18",app:"codeEditor.exe",dateLastAcces:"2018-10-04",author:"Jean-Philippe"}],treeFolder:[{id:"root",text:"Cet Ordinateur",li_attr:{id:"root"},a_attr:{href:"#",id:"root_anchor"},state:{loaded:!0,opened:!0,selected:!1,disabled:!1},data:{type:"Disque Système",RAM:"8,00 Go","système":"Linux 64 bits",nom:"poste1",dateMod:"2018-01-02",dateCreat:"2001-08-22"},parent:"#",type:"root"},{id:"clipboard",state:{hidden:!0},parent:"#",text:"ClipBoard",li_attr:{},
a_attr:{},type:"clipboard",data:{type:"Volume",dateMod:"-",dateCreat:"2001-08-22"}},{id:"searchResult",state:{hidden:!0},parent:"#",text:"searchResult",li_attr:{},a_attr:{},type:"searchResult",data:{type:"Volume",dateMod:"-",dateCreat:"-"}},{id:"erased",state:{hidden:!0},parent:"#",text:"erased",li_attr:{},a_attr:{},type:"erased",data:{type:"erased",dateMod:"-",dateCreat:"-"}},{id:"vol1",parent:"root",text:"C:",li_attr:{},a_attr:{},type:"volume",data:{type:"Volume",dateMod:"-",dateCreat:"2001-08-22",capacity:"8000000000"}},{id:"dir1",parent:"vol1",text:"System",li_attr:{},a_attr:{},type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",
dateCreat:"2001-08-22"}},{id:"documents",parent:"vol1",text:"Documents",li_attr:{},a_attr:{},type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"u1",parent:"vol1",text:"Users",li_attr:{},a_attr:{},type:"default",data:{copy:"",type:"Répertoire",dateMod:"1978-01-4",dateCreat:"2003-04-01"}},{id:"u2",parent:"dir1",text:"Users",li_attr:{},a_attr:{},type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"dir4",parent:"vol1",text:"Project",li_attr:{},a_attr:{},type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-1",dateCreat:"2001-08-22"}},{id:"dir5",parent:"vol1",
text:"Programmes",li_attr:{},a_attr:{},type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"vol2",parent:"root",text:"D:",state:{opened:!1},type:"volume",data:{type:"Volume",dateMod:"-",dateCreat:"2001-08-22",capacity:"8000000000",freeSpace:"8000000000"}},{id:"downloads",parent:"vol2",text:"Téléchargement",type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"modeles",parent:"vol2",text:"Modèles",type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"videos",parent:"vol2",text:"Vidéos",type:"default",data:{copy:"",
type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"images",parent:"vol2",text:"Images",type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"selfies",parent:"images",text:"selfies",type:"default",data:{copy:"",type:"Répertoire",dateMod:"2018-02-31",dateCreat:"2017-08-22"}},{id:"cdRom",parent:"root",text:"Lecteur CD/DVD",type:"cdRom",data:{type:"Lecteur Optique CD/DVD",dateMod:"2012-12-3",dateCreat:"2001-08-22",capacity:"6000000",freeSpace:"6000000"}},{id:"sdCard",parent:"root",text:"Mémoire flash",type:"sdCard",data:{type:"Mémoire Flash",dateMod:"2012-12-3",dateCreat:"2001-08-22",capacity:"1000000",
freeSpace:"1000000"}},{id:"usb",parent:"root",text:"clé USB",type:"usb",data:{type:"Mémoire Flash usb",dateMod:"2012-12-4",dateCreat:"2011-01-22",capacity:"1600000",freeSpace:"1600000"}},{id:"netWork",parent:"#",text:"Réseau Local",type:"netWork",data:{type:"Réseau",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"bin",parent:"#",text:"Corbeille",type:"bin",data:{type:"Poubelle",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"prtest",parent:"downloads",text:"prtest",type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"pratique",parent:"prtest",text:"pratique",type:"default",data:{copy:"",type:"Répertoire",
dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"user3",parent:"vol2",text:"Users212",type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"parsel",parent:"prtest",text:"parsel",type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}},{id:"selidon",parent:"pratique",text:"selidon",type:"default",data:{copy:"",type:"Répertoire",dateMod:"2012-12-3",dateCreat:"2001-08-22"}}]}}),define("explo/runtime/js/lib/datatables",["taoQtiItem/portableLib/jquery_2_1_1"],function($){"use strict";return function(factory){
"function"==typeof define&&define.amd?factory($,window,document):"object"==typeof exports?module.exports=function(root,$){return root||(root=window),$||($="undefined"!=typeof window?require("jquery"):require("jquery")(root)),factory($,root,root.document)}:factory(jQuery,window,document)}(function($,window,document,undefined){function _fnHungarianMap(o){var match,newKey,hungarian="a aa ai ao as b fn i m o s ",map={};$.each(o,function(key,val){(match=key.match(/^([^A-Z]+?)([A-Z])/))&&-1!==hungarian.indexOf(match[1]+" ")&&(newKey=key.replace(match[0],match[2].toLowerCase()),map[newKey]=key,"o"===match[1]&&_fnHungarianMap(o[key]))}),o._hungarianMap=map}
function _fnCamelToHungarian(src,user,force){src._hungarianMap||_fnHungarianMap(src);var hungarianKey;$.each(user,function(key,val){(hungarianKey=src._hungarianMap[key])===undefined||!force&&user[hungarianKey]!==undefined||("o"===hungarianKey.charAt(0)?(user[hungarianKey]||(user[hungarianKey]={}),$.extend(!0,user[hungarianKey],user[key]),_fnCamelToHungarian(src[hungarianKey],user[hungarianKey],force)):user[hungarianKey]=user[key])})}function _fnLanguageCompat(lang){var defaults=DataTable.defaults.oLanguage,defaultDecimal=defaults.sDecimal;if(defaultDecimal&&_addNumericSort(defaultDecimal),lang){var zeroRecords=lang.sZeroRecords
;!lang.sEmptyTable&&zeroRecords&&"No data available in table"===defaults.sEmptyTable&&_fnMap(lang,lang,"sZeroRecords","sEmptyTable"),!lang.sLoadingRecords&&zeroRecords&&"Loading..."===defaults.sLoadingRecords&&_fnMap(lang,lang,"sZeroRecords","sLoadingRecords"),lang.sInfoThousands&&(lang.sThousands=lang.sInfoThousands);var decimal=lang.sDecimal;decimal&&defaultDecimal!==decimal&&_addNumericSort(decimal)}}function _fnCompatOpts(init){_fnCompatMap(init,"ordering","bSort"),_fnCompatMap(init,"orderMulti","bSortMulti"),_fnCompatMap(init,"orderClasses","bSortClasses"),_fnCompatMap(init,"orderCellsTop","bSortCellsTop"),_fnCompatMap(init,"order","aaSorting"),
_fnCompatMap(init,"orderFixed","aaSortingFixed"),_fnCompatMap(init,"paging","bPaginate"),_fnCompatMap(init,"pagingType","sPaginationType"),_fnCompatMap(init,"pageLength","iDisplayLength"),_fnCompatMap(init,"searching","bFilter"),"boolean"==typeof init.sScrollX&&(init.sScrollX=init.sScrollX?"100%":""),"boolean"==typeof init.scrollX&&(init.scrollX=init.scrollX?"100%":"");var searchCols=init.aoSearchCols;if(searchCols)for(var i=0,ien=searchCols.length;i<ien;i++)searchCols[i]&&_fnCamelToHungarian(DataTable.models.oSearch,searchCols[i])}function _fnCompatCols(init){_fnCompatMap(init,"orderable","bSortable"),_fnCompatMap(init,"orderData","aDataSort"),
_fnCompatMap(init,"orderSequence","asSorting"),_fnCompatMap(init,"orderDataType","sortDataType");var dataSort=init.aDataSort;"number"!=typeof dataSort||$.isArray(dataSort)||(init.aDataSort=[dataSort])}function _fnBrowserDetect(settings){if(!DataTable.__browser){var browser={};DataTable.__browser=browser;var n=$("<div/>").css({position:"fixed",top:0,left:-1*$(window).scrollLeft(),height:1,width:1,overflow:"hidden"}).append($("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append($("<div/>").css({width:"100%",height:10}))).appendTo("body"),outer=n.children(),inner=outer.children()
;browser.barWidth=outer[0].offsetWidth-outer[0].clientWidth,browser.bScrollOversize=100===inner[0].offsetWidth&&100!==outer[0].clientWidth,browser.bScrollbarLeft=1!==Math.round(inner.offset().left),browser.bBounding=!!n[0].getBoundingClientRect().width,n.remove()}$.extend(settings.oBrowser,DataTable.__browser),settings.oScroll.iBarWidth=DataTable.__browser.barWidth}function _fnReduce(that,fn,init,start,end,inc){var value,i=start,isSet=!1;for(init!==undefined&&(value=init,isSet=!0);i!==end;)that.hasOwnProperty(i)&&(value=isSet?fn(value,that[i],i,that):that[i],isSet=!0,i+=inc);return value}function _fnAddColumn(oSettings,nTh){
var oDefaults=DataTable.defaults.column,iCol=oSettings.aoColumns.length,oCol=$.extend({},DataTable.models.oColumn,oDefaults,{nTh:nTh||document.createElement("th"),sTitle:oDefaults.sTitle?oDefaults.sTitle:nTh?nTh.innerHTML:"",aDataSort:oDefaults.aDataSort?oDefaults.aDataSort:[iCol],mData:oDefaults.mData?oDefaults.mData:iCol,idx:iCol});oSettings.aoColumns.push(oCol);var searchCols=oSettings.aoPreSearchCols;searchCols[iCol]=$.extend({},DataTable.models.oSearch,searchCols[iCol]),_fnColumnOptions(oSettings,iCol,$(nTh).data())}function _fnColumnOptions(oSettings,iCol,oOptions){var oCol=oSettings.aoColumns[iCol],oClasses=oSettings.oClasses,th=$(oCol.nTh)
;if(!oCol.sWidthOrig){oCol.sWidthOrig=th.attr("width")||null;var t=(th.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);t&&(oCol.sWidthOrig=t[1])}oOptions!==undefined&&null!==oOptions&&(_fnCompatCols(oOptions),_fnCamelToHungarian(DataTable.defaults.column,oOptions),oOptions.mDataProp===undefined||oOptions.mData||(oOptions.mData=oOptions.mDataProp),oOptions.sType&&(oCol._sManualType=oOptions.sType),oOptions.className&&!oOptions.sClass&&(oOptions.sClass=oOptions.className),oOptions.sClass&&th.addClass(oOptions.sClass),$.extend(oCol,oOptions),_fnMap(oCol,oOptions,"sWidth","sWidthOrig"),oOptions.iDataSort!==undefined&&(oCol.aDataSort=[oOptions.iDataSort]),
_fnMap(oCol,oOptions,"aDataSort"));var mDataSrc=oCol.mData,mData=_fnGetObjectDataFn(mDataSrc),mRender=oCol.mRender?_fnGetObjectDataFn(oCol.mRender):null,attrTest=function(src){return"string"==typeof src&&-1!==src.indexOf("@")};oCol._bAttrSrc=$.isPlainObject(mDataSrc)&&(attrTest(mDataSrc.sort)||attrTest(mDataSrc.type)||attrTest(mDataSrc.filter)),oCol._setter=null,oCol.fnGetData=function(rowData,type,meta){var innerData=mData(rowData,type,undefined,meta);return mRender&&type?mRender(innerData,type,rowData,meta):innerData},oCol.fnSetData=function(rowData,val,meta){return _fnSetObjectDataFn(mDataSrc)(rowData,val,meta)},
"number"!=typeof mDataSrc&&(oSettings._rowReadObject=!0),oSettings.oFeatures.bSort||(oCol.bSortable=!1,th.addClass(oClasses.sSortableNone));var bAsc=-1!==$.inArray("asc",oCol.asSorting),bDesc=-1!==$.inArray("desc",oCol.asSorting);oCol.bSortable&&(bAsc||bDesc)?bAsc&&!bDesc?(oCol.sSortingClass=oClasses.sSortableAsc,oCol.sSortingClassJUI=oClasses.sSortJUIAscAllowed):!bAsc&&bDesc?(oCol.sSortingClass=oClasses.sSortableDesc,oCol.sSortingClassJUI=oClasses.sSortJUIDescAllowed):(oCol.sSortingClass=oClasses.sSortable,oCol.sSortingClassJUI=oClasses.sSortJUI):(oCol.sSortingClass=oClasses.sSortableNone,oCol.sSortingClassJUI="")}function _fnAdjustColumnSizing(settings){
if(!1!==settings.oFeatures.bAutoWidth){var columns=settings.aoColumns;_fnCalculateColumnWidths(settings);for(var i=0,iLen=columns.length;i<iLen;i++)columns[i].nTh.style.width=columns[i].sWidth}var scroll=settings.oScroll;""===scroll.sY&&""===scroll.sX||_fnScrollDraw(settings),_fnCallbackFire(settings,null,"column-sizing",[settings])}function _fnVisibleToColumnIndex(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,"bVisible");return"number"==typeof aiVis[iMatch]?aiVis[iMatch]:null}function _fnColumnIndexToVisible(oSettings,iMatch){var aiVis=_fnGetColumns(oSettings,"bVisible"),iPos=$.inArray(iMatch,aiVis);return-1!==iPos?iPos:null}
function _fnVisbleColumns(oSettings){var vis=0;return $.each(oSettings.aoColumns,function(i,col){col.bVisible&&"none"!==$(col.nTh).css("display")&&vis++}),vis}function _fnGetColumns(oSettings,sParam){var a=[];return $.map(oSettings.aoColumns,function(val,i){val[sParam]&&a.push(i)}),a}function _fnColumnTypes(settings){var i,ien,j,jen,k,ken,col,detectedType,cache,columns=settings.aoColumns,data=settings.aoData,types=DataTable.ext.type.detect;for(i=0,ien=columns.length;i<ien;i++)if(col=columns[i],cache=[],!col.sType&&col._sManualType)col.sType=col._sManualType;else if(!col.sType){for(j=0,jen=types.length;j<jen;j++){for(k=0,
ken=data.length;k<ken&&(cache[k]===undefined&&(cache[k]=_fnGetCellData(settings,k,i,"type")),(detectedType=types[j](cache[k],settings))||j===types.length-1)&&"html"!==detectedType;k++);if(detectedType){col.sType=detectedType;break}}col.sType||(col.sType="string")}}function _fnApplyColumnDefs(oSettings,aoColDefs,aoCols,fn){var i,iLen,j,jLen,k,kLen,def,columns=oSettings.aoColumns;if(aoColDefs)for(i=aoColDefs.length-1;i>=0;i--){def=aoColDefs[i];var aTargets=def.targets!==undefined?def.targets:def.aTargets;for($.isArray(aTargets)||(aTargets=[aTargets]),j=0,jLen=aTargets.length;j<jLen;j++)if("number"==typeof aTargets[j]&&aTargets[j]>=0){
for(;columns.length<=aTargets[j];)_fnAddColumn(oSettings);fn(aTargets[j],def)}else if("number"==typeof aTargets[j]&&aTargets[j]<0)fn(columns.length+aTargets[j],def);else if("string"==typeof aTargets[j])for(k=0,kLen=columns.length;k<kLen;k++)("_all"==aTargets[j]||$(columns[k].nTh).hasClass(aTargets[j]))&&fn(k,def)}if(aoCols)for(i=0,iLen=aoCols.length;i<iLen;i++)fn(i,aoCols[i])}function _fnAddData(oSettings,aDataIn,nTr,anTds){var iRow=oSettings.aoData.length,oData=$.extend(!0,{},DataTable.models.oRow,{src:nTr?"dom":"data",idx:iRow});oData._aData=aDataIn,oSettings.aoData.push(oData)
;for(var columns=oSettings.aoColumns,i=0,iLen=columns.length;i<iLen;i++)columns[i].sType=null;oSettings.aiDisplayMaster.push(iRow);var id=oSettings.rowIdFn(aDataIn);return id!==undefined&&(oSettings.aIds[id]=oData),!nTr&&oSettings.oFeatures.bDeferRender||_fnCreateTr(oSettings,iRow,nTr,anTds),iRow}function _fnAddTr(settings,trs){var row;return trs instanceof $||(trs=$(trs)),trs.map(function(i,el){return row=_fnGetRowElements(settings,el),_fnAddData(settings,row.data,el,row.cells)})}function _fnNodeToDataIndex(oSettings,n){return n._DT_RowIndex!==undefined?n._DT_RowIndex:null}function _fnNodeToColumnIndex(oSettings,iRow,n){
return $.inArray(n,oSettings.aoData[iRow].anCells)}function _fnGetCellData(settings,rowIdx,colIdx,type){var draw=settings.iDraw,col=settings.aoColumns[colIdx],rowData=settings.aoData[rowIdx]._aData,defaultContent=col.sDefaultContent,cellData=col.fnGetData(rowData,type,{settings:settings,row:rowIdx,col:colIdx});if(cellData===undefined)return settings.iDrawError!=draw&&null===defaultContent&&(_fnLog(settings,0,"Requested unknown parameter "+("function"==typeof col.mData?"{function}":"'"+col.mData+"'")+" for row "+rowIdx+", column "+colIdx,4),settings.iDrawError=draw),defaultContent
;if(cellData!==rowData&&null!==cellData||null===defaultContent||type===undefined){if("function"==typeof cellData)return cellData.call(rowData)}else cellData=defaultContent;return null===cellData&&"display"==type?"":cellData}function _fnSetCellData(settings,rowIdx,colIdx,val){var col=settings.aoColumns[colIdx],rowData=settings.aoData[rowIdx]._aData;col.fnSetData(rowData,val,{settings:settings,row:rowIdx,col:colIdx})}function _fnSplitObjNotation(str){return $.map(str.match(/(\\.|[^\.])+/g)||[""],function(s){return s.replace(/\\\./g,".")})}function _fnGetObjectDataFn(mSource){if($.isPlainObject(mSource)){var o={};return $.each(mSource,function(key,val){
val&&(o[key]=_fnGetObjectDataFn(val))}),function(data,type,row,meta){var t=o[type]||o._;return t!==undefined?t(data,type,row,meta):data}}if(null===mSource)return function(data){return data};if("function"==typeof mSource)return function(data,type,row,meta){return mSource(data,type,row,meta)};if("string"!=typeof mSource||-1===mSource.indexOf(".")&&-1===mSource.indexOf("[")&&-1===mSource.indexOf("("))return function(data,type){return data[mSource]};var fetchData=function(data,type,src){var arrayNotation,funcNotation,out,innerSrc;if(""!==src)for(var a=_fnSplitObjNotation(src),i=0,iLen=a.length;i<iLen;i++){if(arrayNotation=a[i].match(__reArray),
funcNotation=a[i].match(__reFn),arrayNotation){if(a[i]=a[i].replace(__reArray,""),""!==a[i]&&(data=data[a[i]]),out=[],a.splice(0,i+1),innerSrc=a.join("."),$.isArray(data))for(var j=0,jLen=data.length;j<jLen;j++)out.push(fetchData(data[j],type,innerSrc));var join=arrayNotation[0].substring(1,arrayNotation[0].length-1);data=""===join?out:out.join(join);break}if(funcNotation)a[i]=a[i].replace(__reFn,""),data=data[a[i]]();else{if(null===data||data[a[i]]===undefined)return undefined;data=data[a[i]]}}return data};return function(data,type){return fetchData(data,type,mSource)}}function _fnSetObjectDataFn(mSource){
if($.isPlainObject(mSource))return _fnSetObjectDataFn(mSource._);if(null===mSource)return function(){};if("function"==typeof mSource)return function(data,val,meta){mSource(data,"set",val,meta)};if("string"!=typeof mSource||-1===mSource.indexOf(".")&&-1===mSource.indexOf("[")&&-1===mSource.indexOf("("))return function(data,val){data[mSource]=val};var setData=function(data,val,src){for(var b,arrayNotation,funcNotation,o,innerSrc,a=_fnSplitObjNotation(src),aLast=a[a.length-1],i=0,iLen=a.length-1;i<iLen;i++){if(arrayNotation=a[i].match(__reArray),funcNotation=a[i].match(__reFn),arrayNotation){if(a[i]=a[i].replace(__reArray,""),data[a[i]]=[],b=a.slice(),
b.splice(0,i+1),innerSrc=b.join("."),$.isArray(val))for(var j=0,jLen=val.length;j<jLen;j++)o={},setData(o,val[j],innerSrc),data[a[i]].push(o);else data[a[i]]=val;return}funcNotation&&(a[i]=a[i].replace(__reFn,""),data=data[a[i]](val)),null!==data[a[i]]&&data[a[i]]!==undefined||(data[a[i]]={}),data=data[a[i]]}aLast.match(__reFn)?data=data[aLast.replace(__reFn,"")](val):data[aLast.replace(__reArray,"")]=val};return function(data,val){return setData(data,val,mSource)}}function _fnGetDataMaster(settings){return _pluck(settings.aoData,"_aData")}function _fnClearTable(settings){settings.aoData.length=0,settings.aiDisplayMaster.length=0,settings.aiDisplay.length=0,
settings.aIds={}}function _fnDeleteIndex(a,iTarget,splice){for(var iTargetIndex=-1,i=0,iLen=a.length;i<iLen;i++)a[i]==iTarget?iTargetIndex=i:a[i]>iTarget&&a[i]--;-1!=iTargetIndex&&splice===undefined&&a.splice(iTargetIndex,1)}function _fnInvalidate(settings,rowIdx,src,colIdx){var i,ien,row=settings.aoData[rowIdx],cellWrite=function(cell,col){for(;cell.childNodes.length;)cell.removeChild(cell.firstChild);cell.innerHTML=_fnGetCellData(settings,rowIdx,col,"display")};if("dom"!==src&&(src&&"auto"!==src||"dom"!==row.src)){var cells=row.anCells;if(cells)if(colIdx!==undefined)cellWrite(cells[colIdx],colIdx);else for(i=0,
ien=cells.length;i<ien;i++)cellWrite(cells[i],i)}else row._aData=_fnGetRowElements(settings,row,colIdx,colIdx===undefined?undefined:row._aData).data;row._aSortData=null,row._aFilterData=null;var cols=settings.aoColumns;if(colIdx!==undefined)cols[colIdx].sType=null;else{for(i=0,ien=cols.length;i<ien;i++)cols[i].sType=null;_fnRowAttributes(settings,row)}}function _fnGetRowElements(settings,row,colIdx,d){var name,col,contents,tds=[],td=row.firstChild,i=0,columns=settings.aoColumns,objectRead=settings._rowReadObject;d=d!==undefined?d:objectRead?{}:[];var attr=function(str,td){if("string"==typeof str){var idx=str.indexOf("@");if(-1!==idx){
var attr=str.substring(idx+1);_fnSetObjectDataFn(str)(d,td.getAttribute(attr))}}},cellProcess=function(cell){if(colIdx===undefined||colIdx===i)if(col=columns[i],contents=$.trim(cell.innerHTML),col&&col._bAttrSrc){var setter=_fnSetObjectDataFn(col.mData._);setter(d,contents),attr(col.mData.sort,cell),attr(col.mData.type,cell),attr(col.mData.filter,cell)}else objectRead?(col._setter||(col._setter=_fnSetObjectDataFn(col.mData)),col._setter(d,contents)):d[i]=contents;i++};if(td)for(;td;)name=td.nodeName.toUpperCase(),"TD"!=name&&"TH"!=name||(cellProcess(td),tds.push(td)),td=td.nextSibling;else{tds=row.anCells
;for(var j=0,jen=tds.length;j<jen;j++)cellProcess(tds[j])}var rowNode=row.firstChild?row:row.nTr;if(rowNode){var id=rowNode.getAttribute("id");id&&_fnSetObjectDataFn(settings.rowId)(d,id)}return{data:d,cells:tds}}function _fnCreateTr(oSettings,iRow,nTrIn,anTds){var nTr,nTd,oCol,i,iLen,row=oSettings.aoData[iRow],rowData=row._aData,cells=[];if(null===row.nTr){for(nTr=nTrIn||document.createElement("tr"),row.nTr=nTr,row.anCells=cells,nTr._DT_RowIndex=iRow,_fnRowAttributes(oSettings,row),i=0,iLen=oSettings.aoColumns.length;i<iLen;i++)oCol=oSettings.aoColumns[i],nTd=nTrIn?anTds[i]:document.createElement(oCol.sCellType),nTd._DT_CellIndex={row:iRow,column:i},
cells.push(nTd),nTrIn&&!oCol.mRender&&oCol.mData===i||$.isPlainObject(oCol.mData)&&oCol.mData._===i+".display"||(nTd.innerHTML=_fnGetCellData(oSettings,iRow,i,"display")),oCol.sClass&&(nTd.className+=" "+oCol.sClass),oCol.bVisible&&!nTrIn?nTr.appendChild(nTd):!oCol.bVisible&&nTrIn&&nTd.parentNode.removeChild(nTd),oCol.fnCreatedCell&&oCol.fnCreatedCell.call(oSettings.oInstance,nTd,_fnGetCellData(oSettings,iRow,i),rowData,iRow,i);_fnCallbackFire(oSettings,"aoRowCreatedCallback",null,[nTr,rowData,iRow,cells])}row.nTr.setAttribute("role","row")}function _fnRowAttributes(settings,row){var tr=row.nTr,data=row._aData;if(tr){var id=settings.rowIdFn(data)
;if(id&&(tr.id=id),data.DT_RowClass){var a=data.DT_RowClass.split(" ");row.__rowc=row.__rowc?_unique(row.__rowc.concat(a)):a,$(tr).removeClass(row.__rowc.join(" ")).addClass(data.DT_RowClass)}data.DT_RowAttr&&$(tr).attr(data.DT_RowAttr),data.DT_RowData&&$(tr).data(data.DT_RowData)}}function _fnBuildHead(oSettings){var i,ien,cell,row,column,thead=oSettings.nTHead,tfoot=oSettings.nTFoot,createHeader=0===$("th, td",thead).length,classes=oSettings.oClasses,columns=oSettings.aoColumns;for(createHeader&&(row=$("<tr/>").appendTo(thead)),i=0,ien=columns.length;i<ien;i++)column=columns[i],cell=$(column.nTh).addClass(column.sClass),createHeader&&cell.appendTo(row),
oSettings.oFeatures.bSort&&(cell.addClass(column.sSortingClass),!1!==column.bSortable&&(cell.attr("tabindex",oSettings.iTabIndex).attr("aria-controls",oSettings.sTableId),_fnSortAttachListener(oSettings,column.nTh,i))),column.sTitle!=cell[0].innerHTML&&cell.html(column.sTitle),_fnRenderer(oSettings,"header")(oSettings,cell,column,classes);if(createHeader&&_fnDetectHeader(oSettings.aoHeader,thead),$(thead).find(">tr").attr("role","row"),$(thead).find(">tr>th, >tr>td").addClass(classes.sHeaderTH),$(tfoot).find(">tr>th, >tr>td").addClass(classes.sFooterTH),null!==tfoot){var cells=oSettings.aoFooter[0];for(i=0,ien=cells.length;i<ien;i++)column=columns[i],
column.nTf=cells[i].cell,column.sClass&&$(column.nTf).addClass(column.sClass)}}function _fnDrawHead(oSettings,aoSource,bIncludeHidden){var i,iLen,j,jLen,k,n,nLocalTr,iRowspan,iColspan,aoLocal=[],aApplied=[],iColumns=oSettings.aoColumns.length;if(aoSource){for(bIncludeHidden===undefined&&(bIncludeHidden=!1),i=0,iLen=aoSource.length;i<iLen;i++){for(aoLocal[i]=aoSource[i].slice(),aoLocal[i].nTr=aoSource[i].nTr,j=iColumns-1;j>=0;j--)oSettings.aoColumns[j].bVisible||bIncludeHidden||aoLocal[i].splice(j,1);aApplied.push([])}for(i=0,iLen=aoLocal.length;i<iLen;i++){if(nLocalTr=aoLocal[i].nTr)for(;n=nLocalTr.firstChild;)nLocalTr.removeChild(n);for(j=0,
jLen=aoLocal[i].length;j<jLen;j++)if(iRowspan=1,iColspan=1,aApplied[i][j]===undefined){for(nLocalTr.appendChild(aoLocal[i][j].cell),aApplied[i][j]=1;aoLocal[i+iRowspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i+iRowspan][j].cell;)aApplied[i+iRowspan][j]=1,iRowspan++;for(;aoLocal[i][j+iColspan]!==undefined&&aoLocal[i][j].cell==aoLocal[i][j+iColspan].cell;){for(k=0;k<iRowspan;k++)aApplied[i+k][j+iColspan]=1;iColspan++}$(aoLocal[i][j].cell).attr("rowspan",iRowspan).attr("colspan",iColspan)}}}}function _fnDraw(oSettings){var aPreDraw=_fnCallbackFire(oSettings,"aoPreDrawCallback","preDraw",[oSettings])
;if(-1!==$.inArray(!1,aPreDraw))return void _fnProcessingDisplay(oSettings,!1);var anRows=[],iRowCount=0,asStripeClasses=oSettings.asStripeClasses,iStripes=asStripeClasses.length,oLang=(oSettings.aoOpenRows.length,oSettings.oLanguage),iInitDisplayStart=oSettings.iInitDisplayStart,bServerSide="ssp"==_fnDataSource(oSettings),aiDisplay=oSettings.aiDisplay;oSettings.bDrawing=!0,iInitDisplayStart!==undefined&&-1!==iInitDisplayStart&&(oSettings._iDisplayStart=bServerSide?iInitDisplayStart:iInitDisplayStart>=oSettings.fnRecordsDisplay()?0:iInitDisplayStart,oSettings.iInitDisplayStart=-1)
;var iDisplayStart=oSettings._iDisplayStart,iDisplayEnd=oSettings.fnDisplayEnd();if(oSettings.bDeferLoading)oSettings.bDeferLoading=!1,oSettings.iDraw++,_fnProcessingDisplay(oSettings,!1);else if(bServerSide){if(!oSettings.bDestroying&&!_fnAjaxUpdate(oSettings))return}else oSettings.iDraw++;if(0!==aiDisplay.length)for(var iStart=bServerSide?0:iDisplayStart,iEnd=bServerSide?oSettings.aoData.length:iDisplayEnd,j=iStart;j<iEnd;j++){var iDataIndex=aiDisplay[j],aoData=oSettings.aoData[iDataIndex];null===aoData.nTr&&_fnCreateTr(oSettings,iDataIndex);var nRow=aoData.nTr;if(0!==iStripes){var sStripe=asStripeClasses[iRowCount%iStripes]
;aoData._sRowStripe!=sStripe&&($(nRow).removeClass(aoData._sRowStripe).addClass(sStripe),aoData._sRowStripe=sStripe)}_fnCallbackFire(oSettings,"aoRowCallback",null,[nRow,aoData._aData,iRowCount,j,iDataIndex]),anRows.push(nRow),iRowCount++}else{var sZero=oLang.sZeroRecords;1==oSettings.iDraw&&"ajax"==_fnDataSource(oSettings)?sZero=oLang.sLoadingRecords:oLang.sEmptyTable&&0===oSettings.fnRecordsTotal()&&(sZero=oLang.sEmptyTable),anRows[0]=$("<tr/>",{class:iStripes?asStripeClasses[0]:""}).append($("<td />",{valign:"top",colSpan:_fnVisbleColumns(oSettings),class:oSettings.oClasses.sRowEmpty}).html(sZero))[0]}
_fnCallbackFire(oSettings,"aoHeaderCallback","header",[$(oSettings.nTHead).children("tr")[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]),_fnCallbackFire(oSettings,"aoFooterCallback","footer",[$(oSettings.nTFoot).children("tr")[0],_fnGetDataMaster(oSettings),iDisplayStart,iDisplayEnd,aiDisplay]);var body=$(oSettings.nTBody);body.children().detach(),body.append($(anRows)),_fnCallbackFire(oSettings,"aoDrawCallback","draw",[oSettings]),oSettings.bSorted=!1,oSettings.bFiltered=!1,oSettings.bDrawing=!1}function _fnReDraw(settings,holdPosition){var features=settings.oFeatures,sort=features.bSort,filter=features.bFilter;sort&&_fnSort(settings),
filter?_fnFilterComplete(settings,settings.oPreviousSearch):settings.aiDisplay=settings.aiDisplayMaster.slice(),!0!==holdPosition&&(settings._iDisplayStart=0),settings._drawHold=holdPosition,_fnDraw(settings),settings._drawHold=!1}function _fnAddOptionsHtml(oSettings){var classes=oSettings.oClasses,table=$(oSettings.nTable),holding=$("<div/>").insertBefore(table),features=oSettings.oFeatures,insert=$("<div/>",{id:oSettings.sTableId+"_wrapper",class:classes.sWrapper+(oSettings.nTFoot?"":" "+classes.sNoFooter)});oSettings.nHolding=holding[0],oSettings.nTableWrapper=insert[0],oSettings.nTableReinsertBefore=oSettings.nTable.nextSibling
;for(var featureNode,cOption,nNewNode,cNext,sAttr,j,aDom=oSettings.sDom.split(""),i=0;i<aDom.length;i++){if(featureNode=null,"<"==(cOption=aDom[i])){if(nNewNode=$("<div/>")[0],"'"==(cNext=aDom[i+1])||'"'==cNext){for(sAttr="",j=2;aDom[i+j]!=cNext;)sAttr+=aDom[i+j],j++;if("H"==sAttr?sAttr=classes.sJUIHeader:"F"==sAttr&&(sAttr=classes.sJUIFooter),-1!=sAttr.indexOf(".")){var aSplit=sAttr.split(".");nNewNode.id=aSplit[0].substr(1,aSplit[0].length-1),nNewNode.className=aSplit[1]}else"#"==sAttr.charAt(0)?nNewNode.id=sAttr.substr(1,sAttr.length-1):nNewNode.className=sAttr;i+=j}insert.append(nNewNode),insert=$(nNewNode)
}else if(">"==cOption)insert=insert.parent();else if("l"==cOption&&features.bPaginate&&features.bLengthChange)featureNode=_fnFeatureHtmlLength(oSettings);else if("f"==cOption&&features.bFilter)featureNode=_fnFeatureHtmlFilter(oSettings);else if("r"==cOption&&features.bProcessing)featureNode=_fnFeatureHtmlProcessing(oSettings);else if("t"==cOption)featureNode=_fnFeatureHtmlTable(oSettings);else if("i"==cOption&&features.bInfo)featureNode=_fnFeatureHtmlInfo(oSettings);else if("p"==cOption&&features.bPaginate)featureNode=_fnFeatureHtmlPaginate(oSettings);else if(0!==DataTable.ext.feature.length)for(var aoFeatures=DataTable.ext.feature,k=0,kLen=aoFeatures.length;k<kLen;k++)if(cOption==aoFeatures[k].cFeature){
featureNode=aoFeatures[k].fnInit(oSettings);break}if(featureNode){var aanFeatures=oSettings.aanFeatures;aanFeatures[cOption]||(aanFeatures[cOption]=[]),aanFeatures[cOption].push(featureNode),insert.append(featureNode)}}holding.replaceWith(insert),oSettings.nHolding=null}function _fnDetectHeader(aLayout,nThead){var nTr,nCell,i,k,l,iLen,iColShifted,iColumn,iColspan,iRowspan,bUnique,nTrs=$(nThead).children("tr");for(aLayout.splice(0,aLayout.length),i=0,iLen=nTrs.length;i<iLen;i++)aLayout.push([]);for(i=0,iLen=nTrs.length;i<iLen;i++)for(nTr=nTrs[i],iColumn=0,nCell=nTr.firstChild;nCell;){
if("TD"==nCell.nodeName.toUpperCase()||"TH"==nCell.nodeName.toUpperCase())for(iColspan=1*nCell.getAttribute("colspan"),iRowspan=1*nCell.getAttribute("rowspan"),iColspan=iColspan&&0!==iColspan&&1!==iColspan?iColspan:1,iRowspan=iRowspan&&0!==iRowspan&&1!==iRowspan?iRowspan:1,iColShifted=function(a,i,j){for(var k=a[i];k[j];)j++;return j}(aLayout,i,iColumn),bUnique=1===iColspan,l=0;l<iColspan;l++)for(k=0;k<iRowspan;k++)aLayout[i+k][iColShifted+l]={cell:nCell,unique:bUnique},aLayout[i+k].nTr=nTr;nCell=nCell.nextSibling}}function _fnGetUniqueThs(oSettings,nHeader,aLayout){var aReturn=[];aLayout||(aLayout=oSettings.aoHeader,nHeader&&(aLayout=[],
_fnDetectHeader(aLayout,nHeader)));for(var i=0,iLen=aLayout.length;i<iLen;i++)for(var j=0,jLen=aLayout[i].length;j<jLen;j++)!aLayout[i][j].unique||aReturn[j]&&oSettings.bSortCellsTop||(aReturn[j]=aLayout[i][j].cell);return aReturn}function _fnBuildAjax(oSettings,data,fn){if(_fnCallbackFire(oSettings,"aoServerParams","serverParams",[data]),data&&$.isArray(data)){var tmp={},rbracket=/(.*?)\[\]$/;$.each(data,function(key,val){var match=val.name.match(rbracket);if(match){var name=match[0];tmp[name]||(tmp[name]=[]),tmp[name].push(val.value)}else tmp[val.name]=val.value}),data=tmp}
var ajaxData,ajax=oSettings.ajax,instance=oSettings.oInstance,callback=function(json){_fnCallbackFire(oSettings,null,"xhr",[oSettings,json,oSettings.jqXHR]),fn(json)};if($.isPlainObject(ajax)&&ajax.data){ajaxData=ajax.data;var newData="function"==typeof ajaxData?ajaxData(data,oSettings):ajaxData;data="function"==typeof ajaxData&&newData?newData:$.extend(!0,data,newData),delete ajax.data}var baseAjax={data:data,success:function(json){var error=json.error||json.sError;error&&_fnLog(oSettings,0,error),oSettings.json=json,callback(json)},dataType:"json",cache:!1,type:oSettings.sServerMethod,error:function(xhr,error,thrown){
var ret=_fnCallbackFire(oSettings,null,"xhr",[oSettings,null,oSettings.jqXHR]);-1===$.inArray(!0,ret)&&("parsererror"==error?_fnLog(oSettings,0,"Invalid JSON response",1):4===xhr.readyState&&_fnLog(oSettings,0,"Ajax error",7)),_fnProcessingDisplay(oSettings,!1)}};oSettings.oAjaxData=data,_fnCallbackFire(oSettings,null,"preXhr",[oSettings,data]),oSettings.fnServerData?oSettings.fnServerData.call(instance,oSettings.sAjaxSource,$.map(data,function(val,key){return{name:key,value:val}}),callback,oSettings):oSettings.sAjaxSource||"string"==typeof ajax?oSettings.jqXHR=$.ajax($.extend(baseAjax,{url:ajax||oSettings.sAjaxSource
})):"function"==typeof ajax?oSettings.jqXHR=ajax.call(instance,data,callback,oSettings):(oSettings.jqXHR=$.ajax($.extend(baseAjax,ajax)),ajax.data=ajaxData)}function _fnAjaxUpdate(settings){return!settings.bAjaxDataGet||(settings.iDraw++,_fnProcessingDisplay(settings,!0),_fnBuildAjax(settings,_fnAjaxParameters(settings),function(json){_fnAjaxUpdateDraw(settings,json)}),!1)}function _fnAjaxParameters(settings){
var i,dataProp,column,columnSearch,columns=settings.aoColumns,columnCount=columns.length,features=settings.oFeatures,preSearch=settings.oPreviousSearch,preColSearch=settings.aoPreSearchCols,data=[],sort=_fnSortFlatten(settings),displayStart=settings._iDisplayStart,displayLength=!1!==features.bPaginate?settings._iDisplayLength:-1,param=function(name,value){data.push({name:name,value:value})};param("sEcho",settings.iDraw),param("iColumns",columnCount),param("sColumns",_pluck(columns,"sName").join(",")),param("iDisplayStart",displayStart),param("iDisplayLength",displayLength);var d={draw:settings.iDraw,columns:[],order:[],start:displayStart,
length:displayLength,search:{value:preSearch.sSearch,regex:preSearch.bRegex}};for(i=0;i<columnCount;i++)column=columns[i],columnSearch=preColSearch[i],dataProp="function"==typeof column.mData?"function":column.mData,d.columns.push({data:dataProp,name:column.sName,searchable:column.bSearchable,orderable:column.bSortable,search:{value:columnSearch.sSearch,regex:columnSearch.bRegex}}),param("mDataProp_"+i,dataProp),features.bFilter&&(param("sSearch_"+i,columnSearch.sSearch),param("bRegex_"+i,columnSearch.bRegex),param("bSearchable_"+i,column.bSearchable)),features.bSort&&param("bSortable_"+i,column.bSortable)
;features.bFilter&&(param("sSearch",preSearch.sSearch),param("bRegex",preSearch.bRegex)),features.bSort&&($.each(sort,function(i,val){d.order.push({column:val.col,dir:val.dir}),param("iSortCol_"+i,val.col),param("sSortDir_"+i,val.dir)}),param("iSortingCols",sort.length));var legacy=DataTable.ext.legacy.ajax;return null===legacy?settings.sAjaxSource?data:d:legacy?data:d}function _fnAjaxUpdateDraw(settings,json){var compat=function(old,modern){return json[old]!==undefined?json[old]:json[modern]
},data=_fnAjaxDataSrc(settings,json),draw=compat("sEcho","draw"),recordsTotal=compat("iTotalRecords","recordsTotal"),recordsFiltered=compat("iTotalDisplayRecords","recordsFiltered");if(draw){if(1*draw<settings.iDraw)return;settings.iDraw=1*draw}_fnClearTable(settings),settings._iRecordsTotal=parseInt(recordsTotal,10),settings._iRecordsDisplay=parseInt(recordsFiltered,10);for(var i=0,ien=data.length;i<ien;i++)_fnAddData(settings,data[i]);settings.aiDisplay=settings.aiDisplayMaster.slice(),settings.bAjaxDataGet=!1,_fnDraw(settings),settings._bInitComplete||_fnInitComplete(settings,json),settings.bAjaxDataGet=!0,_fnProcessingDisplay(settings,!1)}
function _fnAjaxDataSrc(oSettings,json){var dataSrc=$.isPlainObject(oSettings.ajax)&&oSettings.ajax.dataSrc!==undefined?oSettings.ajax.dataSrc:oSettings.sAjaxDataProp;return"data"===dataSrc?json.aaData||json[dataSrc]:""!==dataSrc?_fnGetObjectDataFn(dataSrc)(json):json}function _fnFeatureHtmlFilter(settings){var classes=settings.oClasses,tableId=settings.sTableId,language=settings.oLanguage,previousSearch=settings.oPreviousSearch,features=settings.aanFeatures,input='<input type="search" class="'+classes.sFilterInput+'"/>',str=language.sSearch;str=str.match(/_INPUT_/)?str.replace("_INPUT_",input):str+input;var filter=$("<div/>",{
id:features.f?null:tableId+"_filter",class:classes.sFilter}).append($("<label/>").append(str)),searchFn=function(){var val=(features.f,this.value?this.value:"");val!=previousSearch.sSearch&&(_fnFilterComplete(settings,{sSearch:val,bRegex:previousSearch.bRegex,bSmart:previousSearch.bSmart,bCaseInsensitive:previousSearch.bCaseInsensitive}),settings._iDisplayStart=0,_fnDraw(settings))
},searchDelay=null!==settings.searchDelay?settings.searchDelay:"ssp"===_fnDataSource(settings)?400:0,jqFilter=$("input",filter).val(previousSearch.sSearch).attr("placeholder",language.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",searchDelay?_fnThrottle(searchFn,searchDelay):searchFn).on("keypress.DT",function(e){if(13==e.keyCode)return!1}).attr("aria-controls",tableId);return $(settings.nTable).on("search.dt.DT",function(ev,s){if(settings===s)try{jqFilter[0]!==document.activeElement&&jqFilter.val(previousSearch.sSearch)}catch(e){}}),filter[0]}function _fnFilterComplete(oSettings,oInput,iForce){
var oPrevSearch=oSettings.oPreviousSearch,aoPrevSearch=oSettings.aoPreSearchCols,fnSaveFilter=function(oFilter){oPrevSearch.sSearch=oFilter.sSearch,oPrevSearch.bRegex=oFilter.bRegex,oPrevSearch.bSmart=oFilter.bSmart,oPrevSearch.bCaseInsensitive=oFilter.bCaseInsensitive},fnRegex=function(o){return o.bEscapeRegex!==undefined?!o.bEscapeRegex:o.bRegex};if(_fnColumnTypes(oSettings),"ssp"!=_fnDataSource(oSettings)){_fnFilter(oSettings,oInput.sSearch,iForce,fnRegex(oInput),oInput.bSmart,oInput.bCaseInsensitive),fnSaveFilter(oInput)
;for(var i=0;i<aoPrevSearch.length;i++)_fnFilterColumn(oSettings,aoPrevSearch[i].sSearch,i,fnRegex(aoPrevSearch[i]),aoPrevSearch[i].bSmart,aoPrevSearch[i].bCaseInsensitive);_fnFilterCustom(oSettings)}else fnSaveFilter(oInput);oSettings.bFiltered=!0,_fnCallbackFire(oSettings,null,"search",[oSettings])}function _fnFilterCustom(settings){for(var row,rowIdx,filters=DataTable.ext.search,displayRows=settings.aiDisplay,i=0,ien=filters.length;i<ien;i++){for(var rows=[],j=0,jen=displayRows.length;j<jen;j++)rowIdx=displayRows[j],row=settings.aoData[rowIdx],filters[i](settings,row._aFilterData,rowIdx,row._aData,j)&&rows.push(rowIdx);displayRows.length=0,
$.merge(displayRows,rows)}}function _fnFilterColumn(settings,searchStr,colIdx,regex,smart,caseInsensitive){if(""!==searchStr){for(var data,out=[],display=settings.aiDisplay,rpSearch=_fnFilterCreateSearch(searchStr,regex,smart,caseInsensitive),i=0;i<display.length;i++)data=settings.aoData[display[i]]._aFilterData[colIdx],rpSearch.test(data)&&out.push(display[i]);settings.aiDisplay=out}}function _fnFilter(settings,input,force,regex,smart,caseInsensitive){var display,invalidated,i,rpSearch=_fnFilterCreateSearch(input,regex,smart,caseInsensitive),prevSearch=settings.oPreviousSearch.sSearch,displayMaster=settings.aiDisplayMaster,filtered=[]
;if(0!==DataTable.ext.search.length&&(force=!0),invalidated=_fnFilterData(settings),input.length<=0)settings.aiDisplay=displayMaster.slice();else{for((invalidated||force||prevSearch.length>input.length||0!==input.indexOf(prevSearch)||settings.bSorted)&&(settings.aiDisplay=displayMaster.slice()),display=settings.aiDisplay,i=0;i<display.length;i++)rpSearch.test(settings.aoData[display[i]]._sFilterRow)&&filtered.push(display[i]);settings.aiDisplay=filtered}}function _fnFilterCreateSearch(search,regex,smart,caseInsensitive){if(search=regex?search:_fnEscapeRegex(search),smart){search="^(?=.*?"+$.map(search.match(/"[^"]+"|[^ ]+/g)||[""],function(word){
if('"'===word.charAt(0)){var m=word.match(/^"(.*)"$/);word=m?m[1]:word}return word.replace('"',"")}).join(")(?=.*?")+").*$"}return new RegExp(search,caseInsensitive?"i":"")}function _fnFilterData(settings){var column,i,j,ien,jen,filterData,cellData,row,columns=settings.aoColumns,fomatters=DataTable.ext.type.search,wasInvalidated=!1;for(i=0,ien=settings.aoData.length;i<ien;i++)if(row=settings.aoData[i],!row._aFilterData){for(filterData=[],j=0,jen=columns.length;j<jen;j++)column=columns[j],column.bSearchable?(cellData=_fnGetCellData(settings,i,j,"filter"),fomatters[column.sType]&&(cellData=fomatters[column.sType](cellData)),null===cellData&&(cellData=""),
"string"!=typeof cellData&&cellData.toString&&(cellData=cellData.toString())):cellData="",cellData.indexOf&&-1!==cellData.indexOf("&")&&(__filter_div.innerHTML=cellData,cellData=__filter_div_textContent?__filter_div.textContent:__filter_div.innerText),cellData.replace&&(cellData=cellData.replace(/[\r\n]/g,"")),filterData.push(cellData);row._aFilterData=filterData,row._sFilterRow=filterData.join("  "),wasInvalidated=!0}return wasInvalidated}function _fnSearchToCamel(obj){return{search:obj.sSearch,smart:obj.bSmart,regex:obj.bRegex,caseInsensitive:obj.bCaseInsensitive}}function _fnSearchToHung(obj){return{sSearch:obj.search,bSmart:obj.smart,bRegex:obj.regex,
bCaseInsensitive:obj.caseInsensitive}}function _fnFeatureHtmlInfo(settings){var tid=settings.sTableId,nodes=settings.aanFeatures.i,n=$("<div/>",{class:settings.oClasses.sInfo,id:nodes?null:tid+"_info"});return nodes||(settings.aoDrawCallback.push({fn:_fnUpdateInfo,sName:"information"}),n.attr("role","status").attr("aria-live","polite"),$(settings.nTable).attr("aria-describedby",tid+"_info")),n[0]}function _fnUpdateInfo(settings){var nodes=settings.aanFeatures.i;if(0!==nodes.length){
var lang=settings.oLanguage,start=settings._iDisplayStart+1,end=settings.fnDisplayEnd(),max=settings.fnRecordsTotal(),total=settings.fnRecordsDisplay(),out=total?lang.sInfo:lang.sInfoEmpty;total!==max&&(out+=" "+lang.sInfoFiltered),out+=lang.sInfoPostFix,out=_fnInfoMacros(settings,out);var callback=lang.fnInfoCallback;null!==callback&&(out=callback.call(settings.oInstance,settings,start,end,max,total,out)),$(nodes).html(out)}}function _fnInfoMacros(settings,str){var formatter=settings.fnFormatNumber,start=settings._iDisplayStart+1,len=settings._iDisplayLength,vis=settings.fnRecordsDisplay(),all=-1===len
;return str.replace(/_START_/g,formatter.call(settings,start)).replace(/_END_/g,formatter.call(settings,settings.fnDisplayEnd())).replace(/_MAX_/g,formatter.call(settings,settings.fnRecordsTotal())).replace(/_TOTAL_/g,formatter.call(settings,vis)).replace(/_PAGE_/g,formatter.call(settings,all?1:Math.ceil(start/len))).replace(/_PAGES_/g,formatter.call(settings,all?1:Math.ceil(vis/len)))}function _fnInitialise(settings){var i,iLen,column,iAjaxStart=settings.iInitDisplayStart,columns=settings.aoColumns,features=settings.oFeatures,deferLoading=settings.bDeferLoading;if(!settings.bInitialised)return void setTimeout(function(){_fnInitialise(settings)},200)
;for(_fnAddOptionsHtml(settings),_fnBuildHead(settings),_fnDrawHead(settings,settings.aoHeader),_fnDrawHead(settings,settings.aoFooter),_fnProcessingDisplay(settings,!0),features.bAutoWidth&&_fnCalculateColumnWidths(settings),i=0,iLen=columns.length;i<iLen;i++)column=columns[i],column.sWidth&&(column.nTh.style.width=_fnStringToCss(column.sWidth));_fnCallbackFire(settings,null,"preInit",[settings]),_fnReDraw(settings);var dataSrc=_fnDataSource(settings);("ssp"!=dataSrc||deferLoading)&&("ajax"==dataSrc?_fnBuildAjax(settings,[],function(json){var aData=_fnAjaxDataSrc(settings,json);for(i=0;i<aData.length;i++)_fnAddData(settings,aData[i])
;settings.iInitDisplayStart=iAjaxStart,_fnReDraw(settings),_fnProcessingDisplay(settings,!1),_fnInitComplete(settings,json)},settings):(_fnProcessingDisplay(settings,!1),_fnInitComplete(settings)))}function _fnInitComplete(settings,json){settings._bInitComplete=!0,(json||settings.oInit.aaData)&&_fnAdjustColumnSizing(settings),_fnCallbackFire(settings,null,"plugin-init",[settings,json]),_fnCallbackFire(settings,"aoInitComplete","init",[settings,json])}function _fnLengthChange(settings,val){var len=parseInt(val,10);settings._iDisplayLength=len,_fnLengthOverflow(settings),_fnCallbackFire(settings,null,"length",[settings,len])}
function _fnFeatureHtmlLength(settings){for(var classes=settings.oClasses,tableId=settings.sTableId,menu=settings.aLengthMenu,d2=$.isArray(menu[0]),lengths=d2?menu[0]:menu,language=d2?menu[1]:menu,select=$("<select/>",{name:tableId+"_length","aria-controls":tableId,class:classes.sLengthSelect}),i=0,ien=lengths.length;i<ien;i++)select[0][i]=new Option("number"==typeof language[i]?settings.fnFormatNumber(language[i]):language[i],lengths[i]);var div=$("<div><label/></div>").addClass(classes.sLength);return settings.aanFeatures.l||(div[0].id=tableId+"_length"),div.children().append(settings.oLanguage.sLengthMenu.replace("_MENU_",select[0].outerHTML)),
$("select",div).val(settings._iDisplayLength).on("change.DT",function(e){_fnLengthChange(settings,$(this).val()),_fnDraw(settings)}),$(settings.nTable).on("length.dt.DT",function(e,s,len){settings===s&&$("select",div).val(len)}),div[0]}function _fnFeatureHtmlPaginate(settings){var type=settings.sPaginationType,plugin=DataTable.ext.pager[type],modern="function"==typeof plugin,redraw=function(settings){_fnDraw(settings)},node=$("<div/>").addClass(settings.oClasses.sPaging+type)[0],features=settings.aanFeatures;return modern||plugin.fnInit(settings,node,redraw),features.p||(node.id=settings.sTableId+"_paginate",settings.aoDrawCallback.push({
fn:function(settings){if(modern){var i,ien,start=settings._iDisplayStart,len=settings._iDisplayLength,visRecords=settings.fnRecordsDisplay(),all=-1===len,page=all?0:Math.ceil(start/len),pages=all?1:Math.ceil(visRecords/len),buttons=plugin(page,pages);for(i=0,ien=features.p.length;i<ien;i++)_fnRenderer(settings,"pageButton")(settings,features.p[i],i,buttons,page,pages)}else plugin.fnUpdate(settings,redraw)},sName:"pagination"})),node}function _fnPageChange(settings,action,redraw){var start=settings._iDisplayStart,len=settings._iDisplayLength,records=settings.fnRecordsDisplay()
;0===records||-1===len?start=0:"number"==typeof action?(start=action*len)>records&&(start=0):"first"==action?start=0:"previous"==action?(start=len>=0?start-len:0)<0&&(start=0):"next"==action?start+len<records&&(start+=len):"last"==action?start=Math.floor((records-1)/len)*len:_fnLog(settings,0,"Unknown paging action: "+action,5);var changed=settings._iDisplayStart!==start;return settings._iDisplayStart=start,changed&&(_fnCallbackFire(settings,null,"page",[settings]),redraw&&_fnDraw(settings)),changed}function _fnFeatureHtmlProcessing(settings){return $("<div/>",{id:settings.aanFeatures.r?null:settings.sTableId+"_processing",class:settings.oClasses.sProcessing
}).html(settings.oLanguage.sProcessing).insertBefore(settings.nTable)[0]}function _fnProcessingDisplay(settings,show){settings.oFeatures.bProcessing&&$(settings.aanFeatures.r).css("display",show?"block":"none"),_fnCallbackFire(settings,null,"processing",[settings,show])}function _fnFeatureHtmlTable(settings){var table=$(settings.nTable);table.attr("role","grid");var scroll=settings.oScroll;if(""===scroll.sX&&""===scroll.sY)return settings.nTable
;var scrollX=scroll.sX,scrollY=scroll.sY,classes=settings.oClasses,caption=table.children("caption"),captionSide=caption.length?caption[0]._captionSide:null,headerClone=$(table[0].cloneNode(!1)),footerClone=$(table[0].cloneNode(!1)),footer=table.children("tfoot"),_div="<div/>",size=function(s){return s?_fnStringToCss(s):null};footer.length||(footer=null);var scroller=$(_div,{class:classes.sScrollWrapper}).append($(_div,{class:classes.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:scrollX?size(scrollX):"100%"}).append($(_div,{class:classes.sScrollHeadInner}).css({"box-sizing":"content-box",width:scroll.sXInner||"100%"
}).append(headerClone.removeAttr("id").css("margin-left",0).append("top"===captionSide?caption:null).append(table.children("thead"))))).append($(_div,{class:classes.sScrollBody}).css({position:"relative",overflow:"auto",width:size(scrollX)}).append(table));footer&&scroller.append($(_div,{class:classes.sScrollFoot}).css({overflow:"hidden",border:0,width:scrollX?size(scrollX):"100%"}).append($(_div,{class:classes.sScrollFootInner}).append(footerClone.removeAttr("id").css("margin-left",0).append("bottom"===captionSide?caption:null).append(table.children("tfoot")))))
;var children=scroller.children(),scrollHead=children[0],scrollBody=children[1],scrollFoot=footer?children[2]:null;return scrollX&&$(scrollBody).on("scroll.DT",function(e){var scrollLeft=this.scrollLeft;scrollHead.scrollLeft=scrollLeft,footer&&(scrollFoot.scrollLeft=scrollLeft)}),$(scrollBody).css(scrollY&&scroll.bCollapse?"max-height":"height",scrollY),settings.nScrollHead=scrollHead,settings.nScrollBody=scrollBody,settings.nScrollFoot=scrollFoot,settings.aoDrawCallback.push({fn:_fnScrollDraw,sName:"scrolling"}),scroller[0]}function _fnScrollDraw(settings){
var headerTrgEls,footerTrgEls,headerSrcEls,footerSrcEls,headerCopy,footerCopy,idx,correction,sanityWidth,scroll=settings.oScroll,scrollX=scroll.sX,scrollXInner=scroll.sXInner,scrollY=scroll.sY,barWidth=scroll.iBarWidth,divHeader=$(settings.nScrollHead),divHeaderStyle=divHeader[0].style,divHeaderInner=divHeader.children("div"),divHeaderInnerStyle=divHeaderInner[0].style,divHeaderTable=divHeaderInner.children("table"),divBodyEl=settings.nScrollBody,divBody=$(divBodyEl),divBodyStyle=divBodyEl.style,divFooter=$(settings.nScrollFoot),divFooterInner=divFooter.children("div"),divFooterTable=divFooterInner.children("table"),header=$(settings.nTHead),table=$(settings.nTable),tableEl=table[0],tableStyle=tableEl.style,footer=settings.nTFoot?$(settings.nTFoot):null,browser=settings.oBrowser,ie67=browser.bScrollOversize,dtHeaderCells=_pluck(settings.aoColumns,"nTh"),headerWidths=[],footerWidths=[],headerContent=[],footerContent=[],zeroOut=function(nSizer){
var style=nSizer.style;style.paddingTop="0",style.paddingBottom="0",style.borderTopWidth="0",style.borderBottomWidth="0",style.height=0},scrollBarVis=divBodyEl.scrollHeight>divBodyEl.clientHeight;if(settings.scrollBarVis!==scrollBarVis&&settings.scrollBarVis!==undefined)return settings.scrollBarVis=scrollBarVis,void _fnAdjustColumnSizing(settings);settings.scrollBarVis=scrollBarVis,table.children("thead, tfoot").remove(),footer&&(footerCopy=footer.clone().prependTo(table),footerTrgEls=footer.find("tr"),footerSrcEls=footerCopy.find("tr")),headerCopy=header.clone().prependTo(table),headerTrgEls=header.find("tr"),headerSrcEls=headerCopy.find("tr"),
headerCopy.find("th, td").removeAttr("tabindex"),scrollX||(divBodyStyle.width="100%",divHeader[0].style.width="100%"),$.each(_fnGetUniqueThs(settings,headerCopy),function(i,el){idx=_fnVisibleToColumnIndex(settings,i),el.style.width=settings.aoColumns[idx].sWidth}),footer&&_fnApplyToChildren(function(n){n.style.width=""},footerSrcEls),sanityWidth=table.outerWidth(),""===scrollX?(tableStyle.width="100%",ie67&&(table.find("tbody").height()>divBodyEl.offsetHeight||"scroll"==divBody.css("overflow-y"))&&(tableStyle.width=_fnStringToCss(table.outerWidth()-barWidth)),sanityWidth=table.outerWidth()):""!==scrollXInner&&(tableStyle.width=_fnStringToCss(scrollXInner),
sanityWidth=table.outerWidth()),_fnApplyToChildren(zeroOut,headerSrcEls),_fnApplyToChildren(function(nSizer){headerContent.push(nSizer.innerHTML),headerWidths.push(_fnStringToCss($(nSizer).css("width")))},headerSrcEls),_fnApplyToChildren(function(nToSize,i){-1!==$.inArray(nToSize,dtHeaderCells)&&(nToSize.style.width=headerWidths[i])},headerTrgEls),$(headerSrcEls).height(0),footer&&(_fnApplyToChildren(zeroOut,footerSrcEls),_fnApplyToChildren(function(nSizer){footerContent.push(nSizer.innerHTML),footerWidths.push(_fnStringToCss($(nSizer).css("width")))},footerSrcEls),_fnApplyToChildren(function(nToSize,i){nToSize.style.width=footerWidths[i]},footerTrgEls),
$(footerSrcEls).height(0)),_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML='<div class="dataTables_sizing">'+headerContent[i]+"</div>",nSizer.childNodes[0].style.height="0",nSizer.childNodes[0].style.overflow="hidden",nSizer.style.width=headerWidths[i]},headerSrcEls),footer&&_fnApplyToChildren(function(nSizer,i){nSizer.innerHTML='<div class="dataTables_sizing">'+footerContent[i]+"</div>",nSizer.childNodes[0].style.height="0",nSizer.childNodes[0].style.overflow="hidden",nSizer.style.width=footerWidths[i]},footerSrcEls),
table.outerWidth()<sanityWidth?(correction=divBodyEl.scrollHeight>divBodyEl.offsetHeight||"scroll"==divBody.css("overflow-y")?sanityWidth+barWidth:sanityWidth,ie67&&(divBodyEl.scrollHeight>divBodyEl.offsetHeight||"scroll"==divBody.css("overflow-y"))&&(tableStyle.width=_fnStringToCss(correction-barWidth)),""!==scrollX&&""===scrollXInner||_fnLog(settings,1,"Possible column misalignment",6)):correction="100%",divBodyStyle.width=_fnStringToCss(correction),divHeaderStyle.width=_fnStringToCss(correction),footer&&(settings.nScrollFoot.style.width=_fnStringToCss(correction)),scrollY||ie67&&(divBodyStyle.height=_fnStringToCss(tableEl.offsetHeight+barWidth))
;var iOuterWidth=table.outerWidth();divHeaderTable[0].style.width=_fnStringToCss(iOuterWidth),divHeaderInnerStyle.width=_fnStringToCss(iOuterWidth);var bScrolling=table.height()>divBodyEl.clientHeight||"scroll"==divBody.css("overflow-y"),padding="padding"+(browser.bScrollbarLeft?"Left":"Right");divHeaderInnerStyle[padding]=bScrolling?barWidth+"px":"0px",footer&&(divFooterTable[0].style.width=_fnStringToCss(iOuterWidth),divFooterInner[0].style.width=_fnStringToCss(iOuterWidth),divFooterInner[0].style[padding]=bScrolling?barWidth+"px":"0px"),table.children("colgroup").insertBefore(table.children("thead")),divBody.scroll(),
!settings.bSorted&&!settings.bFiltered||settings._drawHold||(divBodyEl.scrollTop=0)}function _fnApplyToChildren(fn,an1,an2){for(var nNode1,nNode2,index=0,i=0,iLen=an1.length;i<iLen;){for(nNode1=an1[i].firstChild,nNode2=an2?an2[i].firstChild:null;nNode1;)1===nNode1.nodeType&&(an2?fn(nNode1,nNode2,index):fn(nNode1,index),index++),nNode1=nNode1.nextSibling,nNode2=an2?nNode2.nextSibling:null;i++}}function _fnCalculateColumnWidths(oSettings){
var i,column,columnIdx,table=oSettings.nTable,columns=oSettings.aoColumns,scroll=oSettings.oScroll,scrollY=scroll.sY,scrollX=scroll.sX,scrollXInner=scroll.sXInner,columnCount=columns.length,visibleColumns=_fnGetColumns(oSettings,"bVisible"),headerCells=$("th",oSettings.nTHead),tableWidthAttr=table.getAttribute("width"),tableContainer=table.parentNode,userInputs=!1,browser=oSettings.oBrowser,ie67=browser.bScrollOversize,styleWidth=table.style.width;for(styleWidth&&-1!==styleWidth.indexOf("%")&&(tableWidthAttr=styleWidth),i=0;i<visibleColumns.length;i++)column=columns[visibleColumns[i]],
null!==column.sWidth&&(column.sWidth=_fnConvertToWidth(column.sWidthOrig,tableContainer),userInputs=!0);if(ie67||!userInputs&&!scrollX&&!scrollY&&columnCount==_fnVisbleColumns(oSettings)&&columnCount==headerCells.length)for(i=0;i<columnCount;i++){var colIdx=_fnVisibleToColumnIndex(oSettings,i);null!==colIdx&&(columns[colIdx].sWidth=_fnStringToCss(headerCells.eq(i).width()))}else{var tmpTable=$(table).clone().css("visibility","hidden").removeAttr("id");tmpTable.find("tbody tr").remove();var tr=$("<tr/>").appendTo(tmpTable.find("tbody"));for(tmpTable.find("thead, tfoot").remove(),tmpTable.append($(oSettings.nTHead).clone()).append($(oSettings.nTFoot).clone()),
tmpTable.find("tfoot th, tfoot td").css("width",""),headerCells=_fnGetUniqueThs(oSettings,tmpTable.find("thead")[0]),i=0;i<visibleColumns.length;i++)column=columns[visibleColumns[i]],headerCells[i].style.width=null!==column.sWidthOrig&&""!==column.sWidthOrig?_fnStringToCss(column.sWidthOrig):"",column.sWidthOrig&&scrollX&&$(headerCells[i]).append($("<div/>").css({width:column.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(oSettings.aoData.length)for(i=0;i<visibleColumns.length;i++)columnIdx=visibleColumns[i],column=columns[columnIdx],$(_fnGetWidestNode(oSettings,columnIdx)).clone(!1).append(column.sContentPadding).appendTo(tr)
;$("[name]",tmpTable).removeAttr("name");var holder=$("<div/>").css(scrollX||scrollY?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(tmpTable).appendTo(tableContainer);scrollX&&scrollXInner?tmpTable.width(scrollXInner):scrollX?(tmpTable.css("width","auto"),tmpTable.removeAttr("width"),tmpTable.width()<tableContainer.clientWidth&&tableWidthAttr&&tmpTable.width(tableContainer.clientWidth)):scrollY?tmpTable.width(tableContainer.clientWidth):tableWidthAttr&&tmpTable.width(tableWidthAttr);var total=0;for(i=0;i<visibleColumns.length;i++){
var cell=$(headerCells[i]),border=cell.outerWidth()-cell.width(),bounding=browser.bBounding?Math.ceil(headerCells[i].getBoundingClientRect().width):cell.outerWidth();total+=bounding,columns[visibleColumns[i]].sWidth=_fnStringToCss(bounding-border)}table.style.width=_fnStringToCss(total),holder.remove()}if(tableWidthAttr&&(table.style.width=_fnStringToCss(tableWidthAttr)),(tableWidthAttr||scrollX)&&!oSettings._reszEvt){var bindResize=function(){$(window).on("resize.DT-"+oSettings.sInstance,_fnThrottle(function(){_fnAdjustColumnSizing(oSettings)}))};ie67?setTimeout(bindResize,1e3):bindResize(),oSettings._reszEvt=!0}}function _fnConvertToWidth(width,parent){
if(!width)return 0;var n=$("<div/>").css("width",_fnStringToCss(width)).appendTo(parent||document.body),val=n[0].offsetWidth;return n.remove(),val}function _fnGetWidestNode(settings,colIdx){var idx=_fnGetMaxLenString(settings,colIdx);if(idx<0)return null;var data=settings.aoData[idx];return data.nTr?data.anCells[colIdx]:$("<td/>").html(_fnGetCellData(settings,idx,colIdx,"display"))[0]}function _fnGetMaxLenString(settings,colIdx){for(var s,max=-1,maxIdx=-1,i=0,ien=settings.aoData.length;i<ien;i++)s=_fnGetCellData(settings,i,colIdx,"display")+"",s=s.replace(__re_html_remove,""),s=s.replace(/&nbsp;/g," "),s.length>max&&(max=s.length,maxIdx=i);return maxIdx}
function _fnStringToCss(s){return null===s?"0px":"number"==typeof s?s<0?"0px":s+"px":s.match(/\d$/)?s+"px":s}function _fnSortFlatten(settings){var i,k,kLen,aDataSort,iCol,sType,srcCol,aSort=[],aoColumns=settings.aoColumns,fixed=settings.aaSortingFixed,fixedObj=$.isPlainObject(fixed),nestedSort=[],add=function(a){a.length&&!$.isArray(a[0])?nestedSort.push(a):$.merge(nestedSort,a)};for($.isArray(fixed)&&add(fixed),fixedObj&&fixed.pre&&add(fixed.pre),add(settings.aaSorting),fixedObj&&fixed.post&&add(fixed.post),i=0;i<nestedSort.length;i++)for(srcCol=nestedSort[i][0],aDataSort=aoColumns[srcCol].aDataSort,k=0,kLen=aDataSort.length;k<kLen;k++)iCol=aDataSort[k],
sType=aoColumns[iCol].sType||"string",nestedSort[i]._idx===undefined&&(nestedSort[i]._idx=$.inArray(nestedSort[i][1],aoColumns[iCol].asSorting)),aSort.push({src:srcCol,col:iCol,dir:nestedSort[i][1],index:nestedSort[i]._idx,type:sType,formatter:DataTable.ext.type.order[sType+"-pre"]});return aSort}function _fnSort(oSettings){var i,ien,iLen,sortCol,aSort,aiOrig=[],oExtSort=DataTable.ext.type.order,aoData=oSettings.aoData,formatters=(oSettings.aoColumns,0),displayMaster=oSettings.aiDisplayMaster;for(_fnColumnTypes(oSettings),aSort=_fnSortFlatten(oSettings),i=0,ien=aSort.length;i<ien;i++)sortCol=aSort[i],sortCol.formatter&&formatters++,
_fnSortData(oSettings,sortCol.col);if("ssp"!=_fnDataSource(oSettings)&&0!==aSort.length){for(i=0,iLen=displayMaster.length;i<iLen;i++)aiOrig[displayMaster[i]]=i;formatters===aSort.length?displayMaster.sort(function(a,b){var x,y,k,test,sort,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++)if(sort=aSort[k],x=dataA[sort.col],y=dataB[sort.col],0!==(test=x<y?-1:x>y?1:0))return"asc"===sort.dir?test:-test;return x=aiOrig[a],y=aiOrig[b],x<y?-1:x>y?1:0}):displayMaster.sort(function(a,b){var x,y,k,test,sort,fn,len=aSort.length,dataA=aoData[a]._aSortData,dataB=aoData[b]._aSortData;for(k=0;k<len;k++)if(sort=aSort[k],
x=dataA[sort.col],y=dataB[sort.col],fn=oExtSort[sort.type+"-"+sort.dir]||oExtSort["string-"+sort.dir],0!==(test=fn(x,y)))return test;return x=aiOrig[a],y=aiOrig[b],x<y?-1:x>y?1:0})}oSettings.bSorted=!0}function _fnSortAria(settings){for(var label,nextSort,columns=settings.aoColumns,aSort=_fnSortFlatten(settings),oAria=settings.oLanguage.oAria,i=0,iLen=columns.length;i<iLen;i++){var col=columns[i],asSorting=col.asSorting,sTitle=col.sTitle.replace(/<.*?>/g,""),th=col.nTh;th.removeAttribute("aria-sort"),col.bSortable?(aSort.length>0&&aSort[0].col==i?(th.setAttribute("aria-sort","asc"==aSort[0].dir?"ascending":"descending"),
nextSort=asSorting[aSort[0].index+1]||asSorting[0]):nextSort=asSorting[0],label=sTitle+("asc"===nextSort?oAria.sSortAscending:oAria.sSortDescending)):label=sTitle,th.setAttribute("aria-label",label)}}function _fnSortListener(settings,colIdx,append,callback){var nextSortIdx,col=settings.aoColumns[colIdx],sorting=settings.aaSorting,asSorting=col.asSorting,next=function(a,overflow){var idx=a._idx;return idx===undefined&&(idx=$.inArray(a[1],asSorting)),idx+1<asSorting.length?idx+1:overflow?null:0};if("number"==typeof sorting[0]&&(sorting=settings.aaSorting=[sorting]),append&&settings.oFeatures.bSortMulti){var sortIdx=$.inArray(colIdx,_pluck(sorting,"0"))
;-1!==sortIdx?(nextSortIdx=next(sorting[sortIdx],!0),null===nextSortIdx&&1===sorting.length&&(nextSortIdx=0),null===nextSortIdx?sorting.splice(sortIdx,1):(sorting[sortIdx][1]=asSorting[nextSortIdx],sorting[sortIdx]._idx=nextSortIdx)):(sorting.push([colIdx,asSorting[0],0]),sorting[sorting.length-1]._idx=0)}else sorting.length&&sorting[0][0]==colIdx?(nextSortIdx=next(sorting[0]),sorting.length=1,sorting[0][1]=asSorting[nextSortIdx],sorting[0]._idx=nextSortIdx):(sorting.length=0,sorting.push([colIdx,asSorting[0]]),sorting[0]._idx=0);_fnReDraw(settings),"function"==typeof callback&&callback(settings)}
function _fnSortAttachListener(settings,attachTo,colIdx,callback){var col=settings.aoColumns[colIdx];_fnBindAction(attachTo,{},function(e){!1!==col.bSortable&&(settings.oFeatures.bProcessing?(_fnProcessingDisplay(settings,!0),setTimeout(function(){_fnSortListener(settings,colIdx,e.shiftKey,callback),"ssp"!==_fnDataSource(settings)&&_fnProcessingDisplay(settings,!1)},0)):_fnSortListener(settings,colIdx,e.shiftKey,callback))})}function _fnSortingClasses(settings){var i,ien,colIdx,oldSort=settings.aLastSort,sortClass=settings.oClasses.sSortColumn,sort=_fnSortFlatten(settings),features=settings.oFeatures;if(features.bSort&&features.bSortClasses){for(i=0,
ien=oldSort.length;i<ien;i++)colIdx=oldSort[i].src,$(_pluck(settings.aoData,"anCells",colIdx)).removeClass(sortClass+(i<2?i+1:3));for(i=0,ien=sort.length;i<ien;i++)colIdx=sort[i].src,$(_pluck(settings.aoData,"anCells",colIdx)).addClass(sortClass+(i<2?i+1:3))}settings.aLastSort=sort}function _fnSortData(settings,idx){var customData,column=settings.aoColumns[idx],customSort=DataTable.ext.order[column.sSortDataType];customSort&&(customData=customSort.call(settings.oInstance,settings,idx,_fnColumnIndexToVisible(settings,idx)))
;for(var row,cellData,formatter=DataTable.ext.type.order[column.sType+"-pre"],i=0,ien=settings.aoData.length;i<ien;i++)row=settings.aoData[i],row._aSortData||(row._aSortData=[]),row._aSortData[idx]&&!customSort||(cellData=customSort?customData[i]:_fnGetCellData(settings,i,idx,"sort"),row._aSortData[idx]=formatter?formatter(cellData):cellData)}function _fnSaveState(settings){if(settings.oFeatures.bStateSave&&!settings.bDestroying){var state={time:+new Date,start:settings._iDisplayStart,length:settings._iDisplayLength,order:$.extend(!0,[],settings.aaSorting),search:_fnSearchToCamel(settings.oPreviousSearch),columns:$.map(settings.aoColumns,function(col,i){
return{visible:col.bVisible,search:_fnSearchToCamel(settings.aoPreSearchCols[i])}})};_fnCallbackFire(settings,"aoStateSaveParams","stateSaveParams",[settings,state]),settings.oSavedState=state,settings.fnStateSaveCallback.call(settings.oInstance,settings,state)}}function _fnLoadState(settings,oInit,callback){var i,ien,columns=settings.aoColumns,loaded=function(s){if(!s||!s.time)return void callback();var abStateLoad=_fnCallbackFire(settings,"aoStateLoadParams","stateLoadParams",[settings,s]);if(-1!==$.inArray(!1,abStateLoad))return void callback();var duration=settings.iStateDuration;if(duration>0&&s.time<+new Date-1e3*duration)return void callback()
;if(s.columns&&columns.length!==s.columns.length)return void callback();if(settings.oLoadedState=$.extend(!0,{},s),s.start!==undefined&&(settings._iDisplayStart=s.start,settings.iInitDisplayStart=s.start),s.length!==undefined&&(settings._iDisplayLength=s.length),s.order!==undefined&&(settings.aaSorting=[],$.each(s.order,function(i,col){settings.aaSorting.push(col[0]>=columns.length?[0,col[1]]:col)})),s.search!==undefined&&$.extend(settings.oPreviousSearch,_fnSearchToHung(s.search)),s.columns)for(i=0,ien=s.columns.length;i<ien;i++){var col=s.columns[i];col.visible!==undefined&&(columns[i].bVisible=col.visible),
col.search!==undefined&&$.extend(settings.aoPreSearchCols[i],_fnSearchToHung(col.search))}_fnCallbackFire(settings,"aoStateLoaded","stateLoaded",[settings,s]),callback()};if(!settings.oFeatures.bStateSave)return void callback();var state=settings.fnStateLoadCallback.call(settings.oInstance,settings,loaded);state!==undefined&&loaded(state)}function _fnSettingsFromNode(table){var settings=DataTable.settings,idx=$.inArray(table,_pluck(settings,"nTable"));return-1!==idx?settings[idx]:null}function _fnLog(settings,level,msg,tn){if(msg="DataTables warning: "+(settings?"table id="+settings.sTableId+" - ":"")+msg,
tn&&(msg+=". For more information about this error, please see http://datatables.net/tn/"+tn),level)window.console&&console.log&&console.log(msg);else{var ext=DataTable.ext,type=ext.sErrMode||ext.errMode;if(settings&&_fnCallbackFire(settings,null,"error",[settings,tn,msg]),"alert"==type)alert(msg);else{if("throw"==type)throw new Error(msg);"function"==typeof type&&type(settings,tn,msg)}}}function _fnMap(ret,src,name,mappedName){if($.isArray(name))return void $.each(name,function(i,val){$.isArray(val)?_fnMap(ret,src,val[0],val[1]):_fnMap(ret,src,val)});mappedName===undefined&&(mappedName=name),src[name]!==undefined&&(ret[mappedName]=src[name])}
function _fnExtend(out,extender,breakRefs){var val;for(var prop in extender)extender.hasOwnProperty(prop)&&(val=extender[prop],$.isPlainObject(val)?($.isPlainObject(out[prop])||(out[prop]={}),$.extend(!0,out[prop],val)):breakRefs&&"data"!==prop&&"aaData"!==prop&&$.isArray(val)?out[prop]=val.slice():out[prop]=val);return out}function _fnBindAction(n,oData,fn){$(n).on("click.DT",oData,function(e){$(n).blur(),fn(e)}).on("keypress.DT",oData,function(e){13===e.which&&(e.preventDefault(),fn(e))}).on("selectstart.DT",function(){return!1})}function _fnCallbackReg(oSettings,sStore,fn,sName){fn&&oSettings[sStore].push({fn:fn,sName:sName})}
function _fnCallbackFire(settings,callbackArr,eventName,args){var ret=[];if(callbackArr&&(ret=$.map(settings[callbackArr].slice().reverse(),function(val,i){return val.fn.apply(settings.oInstance,args)})),null!==eventName){var e=$.Event(eventName+".dt");$(settings.nTable).trigger(e,args),ret.push(e.result)}return ret}function _fnLengthOverflow(settings){var start=settings._iDisplayStart,end=settings.fnDisplayEnd(),len=settings._iDisplayLength;start>=end&&(start=end-len),start-=start%len,(-1===len||start<0)&&(start=0),settings._iDisplayStart=start}function _fnRenderer(settings,type){var renderer=settings.renderer,host=DataTable.ext.renderer[type]
;return $.isPlainObject(renderer)&&renderer[type]?host[renderer[type]]||host._:"string"==typeof renderer?host[renderer]||host._:host._}function _fnDataSource(settings){return settings.oFeatures.bServerSide?"ssp":settings.ajax||settings.sAjaxSource?"ajax":"dom"}function _numbers(page,pages){var numbers=[],buttons=extPagination.numbers_length,half=Math.floor(buttons/2);return pages<=buttons?numbers=_range(0,pages):page<=half?(numbers=_range(0,buttons-2),numbers.push("ellipsis"),numbers.push(pages-1)):page>=pages-1-half?(numbers=_range(pages-(buttons-2),pages),numbers.splice(0,0,"ellipsis"),numbers.splice(0,0,0)):(numbers=_range(page-half+2,page+half-1),
numbers.push("ellipsis"),numbers.push(pages-1),numbers.splice(0,0,"ellipsis"),numbers.splice(0,0,0)),numbers.DT_el="span",numbers}function _addNumericSort(decimalPlace){$.each({num:function(d){return __numericReplace(d,decimalPlace)},"num-fmt":function(d){return __numericReplace(d,decimalPlace,_re_formatted_numeric)},"html-num":function(d){return __numericReplace(d,decimalPlace,_re_html)},"html-num-fmt":function(d){return __numericReplace(d,decimalPlace,_re_html,_re_formatted_numeric)}},function(key,fn){_ext.type.order[key+decimalPlace+"-pre"]=fn,key.match(/^html\-/)&&(_ext.type.search[key+decimalPlace]=_ext.type.search.html)})}function _fnExternApiFunc(fn){
return function(){var args=[_fnSettingsFromNode(this[DataTable.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return DataTable.ext.internal[fn].apply(this,args)}}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})}function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(document).find(selector)
;return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){e&&3===e.which||($(backdrop).remove(),$(toggle).each(function(){var $this=$(this),$parent=getParent($this),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target)||($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||($this.attr("aria-expanded","false"),$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget)))))}))}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown")
;data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})}function cellRange(dt,idx,last){var indexes,columnIndexes,rowIndexes,selectColumns=function(start,end){if(start>end){var tmp=end;end=start,start=tmp}var record=!1;return dt.columns(":visible").indexes().filter(function(i){return i===start&&(record=!0),i===end?(record=!1,!0):record})},selectRows=function(start,end){var indexes=dt.rows({search:"applied"}).indexes();if(indexes.indexOf(start)>indexes.indexOf(end)){var tmp=end;end=start,start=tmp}var record=!1;return indexes.filter(function(i){return i===start&&(record=!0),i===end?(record=!1,!0):record})}
;dt.cells({selected:!0}).any()||last?(columnIndexes=selectColumns(last.column,idx.column),rowIndexes=selectRows(last.row,idx.row)):(columnIndexes=selectColumns(0,idx.column),rowIndexes=selectRows(0,idx.row)),indexes=dt.cells(rowIndexes,columnIndexes).flatten(),dt.cells(idx,{selected:!0}).any()?dt.cells(indexes).deselect():dt.cells(indexes).select()}function disableMouseSelection(dt){var ctx=dt.settings()[0],selector=ctx._select.selector;$(dt.table().container()).off("mousedown.dtSelect",selector).off("mouseup.dtSelect",selector).off("click.dtSelect",selector),$("body").off("click.dtSelect"+dt.table().node().id)}function enableMouseSelection(dt){
var matchSelection,container=$(dt.table().container()),ctx=dt.settings()[0],selector=ctx._select.selector;container.on("mousedown.dtSelect",selector,function(e){(e.shiftKey||e.metaKey||e.ctrlKey)&&container.css("-moz-user-select","none").one("selectstart.dtSelect",selector,function(){return!1}),window.getSelection&&(matchSelection=window.getSelection())}).on("mouseup.dtSelect",selector,function(){container.css("-moz-user-select","")}).on("click.dtSelect",selector,function(e){var idx,items=dt.select.items();if(window.getSelection){var selection=window.getSelection()
;if((!selection.anchorNode||$(selection.anchorNode).closest("table")[0]===dt.table().node())&&selection!==matchSelection)return}var ctx=dt.settings()[0],wrapperClass=dt.settings()[0].oClasses.sWrapper.replace(/ /g,".");if($(e.target).closest("div."+wrapperClass)[0]==dt.table().container()){var cell=dt.cell($(e.target).closest("td, th"));if(cell.any()){var event=$.Event("user-select.dt");if(eventTrigger(dt,event,[items,cell,e]),!event.isDefaultPrevented()){var cellIndex=cell.index();"row"===items?(idx=cellIndex.row,typeSelect(e,dt,ctx,"row",idx)):"column"===items?(idx=cell.index().column,typeSelect(e,dt,ctx,"column",idx)):"cell"===items&&(idx=cell.index(),
typeSelect(e,dt,ctx,"cell",idx)),ctx._select_lastCell=cellIndex}}}}),$("body").on("click.dtSelect"+dt.table().node().id,function(e){if(ctx._select.blurable){if($(e.target).parents().filter(dt.table().container()).length)return;if(0===$(e.target).parents("html").length)return;if($(e.target).parents("div.DTE").length)return;clear(ctx,!0)}})}function eventTrigger(api,type,args,any){any&&!api.flatten().length||("string"==typeof type&&(type+=".dt"),args.unshift(api),$(api.table().node()).trigger(type,args))}function info(api){var ctx=api.settings()[0];if(ctx._select.info&&ctx.aanFeatures.i&&"api"!==api.select.style()){var rows=api.rows({selected:!0
}).flatten().length,columns=api.columns({selected:!0}).flatten().length,cells=api.cells({selected:!0}).flatten().length,add=function(el,name,num){el.append($('<span class="select-item"/>').append(api.i18n("select."+name+"s",{_:"%d "+name+"s selected",0:"",1:"1 "+name+" selected"},num)))};$.each(ctx.aanFeatures.i,function(i,el){el=$(el);var output=$('<span class="select-info"/>');add(output,"row",rows),add(output,"column",columns),add(output,"cell",cells);var exisiting=el.children("span.select-info");exisiting.length&&exisiting.remove(),""!==output.text()&&el.append(output)})}}function init(ctx){var api=new DataTable.Api(ctx);ctx.aoRowCreatedCallback.push({
fn:function(row,data,index){var i,ien,d=ctx.aoData[index];for(d._select_selected&&$(row).addClass(ctx._select.className),i=0,ien=ctx.aoColumns.length;i<ien;i++)(ctx.aoColumns[i]._select_selected||d._selected_cells&&d._selected_cells[i])&&$(d.anCells[i]).addClass(ctx._select.className)},sName:"select-deferRender"}),api.on("preXhr.dt.dtSelect",function(){var rows=api.rows({selected:!0}).ids(!0).filter(function(d){return d!==undefined}),cells=api.cells({selected:!0}).eq(0).map(function(cellIdx){var id=api.row(cellIdx.row).id(!0);return id?{row:id,column:cellIdx.column}:undefined}).filter(function(d){return d!==undefined});api.one("draw.dt.dtSelect",function(){
api.rows(rows).select(),cells.any()&&cells.each(function(id){api.cells(id.row,id.column).select()})})}),api.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){info(api)}),api.on("destroy.dtSelect",function(){disableMouseSelection(api),api.off(".dtSelect")})}function rowColumnRange(dt,type,idx,last){var indexes=dt[type+"s"]({search:"applied"}).indexes(),idx1=$.inArray(last,indexes),idx2=$.inArray(idx,indexes);if(dt[type+"s"]({selected:!0}).any()||-1!==idx1){if(idx1>idx2){var tmp=idx2;idx2=idx1,idx1=tmp}indexes.splice(idx2+1,indexes.length),indexes.splice(0,idx1)}else indexes.splice($.inArray(idx,indexes)+1,indexes.length)
;dt[type](idx,{selected:!0}).any()?(indexes.splice($.inArray(idx,indexes),1),dt[type+"s"](indexes).deselect()):dt[type+"s"](indexes).select()}function clear(ctx,force){if(force||"single"===ctx._select.style){var api=new DataTable.Api(ctx);api.rows({selected:!0}).deselect(),api.columns({selected:!0}).deselect(),api.cells({selected:!0}).deselect()}}function typeSelect(e,dt,ctx,type,idx){var style=dt.select.style(),isSelected=dt[type](idx,{selected:!0}).any()
;if("os"===style)if(e.ctrlKey||e.metaKey)dt[type](idx).select(!isSelected);else if(e.shiftKey)"cell"===type?cellRange(dt,idx,ctx._select_lastCell||null):rowColumnRange(dt,type,idx,ctx._select_lastCell?ctx._select_lastCell[type]:null);else{var selected=dt[type+"s"]({selected:!0});isSelected&&1===selected.flatten().length?dt[type](idx).deselect():(selected.deselect(),dt[type](idx).select())}else"multi+shift"==style&&e.shiftKey?"cell"===type?cellRange(dt,idx,ctx._select_lastCell||null):rowColumnRange(dt,type,idx,ctx._select_lastCell?ctx._select_lastCell[type]:null):dt[type](idx).select(!isSelected)}function i18n(label,def){return function(dt){
return dt.i18n("buttons."+label,def)}}function namespacedEvents(config){var unique=config._eventNamespace;return"draw.dt.DT"+unique+" select.dt.DT"+unique+" deselect.dt.DT"+unique}function enabled(dt,config){return!(-1===$.inArray("rows",config.limitTo)||!dt.rows({selected:!0}).any())||(!(-1===$.inArray("columns",config.limitTo)||!dt.columns({selected:!0}).any())||!(-1===$.inArray("cells",config.limitTo)||!dt.cells({selected:!0}).any()))}var _ext,_Api,_api_register,_api_registerPlural,DataTable=function(options){this.$=function(sSelector,oOpts){return this.api(!0).$(sSelector,oOpts)},this._=function(sSelector,oOpts){
return this.api(!0).rows(sSelector,oOpts).data()},this.api=function(traditional){return new _Api(traditional?_fnSettingsFromNode(this[_ext.iApiIndex]):this)},this.fnAddData=function(data,redraw){var api=this.api(!0),rows=$.isArray(data)&&($.isArray(data[0])||$.isPlainObject(data[0]))?api.rows.add(data):api.row.add(data);return(redraw===undefined||redraw)&&api.draw(),rows.flatten().toArray()},this.fnAdjustColumnSizing=function(bRedraw){var api=this.api(!0).columns.adjust(),settings=api.settings()[0],scroll=settings.oScroll;bRedraw===undefined||bRedraw?api.draw(!1):""===scroll.sX&&""===scroll.sY||_fnScrollDraw(settings)},this.fnClearTable=function(bRedraw){
var api=this.api(!0).clear();(bRedraw===undefined||bRedraw)&&api.draw()},this.fnClose=function(nTr){this.api(!0).row(nTr).child.hide()},this.fnDeleteRow=function(target,callback,redraw){var api=this.api(!0),rows=api.rows(target),settings=rows.settings()[0],data=settings.aoData[rows[0][0]];return rows.remove(),callback&&callback.call(this,settings,data),(redraw===undefined||redraw)&&api.draw(),data},this.fnDestroy=function(remove){this.api(!0).destroy(remove)},this.fnDraw=function(complete){this.api(!0).draw(complete)},this.fnFilter=function(sInput,iColumn,bRegex,bSmart,bShowGlobal,bCaseInsensitive){var api=this.api(!0)
;null===iColumn||iColumn===undefined?api.search(sInput,bRegex,bSmart,bCaseInsensitive):api.column(iColumn).search(sInput,bRegex,bSmart,bCaseInsensitive),api.draw()},this.fnGetData=function(src,col){var api=this.api(!0);if(src!==undefined){var type=src.nodeName?src.nodeName.toLowerCase():"";return col!==undefined||"td"==type||"th"==type?api.cell(src,col).data():api.row(src).data()||null}return api.data().toArray()},this.fnGetNodes=function(iRow){var api=this.api(!0);return iRow!==undefined?api.row(iRow).node():api.rows().nodes().flatten().toArray()},this.fnGetPosition=function(node){var api=this.api(!0),nodeName=node.nodeName.toUpperCase()
;if("TR"==nodeName)return api.row(node).index();if("TD"==nodeName||"TH"==nodeName){var cell=api.cell(node).index();return[cell.row,cell.columnVisible,cell.column]}return null},this.fnIsOpen=function(nTr){return this.api(!0).row(nTr).child.isShown()},this.fnOpen=function(nTr,mHtml,sClass){return this.api(!0).row(nTr).child(mHtml,sClass).show().child()[0]},this.fnPageChange=function(mAction,bRedraw){var api=this.api(!0).page(mAction);(bRedraw===undefined||bRedraw)&&api.draw(!1)},this.fnSetColumnVis=function(iCol,bShow,bRedraw){var api=this.api(!0).column(iCol).visible(bShow);(bRedraw===undefined||bRedraw)&&api.columns.adjust().draw()},
this.fnSettings=function(){return _fnSettingsFromNode(this[_ext.iApiIndex])},this.fnSort=function(aaSort){this.api(!0).order(aaSort).draw()},this.fnSortListener=function(nNode,iColumn,fnCallback){this.api(!0).order.listener(nNode,iColumn,fnCallback)},this.fnUpdate=function(mData,mRow,iColumn,bRedraw,bAction){var api=this.api(!0);return iColumn===undefined||null===iColumn?api.row(mRow).data(mData):api.cell(mRow,iColumn).data(mData),(bAction===undefined||bAction)&&api.columns.adjust(),(bRedraw===undefined||bRedraw)&&api.draw(),0},this.fnVersionCheck=_ext.fnVersionCheck;var _that=this,emptyInit=options===undefined,len=this.length;emptyInit&&(options={}),
this.oApi=this.internal=_ext.internal;for(var fn in DataTable.ext.internal)fn&&(this[fn]=_fnExternApiFunc(fn));return this.each(function(){var iLen,o={},oInit=len>1?_fnExtend(o,options,!0):options,i=0,sId=this.getAttribute("id"),bInitHandedOff=!1,defaults=DataTable.defaults,$this=$(this);if("table"!=this.nodeName.toLowerCase())return void _fnLog(null,0,"Non-table node initialisation ("+this.nodeName+")",2);_fnCompatOpts(defaults),_fnCompatCols(defaults.column),_fnCamelToHungarian(defaults,defaults,!0),_fnCamelToHungarian(defaults.column,defaults.column,!0),_fnCamelToHungarian(defaults,$.extend(oInit,$this.data()));var allSettings=DataTable.settings;for(i=0,
iLen=allSettings.length;i<iLen;i++){var s=allSettings[i];if(s.nTable==this||s.nTHead&&s.nTHead.parentNode==this||s.nTFoot&&s.nTFoot.parentNode==this){var bRetrieve=oInit.bRetrieve!==undefined?oInit.bRetrieve:defaults.bRetrieve,bDestroy=oInit.bDestroy!==undefined?oInit.bDestroy:defaults.bDestroy;if(emptyInit||bRetrieve)return s.oInstance;if(bDestroy){s.oInstance.fnDestroy();break}return void _fnLog(s,0,"Cannot reinitialise DataTable",3)}if(s.sTableId==this.id){allSettings.splice(i,1);break}}null!==sId&&""!==sId||(sId="DataTables_Table_"+DataTable.ext._unique++,this.id=sId);var oSettings=$.extend(!0,{},DataTable.models.oSettings,{
sDestroyWidth:$this[0].style.width,sInstance:sId,sTableId:sId});oSettings.nTable=this,oSettings.oApi=_that.internal,oSettings.oInit=oInit,allSettings.push(oSettings),oSettings.oInstance=1===_that.length?_that:$this.dataTable(),_fnCompatOpts(oInit),_fnLanguageCompat(oInit.oLanguage),oInit.aLengthMenu&&!oInit.iDisplayLength&&(oInit.iDisplayLength=$.isArray(oInit.aLengthMenu[0])?oInit.aLengthMenu[0][0]:oInit.aLengthMenu[0]),oInit=_fnExtend($.extend(!0,{},defaults),oInit),_fnMap(oSettings.oFeatures,oInit,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),
_fnMap(oSettings,oInit,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),_fnMap(oSettings.oScroll,oInit,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),_fnMap(oSettings.oLanguage,oInit,"fnInfoCallback"),
_fnCallbackReg(oSettings,"aoDrawCallback",oInit.fnDrawCallback,"user"),_fnCallbackReg(oSettings,"aoServerParams",oInit.fnServerParams,"user"),_fnCallbackReg(oSettings,"aoStateSaveParams",oInit.fnStateSaveParams,"user"),_fnCallbackReg(oSettings,"aoStateLoadParams",oInit.fnStateLoadParams,"user"),_fnCallbackReg(oSettings,"aoStateLoaded",oInit.fnStateLoaded,"user"),_fnCallbackReg(oSettings,"aoRowCallback",oInit.fnRowCallback,"user"),_fnCallbackReg(oSettings,"aoRowCreatedCallback",oInit.fnCreatedRow,"user"),_fnCallbackReg(oSettings,"aoHeaderCallback",oInit.fnHeaderCallback,"user"),_fnCallbackReg(oSettings,"aoFooterCallback",oInit.fnFooterCallback,"user"),
_fnCallbackReg(oSettings,"aoInitComplete",oInit.fnInitComplete,"user"),_fnCallbackReg(oSettings,"aoPreDrawCallback",oInit.fnPreDrawCallback,"user"),oSettings.rowIdFn=_fnGetObjectDataFn(oInit.rowId),_fnBrowserDetect(oSettings);var oClasses=oSettings.oClasses;if($.extend(oClasses,DataTable.ext.classes,oInit.oClasses),$this.addClass(oClasses.sTable),oSettings.iInitDisplayStart===undefined&&(oSettings.iInitDisplayStart=oInit.iDisplayStart,oSettings._iDisplayStart=oInit.iDisplayStart),null!==oInit.iDeferLoading){oSettings.bDeferLoading=!0;var tmp=$.isArray(oInit.iDeferLoading);oSettings._iRecordsDisplay=tmp?oInit.iDeferLoading[0]:oInit.iDeferLoading,
oSettings._iRecordsTotal=tmp?oInit.iDeferLoading[1]:oInit.iDeferLoading}var oLanguage=oSettings.oLanguage;$.extend(!0,oLanguage,oInit.oLanguage),oLanguage.sUrl&&($.ajax({dataType:"json",url:oLanguage.sUrl,success:function(json){_fnLanguageCompat(json),_fnCamelToHungarian(defaults.oLanguage,json),$.extend(!0,oLanguage,json),_fnInitialise(oSettings)},error:function(){_fnInitialise(oSettings)}}),bInitHandedOff=!0),null===oInit.asStripeClasses&&(oSettings.asStripeClasses=[oClasses.sStripeOdd,oClasses.sStripeEven]);var stripeClasses=oSettings.asStripeClasses,rowOne=$this.children("tbody").find("tr").eq(0);-1!==$.inArray(!0,$.map(stripeClasses,function(el,i){
return rowOne.hasClass(el)}))&&($("tbody tr",this).removeClass(stripeClasses.join(" ")),oSettings.asDestroyStripes=stripeClasses.slice());var aoColumnsInit,anThs=[],nThead=this.getElementsByTagName("thead");if(0!==nThead.length&&(_fnDetectHeader(oSettings.aoHeader,nThead[0]),anThs=_fnGetUniqueThs(oSettings)),null===oInit.aoColumns)for(aoColumnsInit=[],i=0,iLen=anThs.length;i<iLen;i++)aoColumnsInit.push(null);else aoColumnsInit=oInit.aoColumns;for(i=0,iLen=aoColumnsInit.length;i<iLen;i++)_fnAddColumn(oSettings,anThs?anThs[i]:null);if(_fnApplyColumnDefs(oSettings,oInit.aoColumnDefs,aoColumnsInit,function(iCol,oDef){_fnColumnOptions(oSettings,iCol,oDef)}),
rowOne.length){var a=function(cell,name){return null!==cell.getAttribute("data-"+name)?name:null};$(rowOne[0]).children("th, td").each(function(i,cell){var col=oSettings.aoColumns[i];if(col.mData===i){var sort=a(cell,"sort")||a(cell,"order"),filter=a(cell,"filter")||a(cell,"search");null===sort&&null===filter||(col.mData={_:i+".display",sort:null!==sort?i+".@data-"+sort:undefined,type:null!==sort?i+".@data-"+sort:undefined,filter:null!==filter?i+".@data-"+filter:undefined},_fnColumnOptions(oSettings,i))}})}var features=oSettings.oFeatures,loadedInit=function(){if(oInit.aaSorting===undefined){var sorting=oSettings.aaSorting;for(i=0,
iLen=sorting.length;i<iLen;i++)sorting[i][1]=oSettings.aoColumns[i].asSorting[0]}_fnSortingClasses(oSettings),features.bSort&&_fnCallbackReg(oSettings,"aoDrawCallback",function(){if(oSettings.bSorted){var aSort=_fnSortFlatten(oSettings),sortedColumns={};$.each(aSort,function(i,val){sortedColumns[val.src]=val.dir}),_fnCallbackFire(oSettings,null,"order",[oSettings,aSort,sortedColumns]),_fnSortAria(oSettings)}}),_fnCallbackReg(oSettings,"aoDrawCallback",function(){(oSettings.bSorted||"ssp"===_fnDataSource(oSettings)||features.bDeferRender)&&_fnSortingClasses(oSettings)},"sc");var captions=$this.children("caption").each(function(){
this._captionSide=$(this).css("caption-side")}),thead=$this.children("thead");0===thead.length&&(thead=$("<thead/>").appendTo($this)),oSettings.nTHead=thead[0];var tbody=$this.children("tbody");0===tbody.length&&(tbody=$("<tbody/>").appendTo($this)),oSettings.nTBody=tbody[0];var tfoot=$this.children("tfoot");if(0===tfoot.length&&captions.length>0&&(""!==oSettings.oScroll.sX||""!==oSettings.oScroll.sY)&&(tfoot=$("<tfoot/>").appendTo($this)),0===tfoot.length||0===tfoot.children().length?$this.addClass(oClasses.sNoFooter):tfoot.length>0&&(oSettings.nTFoot=tfoot[0],_fnDetectHeader(oSettings.aoFooter,oSettings.nTFoot)),
oInit.aaData)for(i=0;i<oInit.aaData.length;i++)_fnAddData(oSettings,oInit.aaData[i]);else(oSettings.bDeferLoading||"dom"==_fnDataSource(oSettings))&&_fnAddTr(oSettings,$(oSettings.nTBody).children("tr"));oSettings.aiDisplay=oSettings.aiDisplayMaster.slice(),oSettings.bInitialised=!0,!1===bInitHandedOff&&_fnInitialise(oSettings)};oInit.bStateSave?(features.bStateSave=!0,_fnCallbackReg(oSettings,"aoDrawCallback",_fnSaveState,"state_save"),_fnLoadState(oSettings,oInit,loadedInit)):loadedInit()}),_that=null,this
},_re_dic={},_re_new_lines=/[\r\n]/g,_re_html=/<.*?>/g,_re_date=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,_re_escape_regex=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),_re_formatted_numeric=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfkɃΞ]/gi,_empty=function(d){return!d||!0===d||"-"===d},_intVal=function(s){var integer=parseInt(s,10);return!isNaN(integer)&&isFinite(s)?integer:null},_numToDecimal=function(num,decimalPoint){return _re_dic[decimalPoint]||(_re_dic[decimalPoint]=new RegExp(_fnEscapeRegex(decimalPoint),"g")),
"string"==typeof num&&"."!==decimalPoint?num.replace(/\./g,"").replace(_re_dic[decimalPoint],"."):num},_isNumber=function(d,decimalPoint,formatted){var strType="string"==typeof d;return!!_empty(d)||(decimalPoint&&strType&&(d=_numToDecimal(d,decimalPoint)),formatted&&strType&&(d=d.replace(_re_formatted_numeric,"")),!isNaN(parseFloat(d))&&isFinite(d))},_isHtml=function(d){return _empty(d)||"string"==typeof d},_htmlNumeric=function(d,decimalPoint,formatted){return!!_empty(d)||(_isHtml(d)?!!_isNumber(_stripHtml(d),decimalPoint,formatted)||null:null)},_pluck=function(a,prop,prop2){var out=[],i=0,ien=a.length
;if(prop2!==undefined)for(;i<ien;i++)a[i]&&a[i][prop]&&out.push(a[i][prop][prop2]);else for(;i<ien;i++)a[i]&&out.push(a[i][prop]);return out},_pluck_order=function(a,order,prop,prop2){var out=[],i=0,ien=order.length;if(prop2!==undefined)for(;i<ien;i++)a[order[i]][prop]&&out.push(a[order[i]][prop][prop2]);else for(;i<ien;i++)out.push(a[order[i]][prop]);return out},_range=function(len,start){var end,out=[];start===undefined?(start=0,end=len):(end=start,start=len);for(var i=start;i<end;i++)out.push(i);return out},_removeEmpty=function(a){for(var out=[],i=0,ien=a.length;i<ien;i++)a[i]&&out.push(a[i]);return out},_stripHtml=function(d){
return d.replace(_re_html,"")},_areAllUnique=function(src){if(src.length<2)return!0;for(var sorted=src.slice().sort(),last=sorted[0],i=1,ien=sorted.length;i<ien;i++){if(sorted[i]===last)return!1;last=sorted[i]}return!0},_unique=function(src){if(_areAllUnique(src))return src.slice();var val,i,j,out=[],ien=src.length,k=0;again:for(i=0;i<ien;i++){for(val=src[i],j=0;j<k;j++)if(out[j]===val)continue again;out.push(val),k++}return out};DataTable.util={throttle:function(fn,freq){var last,timer,frequency=freq!==undefined?freq:200;return function(){var that=this,now=+new Date,args=arguments;last&&now<last+frequency?(clearTimeout(timer),timer=setTimeout(function(){
last=undefined,fn.apply(that,args)},frequency)):(last=now,fn.apply(that,args))}},escapeRegex:function(val){return val.replace(_re_escape_regex,"\\$1")}};var _fnCompatMap=function(o,knew,old){o[knew]!==undefined&&(o[old]=o[knew])},__reArray=/\[.*?\]$/,__reFn=/\(\)$/,_fnEscapeRegex=DataTable.util.escapeRegex,__filter_div=$("<div>")[0],__filter_div_textContent=__filter_div.textContent!==undefined,__re_html_remove=/<.*?>/g,_fnThrottle=DataTable.util.throttle,__apiStruct=[],__arrayProto=Array.prototype,_toSettings=function(mixed){var idx,jq,settings=DataTable.settings,tables=$.map(settings,function(el,i){return el.nTable})
;return mixed?mixed.nTable&&mixed.oApi?[mixed]:mixed.nodeName&&"table"===mixed.nodeName.toLowerCase()?(idx=$.inArray(mixed,tables),-1!==idx?[settings[idx]]:null):mixed&&"function"==typeof mixed.settings?mixed.settings().toArray():("string"==typeof mixed?jq=$(mixed):mixed instanceof $&&(jq=mixed),jq?jq.map(function(i){return idx=$.inArray(this,tables),-1!==idx?settings[idx]:null}).toArray():void 0):[]};_Api=function(context,data){if(!(this instanceof _Api))return new _Api(context,data);var settings=[],ctxSettings=function(o){var a=_toSettings(o);a&&(settings=settings.concat(a))}
;if($.isArray(context))for(var i=0,ien=context.length;i<ien;i++)ctxSettings(context[i]);else ctxSettings(context);this.context=_unique(settings),data&&$.merge(this,data),this.selector={rows:null,cols:null,opts:null},_Api.extend(this,this,__apiStruct)},DataTable.Api=_Api,$.extend(_Api.prototype,{any:function(){return 0!==this.count()},concat:__arrayProto.concat,context:[],count:function(){return this.flatten().length},each:function(fn){for(var i=0,ien=this.length;i<ien;i++)fn.call(this,this[i],i,this);return this},eq:function(idx){var ctx=this.context;return ctx.length>idx?new _Api(ctx[idx],this[idx]):null},filter:function(fn){var a=[]
;if(__arrayProto.filter)a=__arrayProto.filter.call(this,fn,this);else for(var i=0,ien=this.length;i<ien;i++)fn.call(this,this[i],i,this)&&a.push(this[i]);return new _Api(this.context,a)},flatten:function(){var a=[];return new _Api(this.context,a.concat.apply(a,this.toArray()))},join:__arrayProto.join,indexOf:__arrayProto.indexOf||function(obj,start){for(var i=start||0,ien=this.length;i<ien;i++)if(this[i]===obj)return i;return-1},iterator:function(flatten,type,fn,alwaysNew){var ret,i,ien,j,jen,rows,items,item,a=[],context=this.context,selector=this.selector;for("string"==typeof flatten&&(alwaysNew=fn,fn=type,type=flatten,flatten=!1),i=0,
ien=context.length;i<ien;i++){var apiInst=new _Api(context[i]);if("table"===type)(ret=fn.call(apiInst,context[i],i))!==undefined&&a.push(ret);else if("columns"===type||"rows"===type)(ret=fn.call(apiInst,context[i],this[i],i))!==undefined&&a.push(ret);else if("column"===type||"column-rows"===type||"row"===type||"cell"===type)for(items=this[i],"column-rows"===type&&(rows=_selector_row_indexes(context[i],selector.opts)),j=0,jen=items.length;j<jen;j++)item=items[j],(ret="cell"===type?fn.call(apiInst,context[i],item.row,item.column,i,j):fn.call(apiInst,context[i],item,i,j,rows))!==undefined&&a.push(ret)}if(a.length||alwaysNew){
var api=new _Api(context,flatten?a.concat.apply([],a):a),apiSelector=api.selector;return apiSelector.rows=selector.rows,apiSelector.cols=selector.cols,apiSelector.opts=selector.opts,api}return this},lastIndexOf:__arrayProto.lastIndexOf||function(obj,start){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(fn){var a=[];if(__arrayProto.map)a=__arrayProto.map.call(this,fn,this);else for(var i=0,ien=this.length;i<ien;i++)a.push(fn.call(this,this[i],i));return new _Api(this.context,a)},pluck:function(prop){return this.map(function(el){return el[prop]})},pop:__arrayProto.pop,push:__arrayProto.push,
reduce:__arrayProto.reduce||function(fn,init){return _fnReduce(this,fn,init,0,this.length,1)},reduceRight:__arrayProto.reduceRight||function(fn,init){return _fnReduce(this,fn,init,this.length-1,-1,-1)},reverse:__arrayProto.reverse,selector:null,shift:__arrayProto.shift,slice:function(){return new _Api(this.context,this)},sort:__arrayProto.sort,splice:__arrayProto.splice,toArray:function(){return __arrayProto.slice.call(this)},to$:function(){return $(this)},toJQuery:function(){return $(this)},unique:function(){return new _Api(this.context,_unique(this))},unshift:__arrayProto.unshift}),_Api.extend=function(scope,obj,ext){
if(ext.length&&obj&&(obj instanceof _Api||obj.__dt_wrapper)){var i,ien,struct;for(i=0,ien=ext.length;i<ien;i++)struct=ext[i],obj[struct.name]="function"==typeof struct.val?function(scope,fn,struc){return function(){var ret=fn.apply(scope,arguments);return _Api.extend(ret,ret,struc.methodExt),ret}}(scope,struct.val,struct):$.isPlainObject(struct.val)?{}:struct.val,obj[struct.name].__dt_wrapper=!0,_Api.extend(scope,obj[struct.name],struct.propExt)}},_Api.register=_api_register=function(name,val){if($.isArray(name))for(var j=0,jen=name.length;j<jen;j++)_Api.register(name[j],val);else{var i,ien,key,method,heir=name.split("."),struct=__apiStruct;for(i=0,
ien=heir.length;i<ien;i++){method=-1!==heir[i].indexOf("()"),key=method?heir[i].replace("()",""):heir[i];var src=function(src,name){for(var i=0,ien=src.length;i<ien;i++)if(src[i].name===name)return src[i];return null}(struct,key);src||(src={name:key,val:{},methodExt:[],propExt:[]},struct.push(src)),i===ien-1?src.val=val:struct=method?src.methodExt:src.propExt}}},_Api.registerPlural=_api_registerPlural=function(pluralName,singularName,val){_Api.register(pluralName,val),_Api.register(singularName,function(){var ret=val.apply(this,arguments);return ret===this?this:ret instanceof _Api?ret.length?$.isArray(ret[0])?new _Api(ret.context,ret[0]):ret[0]:undefined:ret
})};var __table_selector=function(selector,a){if("number"==typeof selector)return[a[selector]];var nodes=$.map(a,function(el,i){return el.nTable});return $(nodes).filter(selector).map(function(i){var idx=$.inArray(this,nodes);return a[idx]}).toArray()};_api_register("tables()",function(selector){return selector?new _Api(__table_selector(selector,this.context)):this}),_api_register("table()",function(selector){var tables=this.tables(selector),ctx=tables.context;return ctx.length?new _Api(ctx[0]):tables}),_api_registerPlural("tables().nodes()","table().node()",function(){return this.iterator("table",function(ctx){return ctx.nTable},1)}),
_api_registerPlural("tables().body()","table().body()",function(){return this.iterator("table",function(ctx){return ctx.nTBody},1)}),_api_registerPlural("tables().header()","table().header()",function(){return this.iterator("table",function(ctx){return ctx.nTHead},1)}),_api_registerPlural("tables().footer()","table().footer()",function(){return this.iterator("table",function(ctx){return ctx.nTFoot},1)}),_api_registerPlural("tables().containers()","table().container()",function(){return this.iterator("table",function(ctx){return ctx.nTableWrapper},1)}),_api_register("draw()",function(paging){return this.iterator("table",function(settings){
"page"===paging?_fnDraw(settings):("string"==typeof paging&&(paging="full-hold"!==paging),_fnReDraw(settings,!1===paging))})}),_api_register("page()",function(action){return action===undefined?this.page.info().page:this.iterator("table",function(settings){_fnPageChange(settings,action)})}),_api_register("page.info()",function(action){if(0===this.context.length)return undefined;var settings=this.context[0],start=settings._iDisplayStart,len=settings.oFeatures.bPaginate?settings._iDisplayLength:-1,visRecords=settings.fnRecordsDisplay(),all=-1===len;return{page:all?0:Math.floor(start/len),pages:all?1:Math.ceil(visRecords/len),start:start,
end:settings.fnDisplayEnd(),length:len,recordsTotal:settings.fnRecordsTotal(),recordsDisplay:visRecords,serverSide:"ssp"===_fnDataSource(settings)}}),_api_register("page.len()",function(len){return len===undefined?0!==this.context.length?this.context[0]._iDisplayLength:undefined:this.iterator("table",function(settings){_fnLengthChange(settings,len)})});var __reload=function(settings,holdPosition,callback){if(callback){var api=new _Api(settings);api.one("draw",function(){callback(api.ajax.json())})}if("ssp"==_fnDataSource(settings))_fnReDraw(settings,holdPosition);else{_fnProcessingDisplay(settings,!0);var xhr=settings.jqXHR
;xhr&&4!==xhr.readyState&&xhr.abort(),_fnBuildAjax(settings,[],function(json){_fnClearTable(settings);for(var data=_fnAjaxDataSrc(settings,json),i=0,ien=data.length;i<ien;i++)_fnAddData(settings,data[i]);_fnReDraw(settings,holdPosition),_fnProcessingDisplay(settings,!1)})}};_api_register("ajax.json()",function(){var ctx=this.context;if(ctx.length>0)return ctx[0].json}),_api_register("ajax.params()",function(){var ctx=this.context;if(ctx.length>0)return ctx[0].oAjaxData}),_api_register("ajax.reload()",function(callback,resetPaging){return this.iterator("table",function(settings){__reload(settings,!1===resetPaging,callback)})}),
_api_register("ajax.url()",function(url){var ctx=this.context;return url===undefined?0===ctx.length?undefined:(ctx=ctx[0],ctx.ajax?$.isPlainObject(ctx.ajax)?ctx.ajax.url:ctx.ajax:ctx.sAjaxSource):this.iterator("table",function(settings){$.isPlainObject(settings.ajax)?settings.ajax.url=url:settings.ajax=url})}),_api_register("ajax.url().load()",function(callback,resetPaging){return this.iterator("table",function(ctx){__reload(ctx,!1===resetPaging,callback)})});var _selector_run=function(type,selector,selectFn,settings,opts){var res,a,i,ien,j,jen,out=[],selectorType=typeof selector
;for(selector&&"string"!==selectorType&&"function"!==selectorType&&selector.length!==undefined||(selector=[selector]),i=0,ien=selector.length;i<ien;i++)for(a=selector[i]&&selector[i].split&&!selector[i].match(/[\[\(:]/)?selector[i].split(","):[selector[i]],j=0,jen=a.length;j<jen;j++)(res=selectFn("string"==typeof a[j]?$.trim(a[j]):a[j]))&&res.length&&(out=out.concat(res));var ext=_ext.selector[type];if(ext.length)for(i=0,ien=ext.length;i<ien;i++)out=ext[i](settings,opts,out);return _unique(out)},_selector_opts=function(opts){return opts||(opts={}),opts.filter&&opts.search===undefined&&(opts.search=opts.filter),$.extend({search:"none",order:"current",
page:"all"},opts)},_selector_first=function(inst){for(var i=0,ien=inst.length;i<ien;i++)if(inst[i].length>0)return inst[0]=inst[i],inst[0].length=1,inst.length=1,inst.context=[inst.context[i]],inst;return inst.length=0,inst},_selector_row_indexes=function(settings,opts){var i,ien,tmp,a=[],displayFiltered=settings.aiDisplay,displayMaster=settings.aiDisplayMaster,search=opts.search,order=opts.order,page=opts.page;if("ssp"==_fnDataSource(settings))return"removed"===search?[]:_range(0,displayMaster.length);if("current"==page)for(i=settings._iDisplayStart,ien=settings.fnDisplayEnd();i<ien;i++)a.push(displayFiltered[i]);else if("current"==order||"applied"==order){
if("none"==search)a=displayMaster.slice();else if("applied"==search)a=displayFiltered.slice();else if("removed"==search){for(var displayFilteredMap={},i=0,ien=displayFiltered.length;i<ien;i++)displayFilteredMap[displayFiltered[i]]=null;a=$.map(displayMaster,function(el){return displayFilteredMap.hasOwnProperty(el)?null:el})}}else if("index"==order||"original"==order)for(i=0,ien=settings.aoData.length;i<ien;i++)"none"==search?a.push(i):(-1===(tmp=$.inArray(i,displayFiltered))&&"removed"==search||tmp>=0&&"applied"==search)&&a.push(i);return a},__row_selector=function(settings,selector,opts){var rows;return _selector_run("row",selector,function(sel){
var selInt=_intVal(sel),aoData=settings.aoData;if(null!==selInt&&!opts)return[selInt];if(rows||(rows=_selector_row_indexes(settings,opts)),null!==selInt&&-1!==$.inArray(selInt,rows))return[selInt];if(null===sel||sel===undefined||""===sel)return rows;if("function"==typeof sel)return $.map(rows,function(idx){var row=aoData[idx];return sel(idx,row._aData,row.nTr)?idx:null});if(sel.nodeName){var rowIdx=sel._DT_RowIndex,cellIdx=sel._DT_CellIndex;if(rowIdx!==undefined)return aoData[rowIdx]&&aoData[rowIdx].nTr===sel?[rowIdx]:[];if(cellIdx)return aoData[cellIdx.row]&&aoData[cellIdx.row].nTr===sel?[cellIdx.row]:[];var host=$(sel).closest("*[data-dt-row]")
;return host.length?[host.data("dt-row")]:[]}if("string"==typeof sel&&"#"===sel.charAt(0)){var rowObj=settings.aIds[sel.replace(/^#/,"")];if(rowObj!==undefined)return[rowObj.idx]}var nodes=_removeEmpty(_pluck_order(settings.aoData,rows,"nTr"));return $(nodes).filter(sel).map(function(){return this._DT_RowIndex}).toArray()},settings,opts)};_api_register("rows()",function(selector,opts){selector===undefined?selector="":$.isPlainObject(selector)&&(opts=selector,selector=""),opts=_selector_opts(opts);var inst=this.iterator("table",function(settings){return __row_selector(settings,selector,opts)},1);return inst.selector.rows=selector,inst.selector.opts=opts,inst
}),_api_register("rows().nodes()",function(){return this.iterator("row",function(settings,row){return settings.aoData[row].nTr||undefined},1)}),_api_register("rows().data()",function(){return this.iterator(!0,"rows",function(settings,rows){return _pluck_order(settings.aoData,rows,"_aData")},1)}),_api_registerPlural("rows().cache()","row().cache()",function(type){return this.iterator("row",function(settings,row){var r=settings.aoData[row];return"search"===type?r._aFilterData:r._aSortData},1)}),_api_registerPlural("rows().invalidate()","row().invalidate()",function(src){return this.iterator("row",function(settings,row){_fnInvalidate(settings,row,src)})}),
_api_registerPlural("rows().indexes()","row().index()",function(){return this.iterator("row",function(settings,row){return row},1)}),_api_registerPlural("rows().ids()","row().id()",function(hash){for(var a=[],context=this.context,i=0,ien=context.length;i<ien;i++)for(var j=0,jen=this[i].length;j<jen;j++){var id=context[i].rowIdFn(context[i].aoData[this[i][j]]._aData);a.push((!0===hash?"#":"")+id)}return new _Api(context,a)}),_api_registerPlural("rows().remove()","row().remove()",function(){var that=this;return this.iterator("row",function(settings,row,thatIdx){var i,ien,j,jen,loopRow,loopCells,data=settings.aoData,rowData=data[row];for(data.splice(row,1),i=0,
ien=data.length;i<ien;i++)if(loopRow=data[i],loopCells=loopRow.anCells,null!==loopRow.nTr&&(loopRow.nTr._DT_RowIndex=i),null!==loopCells)for(j=0,jen=loopCells.length;j<jen;j++)loopCells[j]._DT_CellIndex.row=i;_fnDeleteIndex(settings.aiDisplayMaster,row),_fnDeleteIndex(settings.aiDisplay,row),_fnDeleteIndex(that[thatIdx],row,!1),settings._iRecordsDisplay>0&&settings._iRecordsDisplay--,_fnLengthOverflow(settings);var id=settings.rowIdFn(rowData._aData);id!==undefined&&delete settings.aIds[id]}),this.iterator("table",function(settings){for(var i=0,ien=settings.aoData.length;i<ien;i++)settings.aoData[i].idx=i}),this}),_api_register("rows.add()",function(rows){
var newRows=this.iterator("table",function(settings){var row,i,ien,out=[];for(i=0,ien=rows.length;i<ien;i++)row=rows[i],row.nodeName&&"TR"===row.nodeName.toUpperCase()?out.push(_fnAddTr(settings,row)[0]):out.push(_fnAddData(settings,row));return out},1),modRows=this.rows(-1);return modRows.pop(),$.merge(modRows,newRows),modRows}),_api_register("row()",function(selector,opts){return _selector_first(this.rows(selector,opts))}),_api_register("row().data()",function(data){var ctx=this.context;if(data===undefined)return ctx.length&&this.length?ctx[0].aoData[this[0]]._aData:undefined;var row=ctx[0].aoData[this[0]];return row._aData=data,
$.isArray(data)&&row.nTr.id&&_fnSetObjectDataFn(ctx[0].rowId)(data,row.nTr.id),_fnInvalidate(ctx[0],this[0],"data"),this}),_api_register("row().node()",function(){var ctx=this.context;return ctx.length&&this.length?ctx[0].aoData[this[0]].nTr||null:null}),_api_register("row.add()",function(row){row instanceof $&&row.length&&(row=row[0]);var rows=this.iterator("table",function(settings){return row.nodeName&&"TR"===row.nodeName.toUpperCase()?_fnAddTr(settings,row)[0]:_fnAddData(settings,row)});return this.row(rows[0])});var __details_add=function(ctx,row,data,klass){var rows=[],addRow=function(r,k){
if($.isArray(r)||r instanceof $)for(var i=0,ien=r.length;i<ien;i++)addRow(r[i],k);else if(r.nodeName&&"tr"===r.nodeName.toLowerCase())rows.push(r);else{var created=$("<tr><td/></tr>").addClass(k);$("td",created).addClass(k).html(r)[0].colSpan=_fnVisbleColumns(ctx),rows.push(created[0])}};addRow(data,klass),row._details&&row._details.detach(),row._details=$(rows),row._detailsShow&&row._details.insertAfter(row.nTr)},__details_remove=function(api,idx){var ctx=api.context;if(ctx.length){var row=ctx[0].aoData[idx!==undefined?idx:api[0]];row&&row._details&&(row._details.remove(),row._detailsShow=undefined,row._details=undefined)}
},__details_display=function(api,show){var ctx=api.context;if(ctx.length&&api.length){var row=ctx[0].aoData[api[0]];row._details&&(row._detailsShow=show,show?row._details.insertAfter(row.nTr):row._details.detach(),__details_events(ctx[0]))}},__details_events=function(settings){var api=new _Api(settings),data=settings.aoData;api.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),_pluck(data,"_details").length>0&&(api.on("draw.dt.DT_details",function(e,ctx){settings===ctx&&api.rows({page:"current"}).eq(0).each(function(idx){var row=data[idx];row._detailsShow&&row._details.insertAfter(row.nTr)})}),
api.on("column-visibility.dt.DT_details",function(e,ctx,idx,vis){if(settings===ctx)for(var row,visible=_fnVisbleColumns(ctx),i=0,ien=data.length;i<ien;i++)row=data[i],row._details&&row._details.children("td[colspan]").attr("colspan",visible)}),api.on("destroy.dt.DT_details",function(e,ctx){if(settings===ctx)for(var i=0,ien=data.length;i<ien;i++)data[i]._details&&__details_remove(api,i)}))};_api_register("row().child()",function(data,klass){var ctx=this.context
;return data===undefined?ctx.length&&this.length?ctx[0].aoData[this[0]]._details:undefined:(!0===data?this.child.show():!1===data?__details_remove(this):ctx.length&&this.length&&__details_add(ctx[0],ctx[0].aoData[this[0]],data,klass),this)}),_api_register(["row().child.show()","row().child().show()"],function(show){return __details_display(this,!0),this}),_api_register(["row().child.hide()","row().child().hide()"],function(){return __details_display(this,!1),this}),_api_register(["row().child.remove()","row().child().remove()"],function(){return __details_remove(this),this}),_api_register("row().child.isShown()",function(){var ctx=this.context
;return!(!ctx.length||!this.length)&&(ctx[0].aoData[this[0]]._detailsShow||!1)});var __re_column_selector=/^([^:]+):(name|visIdx|visible)$/,__columnData=function(settings,column,r1,r2,rows){for(var a=[],row=0,ien=rows.length;row<ien;row++)a.push(_fnGetCellData(settings,rows[row],column));return a},__column_selector=function(settings,selector,opts){var columns=settings.aoColumns,names=_pluck(columns,"sName"),nodes=_pluck(columns,"nTh");return _selector_run("column",selector,function(s){var selInt=_intVal(s);if(""===s)return _range(columns.length);if(null!==selInt)return[selInt>=0?selInt:columns.length+selInt];if("function"==typeof s){
var rows=_selector_row_indexes(settings,opts);return $.map(columns,function(col,idx){return s(idx,__columnData(settings,idx,0,0,rows),nodes[idx])?idx:null})}var match="string"==typeof s?s.match(__re_column_selector):"";if(match)switch(match[2]){case"visIdx":case"visible":var idx=parseInt(match[1],10);if(idx<0){var visColumns=$.map(columns,function(col,i){return col.bVisible?i:null});return[visColumns[visColumns.length+idx]]}return[_fnVisibleToColumnIndex(settings,idx)];case"name":return $.map(names,function(name,i){return name===match[1]?i:null});default:return[]}if(s.nodeName&&s._DT_CellIndex)return[s._DT_CellIndex.column]
;var jqResult=$(nodes).filter(s).map(function(){return $.inArray(this,nodes)}).toArray();if(jqResult.length||!s.nodeName)return jqResult;var host=$(s).closest("*[data-dt-column]");return host.length?[host.data("dt-column")]:[]},settings,opts)},__setColumnVis=function(settings,column,vis){var cells,i,ien,tr,cols=settings.aoColumns,col=cols[column],data=settings.aoData;if(vis===undefined)return col.bVisible;if(col.bVisible!==vis){if(vis){var insertBefore=$.inArray(!0,_pluck(cols,"bVisible"),column+1);for(i=0,ien=data.length;i<ien;i++)tr=data[i].nTr,cells=data[i].anCells,tr&&tr.insertBefore(cells[column],cells[insertBefore]||null)
}else $(_pluck(settings.aoData,"anCells",column)).detach();col.bVisible=vis,_fnDrawHead(settings,settings.aoHeader),_fnDrawHead(settings,settings.aoFooter),settings.aiDisplay.length||$(settings.nTBody).find("td[colspan]").attr("colspan",_fnVisbleColumns(settings)),_fnSaveState(settings)}};_api_register("columns()",function(selector,opts){selector===undefined?selector="":$.isPlainObject(selector)&&(opts=selector,selector=""),opts=_selector_opts(opts);var inst=this.iterator("table",function(settings){return __column_selector(settings,selector,opts)},1);return inst.selector.cols=selector,inst.selector.opts=opts,inst}),
_api_registerPlural("columns().header()","column().header()",function(selector,opts){return this.iterator("column",function(settings,column){return settings.aoColumns[column].nTh},1)}),_api_registerPlural("columns().footer()","column().footer()",function(selector,opts){return this.iterator("column",function(settings,column){return settings.aoColumns[column].nTf},1)}),_api_registerPlural("columns().data()","column().data()",function(){return this.iterator("column-rows",__columnData,1)}),_api_registerPlural("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(settings,column){return settings.aoColumns[column].mData},1)
}),_api_registerPlural("columns().cache()","column().cache()",function(type){return this.iterator("column-rows",function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,"search"===type?"_aFilterData":"_aSortData",column)},1)}),_api_registerPlural("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(settings,column,i,j,rows){return _pluck_order(settings.aoData,rows,"anCells",column)},1)}),_api_registerPlural("columns().visible()","column().visible()",function(vis,calc){var ret=this.iterator("column",function(settings,column){if(vis===undefined)return settings.aoColumns[column].bVisible
;__setColumnVis(settings,column,vis)});return vis!==undefined&&(this.iterator("column",function(settings,column){_fnCallbackFire(settings,null,"column-visibility",[settings,column,vis,calc])}),(calc===undefined||calc)&&this.columns.adjust()),ret}),_api_registerPlural("columns().indexes()","column().index()",function(type){return this.iterator("column",function(settings,column){return"visible"===type?_fnColumnIndexToVisible(settings,column):column},1)}),_api_register("columns.adjust()",function(){return this.iterator("table",function(settings){_fnAdjustColumnSizing(settings)},1)}),_api_register("column.index()",function(type,idx){if(0!==this.context.length){
var ctx=this.context[0];if("fromVisible"===type||"toData"===type)return _fnVisibleToColumnIndex(ctx,idx);if("fromData"===type||"toVisible"===type)return _fnColumnIndexToVisible(ctx,idx)}}),_api_register("column()",function(selector,opts){return _selector_first(this.columns(selector,opts))});var __cell_selector=function(settings,selector,opts){var row,a,i,ien,j,o,host,data=settings.aoData,rows=_selector_row_indexes(settings,opts),cells=_removeEmpty(_pluck_order(data,rows,"anCells")),allCells=$([].concat.apply([],cells)),columns=settings.aoColumns.length;return _selector_run("cell",selector,function(s){var fnSelector="function"==typeof s
;if(null===s||s===undefined||fnSelector){for(a=[],i=0,ien=rows.length;i<ien;i++)for(row=rows[i],j=0;j<columns;j++)o={row:row,column:j},fnSelector?(host=data[row],s(o,_fnGetCellData(settings,row,j),host.anCells?host.anCells[j]:null)&&a.push(o)):a.push(o);return a}if($.isPlainObject(s))return s.column!==undefined&&s.row!==undefined&&-1!==$.inArray(s.row,rows)?[s]:[];var jqResult=allCells.filter(s).map(function(i,el){return{row:el._DT_CellIndex.row,column:el._DT_CellIndex.column}}).toArray();return jqResult.length||!s.nodeName?jqResult:(host=$(s).closest("*[data-dt-row]"),host.length?[{row:host.data("dt-row"),column:host.data("dt-column")}]:[])},settings,opts)}
;_api_register("cells()",function(rowSelector,columnSelector,opts){if($.isPlainObject(rowSelector)&&(rowSelector.row===undefined?(opts=rowSelector,rowSelector=null):(opts=columnSelector,columnSelector=null)),$.isPlainObject(columnSelector)&&(opts=columnSelector,columnSelector=null),null===columnSelector||columnSelector===undefined)return this.iterator("table",function(settings){return __cell_selector(settings,rowSelector,_selector_opts(opts))});var a,i,ien,j,jen,columns=this.columns(columnSelector),rows=this.rows(rowSelector);this.iterator("table",function(settings,idx){for(a=[],i=0,ien=rows[idx].length;i<ien;i++)for(j=0,
jen=columns[idx].length;j<jen;j++)a.push({row:rows[idx][i],column:columns[idx][j]})},1);var cells=this.cells(a,opts);return $.extend(cells.selector,{cols:columnSelector,rows:rowSelector,opts:opts}),cells}),_api_registerPlural("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(settings,row,column){var data=settings.aoData[row];return data&&data.anCells?data.anCells[column]:undefined},1)}),_api_register("cells().data()",function(){return this.iterator("cell",function(settings,row,column){return _fnGetCellData(settings,row,column)},1)}),_api_registerPlural("cells().cache()","cell().cache()",function(type){
return type="search"===type?"_aFilterData":"_aSortData",this.iterator("cell",function(settings,row,column){return settings.aoData[row][type][column]},1)}),_api_registerPlural("cells().render()","cell().render()",function(type){return this.iterator("cell",function(settings,row,column){return _fnGetCellData(settings,row,column,type)},1)}),_api_registerPlural("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(settings,row,column){return{row:row,column:column,columnVisible:_fnColumnIndexToVisible(settings,column)}},1)}),_api_registerPlural("cells().invalidate()","cell().invalidate()",function(src){
return this.iterator("cell",function(settings,row,column){_fnInvalidate(settings,row,src,column)})}),_api_register("cell()",function(rowSelector,columnSelector,opts){return _selector_first(this.cells(rowSelector,columnSelector,opts))}),_api_register("cell().data()",function(data){var ctx=this.context,cell=this[0];return data===undefined?ctx.length&&cell.length?_fnGetCellData(ctx[0],cell[0].row,cell[0].column):undefined:(_fnSetCellData(ctx[0],cell[0].row,cell[0].column,data),_fnInvalidate(ctx[0],cell[0].row,"data",cell[0].column),this)}),_api_register("order()",function(order,dir){var ctx=this.context
;return order===undefined?0!==ctx.length?ctx[0].aaSorting:undefined:("number"==typeof order?order=[[order,dir]]:order.length&&!$.isArray(order[0])&&(order=Array.prototype.slice.call(arguments)),this.iterator("table",function(settings){settings.aaSorting=order.slice()}))}),_api_register("order.listener()",function(node,column,callback){return this.iterator("table",function(settings){_fnSortAttachListener(settings,node,column,callback)})}),_api_register("order.fixed()",function(set){if(!set){var ctx=this.context,fixed=ctx.length?ctx[0].aaSortingFixed:undefined;return $.isArray(fixed)?{pre:fixed}:fixed}return this.iterator("table",function(settings){
settings.aaSortingFixed=$.extend(!0,{},set)})}),_api_register(["columns().order()","column().order()"],function(dir){var that=this;return this.iterator("table",function(settings,i){var sort=[];$.each(that[i],function(j,col){sort.push([col,dir])}),settings.aaSorting=sort})}),_api_register("search()",function(input,regex,smart,caseInsen){var ctx=this.context;return input===undefined?0!==ctx.length?ctx[0].oPreviousSearch.sSearch:undefined:this.iterator("table",function(settings){settings.oFeatures.bFilter&&_fnFilterComplete(settings,$.extend({},settings.oPreviousSearch,{sSearch:input+"",bRegex:null!==regex&&regex,bSmart:null===smart||smart,
bCaseInsensitive:null===caseInsen||caseInsen}),1)})}),_api_registerPlural("columns().search()","column().search()",function(input,regex,smart,caseInsen){return this.iterator("column",function(settings,column){var preSearch=settings.aoPreSearchCols;if(input===undefined)return preSearch[column].sSearch;settings.oFeatures.bFilter&&($.extend(preSearch[column],{sSearch:input+"",bRegex:null!==regex&&regex,bSmart:null===smart||smart,bCaseInsensitive:null===caseInsen||caseInsen}),_fnFilterComplete(settings,settings.oPreviousSearch,1))})}),_api_register("state()",function(){return this.context.length?this.context[0].oSavedState:null}),
_api_register("state.clear()",function(){return this.iterator("table",function(settings){settings.fnStateSaveCallback.call(settings.oInstance,settings,{})})}),_api_register("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),_api_register("state.save()",function(){return this.iterator("table",function(settings){_fnSaveState(settings)})}),DataTable.versionCheck=DataTable.fnVersionCheck=function(version){for(var iThis,iThat,aThis=DataTable.version.split("."),aThat=version.split("."),i=0,iLen=aThat.length;i<iLen;i++)if(iThis=parseInt(aThis[i],10)||0,iThat=parseInt(aThat[i],10)||0,iThis!==iThat)return iThis>iThat;return!0},
DataTable.isDataTable=DataTable.fnIsDataTable=function(table){var t=$(table).get(0),is=!1;return table instanceof DataTable.Api||($.each(DataTable.settings,function(i,o){var head=o.nScrollHead?$("table",o.nScrollHead)[0]:null,foot=o.nScrollFoot?$("table",o.nScrollFoot)[0]:null;o.nTable!==t&&head!==t&&foot!==t||(is=!0)}),is)},DataTable.tables=DataTable.fnTables=function(visible){var api=!1;$.isPlainObject(visible)&&(api=visible.api,visible=visible.visible);var a=$.map(DataTable.settings,function(o){if(!visible||visible&&$(o.nTable).is(":visible"))return o.nTable});return api?new _Api(a):a},DataTable.camelToHungarian=_fnCamelToHungarian,
_api_register("$()",function(selector,opts){var rows=this.rows(opts).nodes(),jqRows=$(rows);return $([].concat(jqRows.filter(selector).toArray(),jqRows.find(selector).toArray()))}),$.each(["on","one","off"],function(i,key){_api_register(key+"()",function(){var args=Array.prototype.slice.call(arguments);args[0]=$.map(args[0].split(/\s/),function(e){return e.match(/\.dt\b/)?e:e+".dt"}).join(" ");var inst=$(this.tables().nodes());return inst[key].apply(inst,args),this})}),_api_register("clear()",function(){return this.iterator("table",function(settings){_fnClearTable(settings)})}),_api_register("settings()",function(){return new _Api(this.context,this.context)
}),_api_register("init()",function(){var ctx=this.context;return ctx.length?ctx[0].oInit:null}),_api_register("data()",function(){return this.iterator("table",function(settings){return _pluck(settings.aoData,"_aData")}).flatten()}),_api_register("destroy()",function(remove){return remove=remove||!1,this.iterator("table",function(settings){var ien,orig=settings.nTableWrapper.parentNode,classes=settings.oClasses,table=settings.nTable,tbody=settings.nTBody,thead=settings.nTHead,tfoot=settings.nTFoot,jqTable=$(table),jqTbody=$(tbody),jqWrapper=$(settings.nTableWrapper),rows=$.map(settings.aoData,function(r){return r.nTr});settings.bDestroying=!0,
_fnCallbackFire(settings,"aoDestroyCallback","destroy",[settings]),remove||new _Api(settings).columns().visible(!0),jqWrapper.off(".DT").find(":not(tbody *)").off(".DT"),$(window).off(".DT-"+settings.sInstance),table!=thead.parentNode&&(jqTable.children("thead").detach(),jqTable.append(thead)),tfoot&&table!=tfoot.parentNode&&(jqTable.children("tfoot").detach(),jqTable.append(tfoot)),settings.aaSorting=[],settings.aaSortingFixed=[],_fnSortingClasses(settings),$(rows).removeClass(settings.asStripeClasses.join(" ")),$("th, td",thead).removeClass(classes.sSortable+" "+classes.sSortableAsc+" "+classes.sSortableDesc+" "+classes.sSortableNone),
jqTbody.children().detach(),jqTbody.append(rows);var removedMethod=remove?"remove":"detach";jqTable[removedMethod](),jqWrapper[removedMethod](),!remove&&orig&&(orig.insertBefore(table,settings.nTableReinsertBefore),jqTable.css("width",settings.sDestroyWidth).removeClass(classes.sTable),(ien=settings.asDestroyStripes.length)&&jqTbody.children().each(function(i){$(this).addClass(settings.asDestroyStripes[i%ien])}));var idx=$.inArray(settings,DataTable.settings);-1!==idx&&DataTable.settings.splice(idx,1)})}),$.each(["column","row","cell"],function(i,type){_api_register(type+"s().every()",function(fn){var opts=this.selector.opts,api=this
;return this.iterator(type,function(settings,arg1,arg2,arg3,arg4){fn.call(api[type](arg1,"cell"===type?arg2:opts,"cell"===type?opts:undefined),arg1,arg2,arg3,arg4)})})}),_api_register("i18n()",function(token,def,plural){var ctx=this.context[0],resolved=_fnGetObjectDataFn(token)(ctx.oLanguage);return resolved===undefined&&(resolved=def),plural!==undefined&&$.isPlainObject(resolved)&&(resolved=resolved[plural]!==undefined?resolved[plural]:resolved._),resolved.replace("%d",plural)}),DataTable.version="1.10.18",DataTable.settings=[],DataTable.models={},DataTable.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},DataTable.models.oRow={nTr:null,
anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},DataTable.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},DataTable.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,
aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(toFormat){return toFormat.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(settings){try{
return JSON.parse((-1===settings.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+settings.sInstance+"_"+location.pathname))}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(settings,data){try{(-1===settings.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+settings.sInstance+"_"+location.pathname,JSON.stringify(data))}catch(e){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{
sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:$.extend({},DataTable.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",
sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},_fnHungarianMap(DataTable.defaults),DataTable.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},_fnHungarianMap(DataTable.defaults.column),DataTable.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{
bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,
nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:undefined,oAjaxData:undefined,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){
return"ssp"==_fnDataSource(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==_fnDataSource(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var len=this._iDisplayLength,start=this._iDisplayStart,calc=start+len,records=this.aiDisplay.length,features=this.oFeatures,paginate=features.bPaginate;return features.bServerSide?!1===paginate||-1===len?start+records:Math.min(start+len,this._iRecordsDisplay):!paginate||calc>records||-1===len?records:calc},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},
DataTable.ext=_ext={buttons:{},classes:{},build:"dt/dt-1.10.18",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:DataTable.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:DataTable.version},$.extend(_ext,{afnFiltering:_ext.search,aTypes:_ext.type.detect,ofnSearch:_ext.type.search,oSort:_ext.type.order,afnSortData:_ext.order,aoFeatures:_ext.feature,oApi:_ext.internal,oStdClasses:_ext.classes,oPagination:_ext.pager}),$.extend(DataTable.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",
sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",
sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var extPagination=DataTable.ext.pager;$.extend(extPagination,{simple:function(page,pages){return["previous","next"]},full:function(page,pages){return["first","previous","next","last"]},numbers:function(page,pages){return[_numbers(page,pages)]},simple_numbers:function(page,pages){return["previous",_numbers(page,pages),"next"]
},full_numbers:function(page,pages){return["first","previous",_numbers(page,pages),"next","last"]},first_last_numbers:function(page,pages){return["first",_numbers(page,pages),"last"]},_numbers:_numbers,numbers_length:7}),$.extend(!0,DataTable.ext.renderer,{pageButton:{_:function(settings,host,idx,buttons,page,pages){var btnDisplay,btnClass,activeEl,classes=settings.oClasses,lang=settings.oLanguage.oPaginate,aria=settings.oLanguage.oAria.paginate||{},counter=0,attach=function(container,buttons){var i,ien,node,button,clickHandler=function(e){_fnPageChange(settings,e.data.action,!0)};for(i=0,ien=buttons.length;i<ien;i++)if(button=buttons[i],$.isArray(button)){
var inner=$("<"+(button.DT_el||"div")+"/>").appendTo(container);attach(inner,button)}else{switch(btnDisplay=null,btnClass="",button){case"ellipsis":container.append('<span class="ellipsis">&#x2026;</span>');break;case"first":btnDisplay=lang.sFirst,btnClass=button+(page>0?"":" "+classes.sPageButtonDisabled);break;case"previous":btnDisplay=lang.sPrevious,btnClass=button+(page>0?"":" "+classes.sPageButtonDisabled);break;case"next":btnDisplay=lang.sNext,btnClass=button+(page<pages-1?"":" "+classes.sPageButtonDisabled);break;case"last":btnDisplay=lang.sLast,btnClass=button+(page<pages-1?"":" "+classes.sPageButtonDisabled);break;default:btnDisplay=button+1,
btnClass=page===button?classes.sPageButtonActive:""}null!==btnDisplay&&(node=$("<a>",{class:classes.sPageButton+" "+btnClass,"aria-controls":settings.sTableId,"aria-label":aria[button],"data-dt-idx":counter,tabindex:settings.iTabIndex,id:0===idx&&"string"==typeof button?settings.sTableId+"_"+button:null}).html(btnDisplay).appendTo(container),_fnBindAction(node,{action:button},clickHandler),counter++)}};try{activeEl=$(host).find(document.activeElement).data("dt-idx")}catch(e){}attach($(host).empty(),buttons),activeEl!==undefined&&$(host).find("[data-dt-idx="+activeEl+"]").focus()}}}),$.extend(DataTable.ext.type.detect,[function(d,settings){
var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal)?"num"+decimal:null},function(d,settings){if(d&&!(d instanceof Date)&&!_re_date.test(d))return null;var parsed=Date.parse(d);return null!==parsed&&!isNaN(parsed)||_empty(d)?"date":null},function(d,settings){var decimal=settings.oLanguage.sDecimal;return _isNumber(d,decimal,!0)?"num-fmt"+decimal:null},function(d,settings){var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal)?"html-num"+decimal:null},function(d,settings){var decimal=settings.oLanguage.sDecimal;return _htmlNumeric(d,decimal,!0)?"html-num-fmt"+decimal:null},function(d,settings){
return _empty(d)||"string"==typeof d&&-1!==d.indexOf("<")?"html":null}]),$.extend(DataTable.ext.type.search,{html:function(data){return _empty(data)?data:"string"==typeof data?data.replace(_re_new_lines," ").replace(_re_html,""):""},string:function(data){return _empty(data)?data:"string"==typeof data?data.replace(_re_new_lines," "):data}});var __numericReplace=function(d,decimalPlace,re1,re2){return 0===d||d&&"-"!==d?(decimalPlace&&(d=_numToDecimal(d,decimalPlace)),d.replace&&(re1&&(d=d.replace(re1,"")),re2&&(d=d.replace(re2,""))),1*d):-1/0};$.extend(_ext.type.order,{"date-pre":function(d){var ts=Date.parse(d);return isNaN(ts)?-1/0:ts},
"html-pre":function(a){return _empty(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return _empty(a)?"":"string"==typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(x,y){return x<y?-1:x>y?1:0},"string-desc":function(x,y){return x<y?1:x>y?-1:0}}),_addNumericSort(""),$.extend(!0,DataTable.ext.renderer,{header:{_:function(settings,cell,column,classes){$(settings.nTable).on("order.dt.DT",function(e,ctx,sorting,columns){if(settings===ctx){var colIdx=column.idx
;cell.removeClass(column.sSortingClass+" "+classes.sSortAsc+" "+classes.sSortDesc).addClass("asc"==columns[colIdx]?classes.sSortAsc:"desc"==columns[colIdx]?classes.sSortDesc:column.sSortingClass)}})},jqueryui:function(settings,cell,column,classes){$("<div/>").addClass(classes.sSortJUIWrapper).append(cell.contents()).append($("<span/>").addClass(classes.sSortIcon+" "+column.sSortingClassJUI)).appendTo(cell),$(settings.nTable).on("order.dt.DT",function(e,ctx,sorting,columns){if(settings===ctx){var colIdx=column.idx
;cell.removeClass(classes.sSortAsc+" "+classes.sSortDesc).addClass("asc"==columns[colIdx]?classes.sSortAsc:"desc"==columns[colIdx]?classes.sSortDesc:column.sSortingClass),cell.find("span."+classes.sSortIcon).removeClass(classes.sSortJUIAsc+" "+classes.sSortJUIDesc+" "+classes.sSortJUI+" "+classes.sSortJUIAscAllowed+" "+classes.sSortJUIDescAllowed).addClass("asc"==columns[colIdx]?classes.sSortJUIAsc:"desc"==columns[colIdx]?classes.sSortJUIDesc:column.sSortingClassJUI)}})}}});var __htmlEscapeEntities=function(d){return"string"==typeof d?d.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):d};DataTable.render={
number:function(thousands,decimal,precision,prefix,postfix){return{display:function(d){if("number"!=typeof d&&"string"!=typeof d)return d;var negative=d<0?"-":"",flo=parseFloat(d);if(isNaN(flo))return __htmlEscapeEntities(d);flo=flo.toFixed(precision),d=Math.abs(flo);var intPart=parseInt(d,10),floatPart=precision?decimal+(d-intPart).toFixed(precision).substring(2):"";return negative+(prefix||"")+intPart.toString().replace(/\B(?=(\d{3})+(?!\d))/g,thousands)+floatPart+(postfix||"")}}},text:function(){return{display:__htmlEscapeEntities}}},$.extend(DataTable.ext.internal,{_fnExternApiFunc:_fnExternApiFunc,_fnBuildAjax:_fnBuildAjax,_fnAjaxUpdate:_fnAjaxUpdate,
_fnAjaxParameters:_fnAjaxParameters,_fnAjaxUpdateDraw:_fnAjaxUpdateDraw,_fnAjaxDataSrc:_fnAjaxDataSrc,_fnAddColumn:_fnAddColumn,_fnColumnOptions:_fnColumnOptions,_fnAdjustColumnSizing:_fnAdjustColumnSizing,_fnVisibleToColumnIndex:_fnVisibleToColumnIndex,_fnColumnIndexToVisible:_fnColumnIndexToVisible,_fnVisbleColumns:_fnVisbleColumns,_fnGetColumns:_fnGetColumns,_fnColumnTypes:_fnColumnTypes,_fnApplyColumnDefs:_fnApplyColumnDefs,_fnHungarianMap:_fnHungarianMap,_fnCamelToHungarian:_fnCamelToHungarian,_fnLanguageCompat:_fnLanguageCompat,_fnBrowserDetect:_fnBrowserDetect,_fnAddData:_fnAddData,_fnAddTr:_fnAddTr,_fnNodeToDataIndex:_fnNodeToDataIndex,
_fnNodeToColumnIndex:_fnNodeToColumnIndex,_fnGetCellData:_fnGetCellData,_fnSetCellData:_fnSetCellData,_fnSplitObjNotation:_fnSplitObjNotation,_fnGetObjectDataFn:_fnGetObjectDataFn,_fnSetObjectDataFn:_fnSetObjectDataFn,_fnGetDataMaster:_fnGetDataMaster,_fnClearTable:_fnClearTable,_fnDeleteIndex:_fnDeleteIndex,_fnInvalidate:_fnInvalidate,_fnGetRowElements:_fnGetRowElements,_fnCreateTr:_fnCreateTr,_fnBuildHead:_fnBuildHead,_fnDrawHead:_fnDrawHead,_fnDraw:_fnDraw,_fnReDraw:_fnReDraw,_fnAddOptionsHtml:_fnAddOptionsHtml,_fnDetectHeader:_fnDetectHeader,_fnGetUniqueThs:_fnGetUniqueThs,_fnFeatureHtmlFilter:_fnFeatureHtmlFilter,_fnFilterComplete:_fnFilterComplete,
_fnFilterCustom:_fnFilterCustom,_fnFilterColumn:_fnFilterColumn,_fnFilter:_fnFilter,_fnFilterCreateSearch:_fnFilterCreateSearch,_fnEscapeRegex:_fnEscapeRegex,_fnFilterData:_fnFilterData,_fnFeatureHtmlInfo:_fnFeatureHtmlInfo,_fnUpdateInfo:_fnUpdateInfo,_fnInfoMacros:_fnInfoMacros,_fnInitialise:_fnInitialise,_fnInitComplete:_fnInitComplete,_fnLengthChange:_fnLengthChange,_fnFeatureHtmlLength:_fnFeatureHtmlLength,_fnFeatureHtmlPaginate:_fnFeatureHtmlPaginate,_fnPageChange:_fnPageChange,_fnFeatureHtmlProcessing:_fnFeatureHtmlProcessing,_fnProcessingDisplay:_fnProcessingDisplay,_fnFeatureHtmlTable:_fnFeatureHtmlTable,_fnScrollDraw:_fnScrollDraw,
_fnApplyToChildren:_fnApplyToChildren,_fnCalculateColumnWidths:_fnCalculateColumnWidths,_fnThrottle:_fnThrottle,_fnConvertToWidth:_fnConvertToWidth,_fnGetWidestNode:_fnGetWidestNode,_fnGetMaxLenString:_fnGetMaxLenString,_fnStringToCss:_fnStringToCss,_fnSortFlatten:_fnSortFlatten,_fnSort:_fnSort,_fnSortAria:_fnSortAria,_fnSortListener:_fnSortListener,_fnSortAttachListener:_fnSortAttachListener,_fnSortingClasses:_fnSortingClasses,_fnSortData:_fnSortData,_fnSaveState:_fnSaveState,_fnLoadState:_fnLoadState,_fnSettingsFromNode:_fnSettingsFromNode,_fnLog:_fnLog,_fnMap:_fnMap,_fnBindAction:_fnBindAction,_fnCallbackReg:_fnCallbackReg,_fnCallbackFire:_fnCallbackFire,
_fnLengthOverflow:_fnLengthOverflow,_fnRenderer:_fnRenderer,_fnDataSource:_fnDataSource,_fnRowAttributes:_fnRowAttributes,_fnExtend:_fnExtend,_fnCalculateEnd:function(){}}),$.fn.dataTable=DataTable,DataTable.$=$,$.fn.dataTableSettings=DataTable.settings,$.fn.dataTableExt=DataTable.ext,$.fn.DataTable=function(opts){return $(this).dataTable(opts).api()},$.each(DataTable,function(prop,val){$.fn.DataTable[prop]=val});var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.4.0",Alert.TRANSITION_DURATION=150,Alert.prototype.close=function(e){function removeElement(){
$parent.detach().trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),selector="#"===selector?[]:selector;var $parent=$(document).find(selector);e&&e.preventDefault(),$parent.length||($parent=$this.closest(".alert")),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement())};var old=$.fn.alert;$.fn.alert=Plugin,
$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close),function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})}var Tab=function(element){this.element=$(element)};Tab.VERSION="3.4.0",Tab.TRANSITION_DURATION=150,Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var $previous=$ul.find(".active:last a"),hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]}),showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});if($previous.trigger(hideEvent),$this.trigger(showEvent),!showEvent.isDefaultPrevented()&&!hideEvent.isDefaultPrevented()){var $target=$(document).find(selector);this.activate($this.closest("li"),$ul),this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]}),$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})}}},
Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu").length&&element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),callback&&callback()}
var $active=container.find("> .active"),transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=Plugin,$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this};var clickHandler=function(e){e.preventDefault(),Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}($)
;var backdrop=".dropdown-backdrop",toggle='[data-toggle="dropdown"]',Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.4.0",Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),
e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true"),$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive&&27!=e.which||isActive&&27==e.which)return 27==e.which&&$parent.find(toggle).trigger("focus"),$this.trigger("click");var $items=$parent.find(".dropdown-menu li:not(.disabled):visible a");if($items.length){
var index=$items.index(e.target);38==e.which&&index>0&&index--,40==e.which&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).trigger("focus")}}}};var old=$.fn.dropdown;$.fn.dropdown=Plugin,$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(".explo").on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown),
function(){if(!$.jstree){var instance_counter=0,ccp_node=!1,ccp_mode=!1,ccp_inst=!1,themes_loaded=[],src=$("script:last").attr("src"),document=window.document;$.jstree={version:"3.3.5",defaults:{plugins:[]},plugins:{},path:src&&-1!==src.indexOf("/")?src.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},$.jstree.create=function(el,options){var tmp=new $.jstree.core(++instance_counter),opt=options;return options=$.extend(!0,{},$.jstree.defaults,options),opt&&opt.plugins&&(options.plugins=opt.plugins),$.each(options.plugins,function(i,k){"core"!==i&&(tmp=tmp.plugin(k,options[k]))}),$(el).data("jstree",tmp),
tmp.init(el,options),tmp},$.jstree.destroy=function(){$(".jstree:jstree").jstree("destroy"),$(document).off(".jstree")},$.jstree.core=function(id){this._id=id,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},$.jstree.reference=function(needle){var tmp=null,obj=null;if(!needle||!needle.id||needle.tagName&&needle.nodeType||(needle=needle.id),!obj||!obj.length)try{obj=$(needle)}catch(ignore){}if(!obj||!obj.length)try{obj=$("#"+needle.replace($.jstree.idregex,"\\$&"))}catch(ignore){}
return obj&&obj.length&&(obj=obj.closest(".jstree")).length&&(obj=obj.data("jstree"))?tmp=obj:$(".jstree").each(function(){var inst=$(this).data("jstree");if(inst&&inst._model.data[needle])return tmp=inst,!1}),tmp},$.fn.jstree=function(arg){var is_method="string"==typeof arg,args=Array.prototype.slice.call(arguments,1),result=null;return!(!0===arg&&!this.length)&&(this.each(function(){var instance=$.jstree.reference(this),method=is_method&&instance?instance[arg]:null;if(result=is_method&&method?method.apply(instance,args):null,instance||is_method||arg!==undefined&&!$.isPlainObject(arg)||$.jstree.create(this,arg),
(instance&&!is_method||!0===arg)&&(result=instance||!1),null!==result&&result!==undefined)return!1}),null!==result&&result!==undefined?result:this)},$.expr.pseudos.jstree=$.expr.createPseudo(function(search){return function(a){return $(a).hasClass("jstree")&&$(a).data("jstree")!==undefined}}),$.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:$.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(e){e.type="click",
$(e.currentTarget).trigger(e)},enter:function(e){e.type="click",$(e.currentTarget).trigger(e)},left:function(e){if(e.preventDefault(),this.is_open(e.currentTarget))this.close_node(e.currentTarget);else{var o=this.get_parent(e.currentTarget);o&&o.id!==$.jstree.root&&this.get_node(o,!0).children(".jstree-anchor").focus()}},up:function(e){e.preventDefault();var o=this.get_prev_dom(e.currentTarget);o&&o.length&&o.children(".jstree-anchor").focus()},right:function(e){if(e.preventDefault(),this.is_closed(e.currentTarget))this.open_node(e.currentTarget,function(o){this.get_node(o,!0).children(".jstree-anchor").focus()});else if(this.is_open(e.currentTarget)){
var o=this.get_node(e.currentTarget,!0).children(".jstree-children")[0];o&&$(this._firstChild(o)).children(".jstree-anchor").focus()}},down:function(e){e.preventDefault();var o=this.get_next_dom(e.currentTarget);o&&o.length&&o.children(".jstree-anchor").focus()},"*":function(e){this.open_all()},home:function(e){e.preventDefault();var o=this._firstChild(this.get_container_ul()[0]);o&&$(o).children(".jstree-anchor").filter(":visible").focus()},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},$.jstree.core.prototype={
plugin:function(deco,opts){var Child=$.jstree.plugins[deco];return Child?(this._data[deco]={},Child.prototype=this,new Child(opts,this)):this},init:function(el,options){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=$(el).addClass("jstree jstree-"+this._id),this.settings=options,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),
this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),
this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node($.jstree.root)},destroy:function(keep_html){
if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(ignore){}keep_html||this.element.empty(),this.teardown()},_create_prototype_node:function(){var _temp1,_temp2,_node=document.createElement("LI");return _node.setAttribute("role","treeitem"),_temp1=document.createElement("I"),_temp1.className="jstree-icon jstree-ocl",_temp1.setAttribute("role","presentation"),_node.appendChild(_temp1),_temp1=document.createElement("A"),_temp1.className="jstree-anchor",_temp1.setAttribute("href","#"),_temp1.setAttribute("tabindex","-1"),_temp2=document.createElement("I"),_temp2.className="jstree-icon jstree-themeicon",
_temp2.setAttribute("role","presentation"),_temp1.appendChild(_temp2),_node.appendChild(_temp1),_temp1=_temp2=null,_node},_kbevent_to_func:function(e){var keys={8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",
18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},parts=[];e.ctrlKey&&parts.push("ctrl"),e.altKey&&parts.push("alt"),e.shiftKey&&parts.push("shift"),parts.push(keys[e.which]||e.which),parts=parts.sort().join("-").toLowerCase();var i,tmp,kb=this.settings.core.keyboard
;for(i in kb)if(kb.hasOwnProperty(i)&&(tmp=i,"-"!==tmp&&"+"!==tmp&&(tmp=tmp.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS"),tmp=tmp.split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),tmp===parts))return kb[i];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var word="",tout=null,was_click=0;this.element.on("dblclick.jstree",function(e){
if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var sel=window.getSelection();try{sel.removeAllRanges(),sel.collapse()}catch(ignore){}}}).on("mousedown.jstree",$.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),was_click=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",$.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",$.proxy(function(e){
if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){e.preventDefault(),e.currentTarget!==document.activeElement&&$(e.currentTarget).focus(),this.activate_node(e.currentTarget,e)},this)).on("keydown.jstree",".jstree-anchor",$.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var f=this._kbevent_to_func(e);if(f){var r=f.call(this,e);if(!1===r||!0===r)return r}
},this)).on("load_node.jstree",$.proxy(function(e,data){data.status&&(data.node.id!==$.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout($.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var i,j,tmp=[];for(i=0,
j=this._data.core.selected.length;i<j;i++)tmp=tmp.concat(this._model.data[this._data.core.selected[i]].parents);for(tmp=$.vakata.array_unique(tmp),i=0,j=tmp.length;i<j;i++)this.open_node(tmp[i],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",$.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;tout&&clearTimeout(tout),tout=setTimeout(function(){word=""},500);var chr=String.fromCharCode(e.which).toLowerCase(),col=this.element.find(".jstree-anchor").filter(":visible"),ind=col.index(document.activeElement)||0,end=!1;if(word+=chr,
word.length>1){if(col.slice(ind).each($.proxy(function(i,v){if(0===$(v).text().toLowerCase().indexOf(word))return $(v).focus(),end=!0,!1},this)),end)return;if(col.slice(0,ind).each($.proxy(function(i,v){if(0===$(v).text().toLowerCase().indexOf(word))return $(v).focus(),end=!0,!1},this)),end)return}if(new RegExp("^"+chr.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(word)){if(col.slice(ind+1).each($.proxy(function(i,v){if($(v).text().toLowerCase().charAt(0)===chr)return $(v).focus(),end=!0,!1},this)),end)return;if(col.slice(0,ind+1).each($.proxy(function(i,v){if($(v).text().toLowerCase().charAt(0)===chr)return $(v).focus(),end=!0,!1},this)),end)return}
},this)).on("init.jstree",$.proxy(function(){var s=this.settings.core.themes;this._data.core.themes.dots=s.dots,this._data.core.themes.stripes=s.stripes,this._data.core.themes.icons=s.icons,this._data.core.themes.ellipsis=s.ellipsis,this.set_theme(s.name||"default",s.url),this.set_theme_variant(s.variant)},this)).on("loading.jstree",$.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()
},this)).on("blur.jstree",".jstree-anchor",$.proxy(function(e){this._data.core.focused=null,$(e.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",$.proxy(function(e){var tmp=this.get_node(e.currentTarget);tmp&&tmp.id&&(this._data.core.focused=tmp.id),this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),$(e.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",$.proxy(function(){if(+new Date-was_click>500&&!this._data.core.focused&&this.settings.core.restore_focus){was_click=0
;var act=this.get_node(this.element.attr("aria-activedescendant"),!0);act&&act.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",$.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),$(document).off(".jstree-"+this._id)},trigger:function(ev,data){data||(data={}),data.instance=this,this.element.triggerHandler(ev.replace(".jstree","")+".jstree",data)},get_container:function(){return this.element},get_container_ul:function(){
return this.element.children(".jstree-children").first()},get_string:function(key){var a=this.settings.core.strings;return $.isFunction(a)?a.call(this,key):a&&a[key]?a[key]:key},_firstChild:function(dom){for(dom=dom?dom.firstChild:null;null!==dom&&1!==dom.nodeType;)dom=dom.nextSibling;return dom},_nextSibling:function(dom){for(dom=dom?dom.nextSibling:null;null!==dom&&1!==dom.nodeType;)dom=dom.nextSibling;return dom},_previousSibling:function(dom){for(dom=dom?dom.previousSibling:null;null!==dom&&1!==dom.nodeType;)dom=dom.previousSibling;return dom},get_node:function(obj,as_dom){obj&&obj.id&&(obj=obj.id);var dom;try{
if(this._model.data[obj])obj=this._model.data[obj];else if("string"==typeof obj&&this._model.data[obj.replace(/^#/,"")])obj=this._model.data[obj.replace(/^#/,"")];else if("string"==typeof obj&&(dom=$("#"+obj.replace($.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[dom.closest(".jstree-node").attr("id")])obj=this._model.data[dom.closest(".jstree-node").attr("id")];else if((dom=$(obj,this.element)).length&&this._model.data[dom.closest(".jstree-node").attr("id")])obj=this._model.data[dom.closest(".jstree-node").attr("id")];else{if(!(dom=$(obj,this.element)).length||!dom.hasClass("jstree"))return!1;obj=this._model.data[$.jstree.root]}
return as_dom&&(obj=obj.id===$.jstree.root?this.element:$("#"+obj.id.replace($.jstree.idregex,"\\$&"),this.element)),obj}catch(ex){return!1}},get_path:function(obj,glue,ids){if(!(obj=obj.parents?obj:this.get_node(obj))||obj.id===$.jstree.root||!obj.parents)return!1;var i,j,p=[];for(p.push(ids?obj.id:obj.text),i=0,j=obj.parents.length;i<j;i++)p.push(ids?obj.parents[i]:this.get_text(obj.parents[i]));return p=p.reverse().slice(1),glue?p.join(glue):p},get_next_dom:function(obj,strict){var tmp;if(obj=this.get_node(obj,!0),obj[0]===this.element[0]){for(tmp=this._firstChild(this.get_container_ul()[0]);tmp&&0===tmp.offsetHeight;)tmp=this._nextSibling(tmp)
;return!!tmp&&$(tmp)}if(!obj||!obj.length)return!1;if(strict){tmp=obj[0];do{tmp=this._nextSibling(tmp)}while(tmp&&0===tmp.offsetHeight);return!!tmp&&$(tmp)}if(obj.hasClass("jstree-open")){for(tmp=this._firstChild(obj.children(".jstree-children")[0]);tmp&&0===tmp.offsetHeight;)tmp=this._nextSibling(tmp);if(null!==tmp)return $(tmp)}tmp=obj[0];do{tmp=this._nextSibling(tmp)}while(tmp&&0===tmp.offsetHeight);return null!==tmp?$(tmp):obj.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(obj,strict){var tmp;if(obj=this.get_node(obj,!0),obj[0]===this.element[0]){
for(tmp=this.get_container_ul()[0].lastChild;tmp&&0===tmp.offsetHeight;)tmp=this._previousSibling(tmp);return!!tmp&&$(tmp)}if(!obj||!obj.length)return!1;if(strict){tmp=obj[0];do{tmp=this._previousSibling(tmp)}while(tmp&&0===tmp.offsetHeight);return!!tmp&&$(tmp)}tmp=obj[0];do{tmp=this._previousSibling(tmp)}while(tmp&&0===tmp.offsetHeight);if(null!==tmp){for(obj=$(tmp);obj.hasClass("jstree-open");)obj=obj.children(".jstree-children").first().children(".jstree-node:visible:last");return obj}return!(!(tmp=obj[0].parentNode.parentNode)||!tmp.className||-1===tmp.className.indexOf("jstree-node"))&&$(tmp)},get_parent:function(obj){
return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root)&&obj.parent},get_children_dom:function(obj){return obj=this.get_node(obj,!0),obj[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!obj||!obj.length)&&obj.children(".jstree-children").children(".jstree-node")},is_parent:function(obj){return(obj=this.get_node(obj))&&(!1===obj.state.loaded||obj.children.length>0)},is_loaded:function(obj){return(obj=this.get_node(obj))&&obj.state.loaded},is_loading:function(obj){return(obj=this.get_node(obj))&&obj.state&&obj.state.loading},is_open:function(obj){return(obj=this.get_node(obj))&&obj.state.opened},is_closed:function(obj){
return(obj=this.get_node(obj))&&this.is_parent(obj)&&!obj.state.opened},is_leaf:function(obj){return!this.is_parent(obj)},load_node:function(obj,callback){var k,l,i,j,c;if($.isArray(obj))return this._load_nodes(obj.slice(),callback),!0;if(!(obj=this.get_node(obj)))return callback&&callback.call(this,obj,!1),!1;if(obj.state.loaded){for(obj.state.loaded=!1,i=0,j=obj.parents.length;i<j;i++)this._model.data[obj.parents[i]].children_d=$.vakata.array_filter(this._model.data[obj.parents[i]].children_d,function(v){return-1===$.inArray(v,obj.children_d)});for(k=0,l=obj.children_d.length;k<l;k++)this._model.data[obj.children_d[k]].state.selected&&(c=!0),
delete this._model.data[obj.children_d[k]];c&&(this._data.core.selected=$.vakata.array_filter(this._data.core.selected,function(v){return-1===$.inArray(v,obj.children_d)})),obj.children=[],obj.children_d=[],c&&this.trigger("changed",{action:"load_node",node:obj,selected:this._data.core.selected})}return obj.state.failed=!1,obj.state.loading=!0,this.get_node(obj,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(obj,$.proxy(function(status){obj=this._model.data[obj.id],obj.state.loading=!1,obj.state.loaded=status,obj.state.failed=!obj.state.loaded;var dom=this.get_node(obj,!0),i=0,j=0,m=this._model.data,has_children=!1;for(i=0,
j=obj.children.length;i<j;i++)if(m[obj.children[i]]&&!m[obj.children[i]].state.hidden){has_children=!0;break}obj.state.loaded&&dom&&dom.length&&(dom.removeClass("jstree-closed jstree-open jstree-leaf"),has_children?"#"!==obj.id&&dom.addClass(obj.state.opened?"jstree-open":"jstree-closed"):dom.addClass("jstree-leaf")),dom.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:obj,status:status}),callback&&callback.call(this,obj,status)},this)),!0},_load_nodes:function(nodes,callback,is_callback,force_reload){var i,j,r=!0,c=function(){this._load_nodes(nodes,callback,!0)},m=this._model.data,tmp=[];for(i=0,
j=nodes.length;i<j;i++)m[nodes[i]]&&(!m[nodes[i]].state.loaded&&!m[nodes[i]].state.failed||!is_callback&&force_reload)&&(this.is_loading(nodes[i])||this.load_node(nodes[i],c),r=!1);if(r){for(i=0,j=nodes.length;i<j;i++)m[nodes[i]]&&m[nodes[i]].state.loaded&&tmp.push(nodes[i]);callback&&!callback.done&&(callback.call(this,tmp),callback.done=!0)}},load_all:function(obj,callback){if(obj||(obj=$.jstree.root),!(obj=this.get_node(obj)))return!1;var i,j,to_load=[],m=this._model.data,c=m[obj.id].children_d;for(obj.state&&!obj.state.loaded&&to_load.push(obj.id),i=0,j=c.length;i<j;i++)m[c[i]]&&m[c[i]].state&&!m[c[i]].state.loaded&&to_load.push(c[i])
;to_load.length?this._load_nodes(to_load,function(){this.load_all(obj,callback)}):(callback&&callback.call(this,obj),this.trigger("load_all",{node:obj}))},_load_node:function(obj,callback){var t,s=this.settings.core.data,notTextOrCommentNode=function(){return 3!==this.nodeType&&8!==this.nodeType};return s?$.isFunction(s)?s.call(this,obj,$.proxy(function(d){!1===d?callback.call(this,!1):this["string"==typeof d?"_append_html_data":"_append_json_data"](obj,"string"==typeof d?$($.parseHTML(d)).filter(notTextOrCommentNode):d,function(status){callback.call(this,status)})},this)):"object"==typeof s?s.url?(s=$.extend(!0,{},s),
$.isFunction(s.url)&&(s.url=s.url.call(this,obj)),$.isFunction(s.data)&&(s.data=s.data.call(this,obj)),$.ajax(s).done($.proxy(function(d,t,x){var type=x.getResponseHeader("Content-Type");return type&&-1!==type.indexOf("json")||"object"==typeof d?this._append_json_data(obj,d,function(status){callback.call(this,status)}):type&&-1!==type.indexOf("html")||"string"==typeof d?this._append_html_data(obj,$($.parseHTML(d)).filter(notTextOrCommentNode),function(status){callback.call(this,status)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:obj.id,xhr:x})},
this.settings.core.error.call(this,this._data.core.last_error),callback.call(this,!1))},this)).fail($.proxy(function(f){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:obj.id,xhr:f})},callback.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(t=$.isArray(s)?$.extend(!0,[],s):$.isPlainObject(s)?$.extend(!0,{},s):s,obj.id===$.jstree.root?this._append_json_data(obj,t,function(status){callback.call(this,status)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:obj.id})},
this.settings.core.error.call(this,this._data.core.last_error),callback.call(this,!1))):"string"==typeof s?obj.id===$.jstree.root?this._append_html_data(obj,$($.parseHTML(s)).filter(notTextOrCommentNode),function(status){callback.call(this,status)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:obj.id})},this.settings.core.error.call(this,this._data.core.last_error),callback.call(this,!1)):callback.call(this,!1):obj.id===$.jstree.root?this._append_html_data(obj,this._data.core.original_container_html.clone(!0),function(status){callback.call(this,status)}):callback.call(this,!1)},
_node_changed:function(obj){(obj=this.get_node(obj))&&-1===$.inArray(obj.id,this._model.changed)&&this._model.changed.push(obj.id)},_append_html_data:function(dom,data,cb){dom=this.get_node(dom),dom.children=[],dom.children_d=[];var tmp,i,j,dat=data.is("ul")?data.children():data,par=dom.id,chd=[],dpc=[],m=this._model.data,p=m[par],s=this._data.core.selected.length;for(dat.each($.proxy(function(i,v){(tmp=this._parse_model_from_html($(v),par,p.parents.concat()))&&(chd.push(tmp),dpc.push(tmp),m[tmp].children_d.length&&(dpc=dpc.concat(m[tmp].children_d)))},this)),p.children=chd,p.children_d=dpc,i=0,
j=p.parents.length;i<j;i++)m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);this.trigger("model",{nodes:dpc,parent:par}),par!==$.jstree.root?(this._node_changed(par),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==s&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),cb.call(this,!0)},_append_json_data:function(dom,data,cb,force_processing){if(null!==this.element){dom=this.get_node(dom),dom.children=[],dom.children_d=[],data.d&&"string"==typeof(data=data.d)&&(data=JSON.parse(data)),$.isArray(data)||(data=[data]);var w=null,args={
df:this._model.default_state,dat:data,par:dom.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},func=function(data,undefined){data.data&&(data=data.data);var tmp,i,j,rslt,dat=data.dat,par=data.par,chd=[],dpc=[],add=[],df=data.df,t_id=data.t_id,t_cnt=data.t_cnt,m=data.m,p=m[par],sel=data.sel,parse_flat=function(d,p,ps){ps=ps?ps.concat():[],p&&ps.unshift(p);var i,j,c,e,tid=d.id.toString(),tmp={id:tid,text:d.text||"",icon:d.icon===undefined||d.icon,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1}
;for(i in df)df.hasOwnProperty(i)&&(tmp.state[i]=df[i]);if(d&&d.data&&d.data.jstree&&d.data.jstree.icon&&(tmp.icon=d.data.jstree.icon),tmp.icon!==undefined&&null!==tmp.icon&&""!==tmp.icon||(tmp.icon=!0),d&&d.data&&(tmp.data=d.data,d.data.jstree))for(i in d.data.jstree)d.data.jstree.hasOwnProperty(i)&&(tmp.state[i]=d.data.jstree[i]);if(d&&"object"==typeof d.state)for(i in d.state)d.state.hasOwnProperty(i)&&(tmp.state[i]=d.state[i]);if(d&&"object"==typeof d.li_attr)for(i in d.li_attr)d.li_attr.hasOwnProperty(i)&&(tmp.li_attr[i]=d.li_attr[i]);if(tmp.li_attr.id||(tmp.li_attr.id=tid),
d&&"object"==typeof d.a_attr)for(i in d.a_attr)d.a_attr.hasOwnProperty(i)&&(tmp.a_attr[i]=d.a_attr[i]);for(d&&d.children&&!0===d.children&&(tmp.state.loaded=!1,tmp.children=[],tmp.children_d=[]),m[tmp.id]=tmp,i=0,j=tmp.children.length;i<j;i++)c=parse_flat(m[tmp.children[i]],tmp.id,ps),e=m[c],tmp.children_d.push(c),e.children_d.length&&(tmp.children_d=tmp.children_d.concat(e.children_d));return delete d.data,delete d.children,m[tmp.id].original=d,tmp.state.selected&&add.push(tmp.id),tmp.id},parse_nest=function(d,p,ps){ps=ps?ps.concat():[],p&&ps.unshift(p);var i,j,c,e,tmp,tid=!1;do{tid="j"+t_id+"_"+ ++t_cnt}while(m[tid]);tmp={id:!1,
text:"string"==typeof d?d:"",icon:"object"!=typeof d||d.icon===undefined||d.icon,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in df)df.hasOwnProperty(i)&&(tmp.state[i]=df[i]);if(d&&d.id&&(tmp.id=d.id.toString()),d&&d.text&&(tmp.text=d.text),d&&d.data&&d.data.jstree&&d.data.jstree.icon&&(tmp.icon=d.data.jstree.icon),tmp.icon!==undefined&&null!==tmp.icon&&""!==tmp.icon||(tmp.icon=!0),d&&d.data&&(tmp.data=d.data,d.data.jstree))for(i in d.data.jstree)d.data.jstree.hasOwnProperty(i)&&(tmp.state[i]=d.data.jstree[i])
;if(d&&"object"==typeof d.state)for(i in d.state)d.state.hasOwnProperty(i)&&(tmp.state[i]=d.state[i]);if(d&&"object"==typeof d.li_attr)for(i in d.li_attr)d.li_attr.hasOwnProperty(i)&&(tmp.li_attr[i]=d.li_attr[i]);if(tmp.li_attr.id&&!tmp.id&&(tmp.id=tmp.li_attr.id.toString()),tmp.id||(tmp.id=tid),tmp.li_attr.id||(tmp.li_attr.id=tmp.id),d&&"object"==typeof d.a_attr)for(i in d.a_attr)d.a_attr.hasOwnProperty(i)&&(tmp.a_attr[i]=d.a_attr[i]);if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++)c=parse_nest(d.children[i],tmp.id,ps),e=m[c],tmp.children.push(c),e.children_d.length&&(tmp.children_d=tmp.children_d.concat(e.children_d))
;tmp.children_d=tmp.children_d.concat(tmp.children)}return d&&d.children&&!0===d.children&&(tmp.state.loaded=!1,tmp.children=[],tmp.children_d=[]),delete d.data,delete d.children,tmp.original=d,m[tmp.id]=tmp,tmp.state.selected&&add.push(tmp.id),tmp.id};if(dat.length&&dat[0].id!==undefined&&dat[0].parent!==undefined){for(i=0,j=dat.length;i<j;i++)dat[i].children||(dat[i].children=[]),dat[i].state||(dat[i].state={}),m[dat[i].id.toString()]=dat[i];for(i=0,j=dat.length;i<j;i++)m[dat[i].parent.toString()]?(m[dat[i].parent.toString()].children.push(dat[i].id.toString()),p.children_d.push(dat[i].id.toString())):(this._data.core.last_error={error:"parse",
plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:dat[i].id.toString(),parent:dat[i].parent.toString()})},this.settings.core.error.call(this,this._data.core.last_error));for(i=0,j=p.children.length;i<j;i++)tmp=parse_flat(m[p.children[i]],par,p.parents.concat()),dpc.push(tmp),m[tmp].children_d.length&&(dpc=dpc.concat(m[tmp].children_d));for(i=0,j=p.parents.length;i<j;i++)m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);rslt={cnt:t_cnt,mod:m,sel:sel,par:par,dpc:dpc,add:add}}else{for(i=0,j=dat.length;i<j;i++)(tmp=parse_nest(dat[i],par,p.parents.concat()))&&(chd.push(tmp),dpc.push(tmp),
m[tmp].children_d.length&&(dpc=dpc.concat(m[tmp].children_d)));for(p.children=chd,p.children_d=dpc,i=0,j=p.parents.length;i<j;i++)m[p.parents[i]].children_d=m[p.parents[i]].children_d.concat(dpc);rslt={cnt:t_cnt,mod:m,sel:sel,par:par,dpc:dpc,add:add}}postMessage(rslt)},rslt=function(rslt,worker){if(null!==this.element){this._cnt=rslt.cnt;var i,m=this._model.data;for(i in m)m.hasOwnProperty(i)&&m[i].state&&m[i].state.loading&&rslt.mod[i]&&(rslt.mod[i].state.loading=!0);if(this._model.data=rslt.mod,worker){var j,a=rslt.add,r=rslt.sel,s=this._data.core.selected.slice();if(m=this._model.data,
r.length!==s.length||$.vakata.array_unique(r.concat(s)).length!==r.length){for(i=0,j=r.length;i<j;i++)-1===$.inArray(r[i],a)&&-1===$.inArray(r[i],s)&&(m[r[i]].state.selected=!1);for(i=0,j=s.length;i<j;i++)-1===$.inArray(s[i],r)&&(m[s[i]].state.selected=!0)}}rslt.add.length&&(this._data.core.selected=this._data.core.selected.concat(rslt.add)),this.trigger("model",{nodes:rslt.dpc,parent:rslt.par}),rslt.par!==$.jstree.root?(this._node_changed(rslt.par),this.redraw()):this.redraw(!0),rslt.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),cb.call(this,!0)}}
;if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+func.toString()],{type:"text/javascript"}))),!this._data.core.working||force_processing?(this._data.core.working=!0,w=new window.Worker(this._wrk),w.onmessage=$.proxy(function(e){rslt.call(this,e.data,!0);try{w.terminate(),w=null}catch(ignore){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),
args.par?w.postMessage(args):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([dom,data,cb,!0])}catch(e){rslt.call(this,func(args),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else rslt.call(this,func(args),!1)}},_parse_model_from_html:function(d,p,ps){ps=ps?[].concat(ps):[],p&&ps.unshift(p);var c,e,i,tmp,tid,m=this._model.data,data={id:!1,text:!1,icon:!0,parent:p,parents:ps,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{
href:"#"},original:!1};for(i in this._model.default_state)this._model.default_state.hasOwnProperty(i)&&(data.state[i]=this._model.default_state[i]);if(tmp=$.vakata.attributes(d,!0),$.each(tmp,function(i,v){if(v=$.trim(v),!v.length)return!0;data.li_attr[i]=v,"id"===i&&(data.id=v.toString())}),tmp=d.children("a").first(),tmp.length&&(tmp=$.vakata.attributes(tmp,!0),$.each(tmp,function(i,v){v=$.trim(v),v.length&&(data.a_attr[i]=v)})),tmp=d.children("a").first().length?d.children("a").first().clone():d.clone(),tmp.children("ins, i, ul").remove(),tmp=tmp.html(),tmp=$("<div />").html(tmp),data.text=this.settings.core.force_text?tmp.text():tmp.html(),tmp=d.data(),
data.data=tmp?$.extend(!0,{},tmp):null,data.state.opened=d.hasClass("jstree-open"),data.state.selected=d.children("a").hasClass("jstree-clicked"),data.state.disabled=d.children("a").hasClass("jstree-disabled"),data.data&&data.data.jstree)for(i in data.data.jstree)data.data.jstree.hasOwnProperty(i)&&(data.state[i]=data.data.jstree[i]);tmp=d.children("a").children(".jstree-themeicon"),tmp.length&&(data.icon=!tmp.hasClass("jstree-themeicon-hidden")&&tmp.attr("rel")),data.state.icon!==undefined&&(data.icon=data.state.icon),data.icon!==undefined&&null!==data.icon&&""!==data.icon||(data.icon=!0),tmp=d.children("ul").children("li");do{
tid="j"+this._id+"_"+ ++this._cnt}while(m[tid]);return data.id=data.li_attr.id?data.li_attr.id.toString():tid,tmp.length?(tmp.each($.proxy(function(i,v){c=this._parse_model_from_html($(v),data.id,ps),e=this._model.data[c],data.children.push(c),e.children_d.length&&(data.children_d=data.children_d.concat(e.children_d))},this)),data.children_d=data.children_d.concat(data.children)):d.hasClass("jstree-closed")&&(data.state.loaded=!1),data.li_attr.class&&(data.li_attr.class=data.li_attr.class.replace("jstree-closed","").replace("jstree-open","")),data.a_attr.class&&(data.a_attr.class=data.a_attr.class.replace("jstree-clicked","").replace("jstree-disabled","")),
m[data.id]=data,data.state.selected&&this._data.core.selected.push(data.id),data.id},_parse_model_from_flat_json:function(d,p,ps){ps=ps?ps.concat():[],p&&ps.unshift(p);var i,j,c,e,tid=d.id.toString(),m=this._model.data,df=this._model.default_state,tmp={id:tid,text:d.text||"",icon:d.icon===undefined||d.icon,parent:p,parents:ps,children:d.children||[],children_d:d.children_d||[],data:d.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in df)df.hasOwnProperty(i)&&(tmp.state[i]=df[i]);if(d&&d.data&&d.data.jstree&&d.data.jstree.icon&&(tmp.icon=d.data.jstree.icon),tmp.icon!==undefined&&null!==tmp.icon&&""!==tmp.icon||(tmp.icon=!0),
d&&d.data&&(tmp.data=d.data,d.data.jstree))for(i in d.data.jstree)d.data.jstree.hasOwnProperty(i)&&(tmp.state[i]=d.data.jstree[i]);if(d&&"object"==typeof d.state)for(i in d.state)d.state.hasOwnProperty(i)&&(tmp.state[i]=d.state[i]);if(d&&"object"==typeof d.li_attr)for(i in d.li_attr)d.li_attr.hasOwnProperty(i)&&(tmp.li_attr[i]=d.li_attr[i]);if(tmp.li_attr.id||(tmp.li_attr.id=tid),d&&"object"==typeof d.a_attr)for(i in d.a_attr)d.a_attr.hasOwnProperty(i)&&(tmp.a_attr[i]=d.a_attr[i]);for(d&&d.children&&!0===d.children&&(tmp.state.loaded=!1,tmp.children=[],tmp.children_d=[]),m[tmp.id]=tmp,i=0,
j=tmp.children.length;i<j;i++)c=this._parse_model_from_flat_json(m[tmp.children[i]],tmp.id,ps),e=m[c],tmp.children_d.push(c),e.children_d.length&&(tmp.children_d=tmp.children_d.concat(e.children_d));return delete d.data,delete d.children,m[tmp.id].original=d,tmp.state.selected&&this._data.core.selected.push(tmp.id),tmp.id},_parse_model_from_json:function(d,p,ps){ps=ps?ps.concat():[],p&&ps.unshift(p);var i,j,c,e,tmp,tid=!1,m=this._model.data,df=this._model.default_state;do{tid="j"+this._id+"_"+ ++this._cnt}while(m[tid]);tmp={id:!1,text:"string"==typeof d?d:"",icon:"object"!=typeof d||d.icon===undefined||d.icon,parent:p,parents:ps,children:[],children_d:[],
data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in df)df.hasOwnProperty(i)&&(tmp.state[i]=df[i]);if(d&&d.id&&(tmp.id=d.id.toString()),d&&d.text&&(tmp.text=d.text),d&&d.data&&d.data.jstree&&d.data.jstree.icon&&(tmp.icon=d.data.jstree.icon),tmp.icon!==undefined&&null!==tmp.icon&&""!==tmp.icon||(tmp.icon=!0),d&&d.data&&(tmp.data=d.data,d.data.jstree))for(i in d.data.jstree)d.data.jstree.hasOwnProperty(i)&&(tmp.state[i]=d.data.jstree[i]);if(d&&"object"==typeof d.state)for(i in d.state)d.state.hasOwnProperty(i)&&(tmp.state[i]=d.state[i])
;if(d&&"object"==typeof d.li_attr)for(i in d.li_attr)d.li_attr.hasOwnProperty(i)&&(tmp.li_attr[i]=d.li_attr[i]);if(tmp.li_attr.id&&!tmp.id&&(tmp.id=tmp.li_attr.id.toString()),tmp.id||(tmp.id=tid),tmp.li_attr.id||(tmp.li_attr.id=tmp.id),d&&"object"==typeof d.a_attr)for(i in d.a_attr)d.a_attr.hasOwnProperty(i)&&(tmp.a_attr[i]=d.a_attr[i]);if(d&&d.children&&d.children.length){for(i=0,j=d.children.length;i<j;i++)c=this._parse_model_from_json(d.children[i],tmp.id,ps),e=m[c],tmp.children.push(c),e.children_d.length&&(tmp.children_d=tmp.children_d.concat(e.children_d));tmp.children_d=tmp.children_d.concat(tmp.children)}
return d&&d.children&&!0===d.children&&(tmp.state.loaded=!1,tmp.children=[],tmp.children_d=[]),delete d.data,delete d.children,tmp.original=d,m[tmp.id]=tmp,tmp.state.selected&&this._data.core.selected.push(tmp.id),tmp.id},_redraw:function(){var tmp,i,j,nodes=this._model.force_full_redraw?this._model.data[$.jstree.root].children.concat([]):this._model.changed.concat([]),f=document.createElement("UL"),fe=this._data.core.focused;for(i=0,j=nodes.length;i<j;i++)(tmp=this.redraw_node(nodes[i],!0,this._model.force_full_redraw))&&this._model.force_full_redraw&&f.appendChild(tmp);this._model.force_full_redraw&&(f.className=this.get_container_ul()[0].className,
f.setAttribute("role","group"),this.element.empty().append(f)),null!==fe&&(tmp=this.get_node(fe,!0),tmp&&tmp.length&&tmp.children(".jstree-anchor")[0]!==document.activeElement?tmp.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:nodes})},redraw:function(full){full&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(node){var obj=this.get_node(node),i=!1,j=!1,k=!1,d=document;if(!obj)return!1;if(obj.id===$.jstree.root)return this.redraw(!0);if(!(node=this.get_node(node,!0))||!node.length)return!1
;if(node.children(".jstree-children").remove(),node=node[0],obj.children.length&&obj.state.loaded){for(k=d.createElement("UL"),k.setAttribute("role","group"),k.className="jstree-children",i=0,j=obj.children.length;i<j;i++)k.appendChild(this.redraw_node(obj.children[i],!0,!0));node.appendChild(k)}},redraw_node:function(node,deep,is_callback,force_render){var obj=this.get_node(node),par=!1,ind=!1,old=!1,i=!1,j=!1,k=!1,c="",d=document,m=this._model.data,f=!1,tmp=null,t=0,l=0,has_children=!1,last_sibling=!1;if(!obj)return!1;if(obj.id===$.jstree.root)return this.redraw(!0);if(deep=deep||0===obj.children.length,
node=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(obj.id[0])?"\\3"+obj.id[0]+" "+obj.id.substr(1).replace($.jstree.idregex,"\\$&"):obj.id.replace($.jstree.idregex,"\\$&"))):document.getElementById(obj.id))node=$(node),is_callback||(par=node.parent().parent()[0],par===this.element[0]&&(par=null),ind=node.index()),deep||!obj.children.length||node.children(".jstree-children").length||(deep=!0),deep||(old=node.children(".jstree-children")[0]),f=node.children(".jstree-anchor")[0]===document.activeElement,node.remove();else if(deep=!0,!is_callback){
if(!(null===(par=obj.parent!==$.jstree.root?$("#"+obj.parent.replace($.jstree.idregex,"\\$&"),this.element)[0]:null)||par&&m[obj.parent].state.opened))return!1;ind=$.inArray(obj.id,null===par?m[$.jstree.root].children:m[obj.parent].children)}node=this._data.core.node.cloneNode(!0),c="jstree-node ";for(i in obj.li_attr)if(obj.li_attr.hasOwnProperty(i)){if("id"===i)continue;"class"!==i?node.setAttribute(i,obj.li_attr[i]):c+=obj.li_attr[i]}for(obj.a_attr.id||(obj.a_attr.id=obj.id+"_anchor"),node.setAttribute("aria-selected",!!obj.state.selected),node.setAttribute("aria-level",obj.parents.length),node.setAttribute("aria-labelledby",obj.a_attr.id),
obj.state.disabled&&node.setAttribute("aria-disabled",!0),i=0,j=obj.children.length;i<j;i++)if(!m[obj.children[i]].state.hidden){has_children=!0;break}if(null!==obj.parent&&m[obj.parent]&&!obj.state.hidden&&(i=$.inArray(obj.id,m[obj.parent].children),last_sibling=obj.id,-1!==i))for(i++,j=m[obj.parent].children.length;i<j&&(m[m[obj.parent].children[i]].state.hidden||(last_sibling=m[obj.parent].children[i]),last_sibling===obj.id);i++);obj.state.hidden&&(c+=" jstree-hidden"),obj.state.loading&&(c+=" jstree-loading"),obj.state.loaded&&!has_children?c+=" jstree-leaf":(c+=obj.state.opened&&obj.state.loaded?" jstree-open":" jstree-closed",
node.setAttribute("aria-expanded",obj.state.opened&&obj.state.loaded)),last_sibling===obj.id&&(c+=" jstree-last"),node.id=obj.id,node.className=c,c=(obj.state.selected?" jstree-clicked":"")+(obj.state.disabled?" jstree-disabled":"");for(j in obj.a_attr)if(obj.a_attr.hasOwnProperty(j)){if("href"===j&&"#"===obj.a_attr[j])continue;"class"!==j?node.childNodes[1].setAttribute(j,obj.a_attr[j]):c+=" "+obj.a_attr[j]}if(c.length&&(node.childNodes[1].className="jstree-anchor "+c),
(obj.icon&&!0!==obj.icon||!1===obj.icon)&&(!1===obj.icon?node.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===obj.icon.indexOf("/")&&-1===obj.icon.indexOf(".")?node.childNodes[1].childNodes[0].className+=" "+obj.icon+" jstree-themeicon-custom":(node.childNodes[1].childNodes[0].style.backgroundImage='url("'+obj.icon+'")',node.childNodes[1].childNodes[0].style.backgroundPosition="center center",node.childNodes[1].childNodes[0].style.backgroundSize="auto",node.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),
this.settings.core.force_text?node.childNodes[1].appendChild(d.createTextNode(obj.text)):node.childNodes[1].innerHTML+=obj.text,deep&&obj.children.length&&(obj.state.opened||force_render)&&obj.state.loaded){for(k=d.createElement("UL"),k.setAttribute("role","group"),k.className="jstree-children",i=0,j=obj.children.length;i<j;i++)k.appendChild(this.redraw_node(obj.children[i],deep,!0));node.appendChild(k)}if(old&&node.appendChild(old),!is_callback){for(par||(par=this.element[0]),i=0,j=par.childNodes.length;i<j;i++)if(par.childNodes[i]&&par.childNodes[i].className&&-1!==par.childNodes[i].className.indexOf("jstree-children")){tmp=par.childNodes[i];break}
tmp||(tmp=d.createElement("UL"),tmp.setAttribute("role","group"),tmp.className="jstree-children",par.appendChild(tmp)),par=tmp,ind<par.childNodes.length?par.insertBefore(node,par.childNodes[ind]):par.appendChild(node),f&&(t=this.element[0].scrollTop,l=this.element[0].scrollLeft,node.childNodes[1].focus(),this.element[0].scrollTop=t,this.element[0].scrollLeft=l)}return obj.state.opened&&!obj.state.loaded&&(obj.state.opened=!1,setTimeout($.proxy(function(){this.open_node(obj.id,!1,0)},this),0)),node},open_node:function(obj,callback,animation){var t1,t2,d,t;if($.isArray(obj)){for(obj=obj.slice(),t1=0,
t2=obj.length;t1<t2;t1++)this.open_node(obj[t1],callback,animation);return!0}return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root)&&(animation=animation===undefined?this.settings.core.animation:animation,this.is_closed(obj)?this.is_loaded(obj)?(d=this.get_node(obj,!0),t=this,d.length&&(animation&&d.children(".jstree-children").length&&d.children(".jstree-children").stop(!0,!0),obj.children.length&&!this._firstChild(d.children(".jstree-children")[0])&&this.draw_children(obj),animation?(this.trigger("before_open",{node:obj}),
d.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(animation,function(){this.style.display="",t.element&&t.trigger("after_open",{node:obj})})):(this.trigger("before_open",{node:obj}),d[0].className=d[0].className.replace("jstree-closed","jstree-open"),d[0].setAttribute("aria-expanded",!0))),obj.state.opened=!0,callback&&callback.call(this,obj,!0),d.length||this.trigger("before_open",{node:obj}),this.trigger("open_node",{node:obj}),animation&&d.length||this.trigger("after_open",{node:obj}),
!0):this.is_loading(obj)?setTimeout($.proxy(function(){this.open_node(obj,callback,animation)},this),500):void this.load_node(obj,function(o,ok){return ok?this.open_node(o,callback,animation):!!callback&&callback.call(this,o,!1)}):(callback&&callback.call(this,obj,!1),!1))},_open_to:function(obj){if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;var i,j,p=obj.parents;for(i=0,j=p.length;i<j;i+=1)i!==$.jstree.root&&this.open_node(p[i],!1,0);return $("#"+obj.id.replace($.jstree.idregex,"\\$&"),this.element)},close_node:function(obj,animation){var t1,t2,t,d;if($.isArray(obj)){for(obj=obj.slice(),t1=0,
t2=obj.length;t1<t2;t1++)this.close_node(obj[t1],animation);return!0}return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root)&&!this.is_closed(obj)&&(animation=animation===undefined?this.settings.core.animation:animation,t=this,d=this.get_node(obj,!0),obj.state.opened=!1,this.trigger("close_node",{node:obj}),void(d.length?animation?d.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(animation,function(){this.style.display="",d.children(".jstree-children").remove(),t.element&&t.trigger("after_close",{
node:obj})}):(d[0].className=d[0].className.replace("jstree-open","jstree-closed"),d.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:obj})):this.trigger("after_close",{node:obj})))},toggle_node:function(obj){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.toggle_node(obj[t1]);return!0}return this.is_closed(obj)?this.open_node(obj):this.is_open(obj)?this.close_node(obj):void 0},open_all:function(obj,animation,original_obj){if(obj||(obj=$.jstree.root),!(obj=this.get_node(obj)))return!1;var i,j,_this,dom=obj.id===$.jstree.root?this.get_container_ul():this.get_node(obj,!0)
;if(!dom.length){for(i=0,j=obj.children_d.length;i<j;i++)this.is_closed(this._model.data[obj.children_d[i]])&&(this._model.data[obj.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:obj})}original_obj=original_obj||dom,_this=this,dom=this.is_closed(obj)?dom.find(".jstree-closed").addBack():dom.find(".jstree-closed"),dom.each(function(){_this.open_node(this,function(node,status){status&&this.is_parent(node)&&this.open_all(node,animation,original_obj)},animation||0)}),0===original_obj.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(original_obj)})},close_all:function(obj,animation){if(obj||(obj=$.jstree.root),
!(obj=this.get_node(obj)))return!1;var i,j,dom=obj.id===$.jstree.root?this.get_container_ul():this.get_node(obj,!0),_this=this;for(dom.length&&(dom=this.is_open(obj)?dom.find(".jstree-open").addBack():dom.find(".jstree-open"),$(dom.get().reverse()).each(function(){_this.close_node(this,animation||0)})),i=0,j=obj.children_d.length;i<j;i++)this._model.data[obj.children_d[i]].state.opened=!1;this.trigger("close_all",{node:obj})},is_disabled:function(obj){return(obj=this.get_node(obj))&&obj.state&&obj.state.disabled},enable_node:function(obj){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.enable_node(obj[t1]);return!0}
if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;obj.state.disabled=!1,this.get_node(obj,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:obj})},disable_node:function(obj){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.disable_node(obj[t1]);return!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;obj.state.disabled=!0,this.get_node(obj,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:obj})},is_hidden:function(obj){return obj=this.get_node(obj),
!0===obj.state.hidden},hide_node:function(obj,skip_redraw){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.hide_node(obj[t1],!0);return skip_redraw||this.redraw(),!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;obj.state.hidden||(obj.state.hidden=!0,this._node_changed(obj.parent),skip_redraw||this.redraw(),this.trigger("hide_node",{node:obj}))},show_node:function(obj,skip_redraw){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.show_node(obj[t1],!0);return skip_redraw||this.redraw(),!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1
;obj.state.hidden&&(obj.state.hidden=!1,this._node_changed(obj.parent),skip_redraw||this.redraw(),this.trigger("show_node",{node:obj}))},hide_all:function(skip_redraw){var i,m=this._model.data,ids=[];for(i in m)m.hasOwnProperty(i)&&i!==$.jstree.root&&!m[i].state.hidden&&(m[i].state.hidden=!0,ids.push(i));return this._model.force_full_redraw=!0,skip_redraw||this.redraw(),this.trigger("hide_all",{nodes:ids}),ids},show_all:function(skip_redraw){var i,m=this._model.data,ids=[];for(i in m)m.hasOwnProperty(i)&&i!==$.jstree.root&&m[i].state.hidden&&(m[i].state.hidden=!1,ids.push(i));return this._model.force_full_redraw=!0,skip_redraw||this.redraw(),
this.trigger("show_all",{nodes:ids}),ids},activate_node:function(obj,e){if(this.is_disabled(obj))return!1;if(e&&"object"==typeof e||(e={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==undefined?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),
this.settings.core.multiple&&(e.metaKey||e.ctrlKey||e.shiftKey)&&(!e.shiftKey||this._data.core.last_clicked&&this.get_parent(obj)&&this.get_parent(obj)===this._data.core.last_clicked.parent))if(e.shiftKey){var i,j,o=this.get_node(obj).id,l=this._data.core.last_clicked.id,p=this.get_node(this._data.core.last_clicked.parent).children,c=!1;for(i=0,j=p.length;i<j;i+=1)p[i]===o&&(c=!c),p[i]===l&&(c=!c),this.is_disabled(p[i])||!c&&p[i]!==o&&p[i]!==l?this.deselect_node(p[i],!0,e):this.is_hidden(p[i])||this.select_node(p[i],!0,!1,e);this.trigger("changed",{action:"select_node",node:this.get_node(obj),selected:this._data.core.selected,event:e})
}else this.is_selected(obj)?this.deselect_node(obj,!1,e):this.select_node(obj,!1,!1,e);else!this.settings.core.multiple&&(e.metaKey||e.ctrlKey||e.shiftKey)&&this.is_selected(obj)?this.deselect_node(obj,!1,e):(this.deselect_all(!0),this.select_node(obj,!1,!1,e),this._data.core.last_clicked=this.get_node(obj));this.trigger("activate_node",{node:this.get_node(obj),event:e})},hover_node:function(obj){if(!(obj=this.get_node(obj,!0))||!obj.length||obj.children(".jstree-hovered").length)return!1;var o=this.element.find(".jstree-hovered"),t=this.element;o&&o.length&&this.dehover_node(o),obj.children(".jstree-anchor").addClass("jstree-hovered"),
this.trigger("hover_node",{node:this.get_node(obj)}),setTimeout(function(){t.attr("aria-activedescendant",obj[0].id)},0)},dehover_node:function(obj){if(!(obj=this.get_node(obj,!0))||!obj.length||!obj.children(".jstree-hovered").length)return!1;obj.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(obj)})},select_node:function(obj,supress_event,prevent_open,e){var dom,t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.select_node(obj[t1],supress_event,prevent_open,e);return!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;dom=this.get_node(obj,!0),
obj.state.selected||(obj.state.selected=!0,this._data.core.selected.push(obj.id),prevent_open||(dom=this._open_to(obj)),dom&&dom.length&&dom.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:obj,selected:this._data.core.selected,event:e}),supress_event||this.trigger("changed",{action:"select_node",node:obj,selected:this._data.core.selected,event:e}))},deselect_node:function(obj,supress_event,e){var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.deselect_node(obj[t1],supress_event,e);return!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1
;dom=this.get_node(obj,!0),obj.state.selected&&(obj.state.selected=!1,this._data.core.selected=$.vakata.array_remove_item(this._data.core.selected,obj.id),dom.length&&dom.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:obj,selected:this._data.core.selected,event:e}),supress_event||this.trigger("changed",{action:"deselect_node",node:obj,selected:this._data.core.selected,event:e}))},select_all:function(supress_event){var i,j,tmp=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[$.jstree.root].children_d.concat(),i=0,
j=this._data.core.selected.length;i<j;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),supress_event||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:tmp})},deselect_all:function(supress_event){var i,j,tmp=this._data.core.selected.concat([]);for(i=0,j=this._data.core.selected.length;i<j;i++)this._model.data[this._data.core.selected[i]]&&(this._model.data[this._data.core.selected[i]].state.selected=!1);this._data.core.selected=[],
this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:tmp}),supress_event||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:tmp})},is_selected:function(obj){return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root)&&obj.state.selected},get_selected:function(full){return full?$.map(this._data.core.selected,$.proxy(function(i){return this.get_node(i)},this)):this._data.core.selected.slice()},get_top_selected:function(full){var i,j,k,l,tmp=this.get_selected(!0),obj={};for(i=0,
j=tmp.length;i<j;i++)obj[tmp[i].id]=tmp[i];for(i=0,j=tmp.length;i<j;i++)for(k=0,l=tmp[i].children_d.length;k<l;k++)obj[tmp[i].children_d[k]]&&delete obj[tmp[i].children_d[k]];tmp=[];for(i in obj)obj.hasOwnProperty(i)&&tmp.push(i);return full?$.map(tmp,$.proxy(function(i){return this.get_node(i)},this)):tmp},get_bottom_selected:function(full){var i,j,tmp=this.get_selected(!0),obj=[];for(i=0,j=tmp.length;i<j;i++)tmp[i].children.length||obj.push(tmp[i].id);return full?$.map(obj,$.proxy(function(i){return this.get_node(i)},this)):obj},get_state:function(){var i,state={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},
selected:[]}};for(i in this._model.data)this._model.data.hasOwnProperty(i)&&i!==$.jstree.root&&(this._model.data[i].state.loaded&&this.settings.core.loaded_state&&state.core.loaded.push(i),this._model.data[i].state.opened&&state.core.open.push(i),this._model.data[i].state.selected&&state.core.selected.push(i));return state},set_state:function(state,callback){if(state){if(state.core&&state.core.selected&&state.core.initial_selection===undefined&&(state.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),state.core){var _this,i
;if(state.core.loaded)return this.settings.core.loaded_state&&$.isArray(state.core.loaded)&&state.core.loaded.length?this._load_nodes(state.core.loaded,function(nodes){delete state.core.loaded,this.set_state(state,callback)}):(delete state.core.loaded,this.set_state(state,callback)),!1;if(state.core.open)return $.isArray(state.core.open)&&state.core.open.length?this._load_nodes(state.core.open,function(nodes){this.open_node(nodes,!1,0),delete state.core.open,this.set_state(state,callback)}):(delete state.core.open,this.set_state(state,callback)),!1
;if(state.core.scroll)return state.core.scroll&&state.core.scroll.left!==undefined&&this.element.scrollLeft(state.core.scroll.left),state.core.scroll&&state.core.scroll.top!==undefined&&this.element.scrollTop(state.core.scroll.top),delete state.core.scroll,this.set_state(state,callback),!1;if(state.core.selected)return _this=this,state.core.initial_selection!==undefined&&state.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),$.each(state.core.selected,function(i,v){_this.select_node(v,!1,!0)})),delete state.core.initial_selection,delete state.core.selected,this.set_state(state,callback),!1
;for(i in state)state.hasOwnProperty(i)&&"core"!==i&&-1===$.inArray(i,this.settings.plugins)&&delete state[i];if($.isEmptyObject(state.core))return delete state.core,this.set_state(state,callback),!1}return!$.isEmptyObject(state)||(state=null,callback&&callback.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(skip_loading,forget_state){this._data.core.state=!0===forget_state?{}:this.get_state(),forget_state&&$.isFunction(forget_state)&&(this._data.core.state=forget_state.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[$.jstree.root]={id:$.jstree.root,parent:null,parents:[],children:[],children_d:[],
state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var c=this.get_container_ul()[0].className;skip_loading||(this.element.html("<ul class='"+c+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node($.jstree.root,function(o,s){s&&(this.get_container_ul()[0].className=c,
this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state($.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(obj){if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;var opened=[],to_load=[],s=this._data.core.selected.concat([]);to_load.push(obj.id),!0===obj.state.opened&&opened.push(obj.id),this.get_node(obj,!0).find(".jstree-open").each(function(){to_load.push(this.id),opened.push(this.id)}),this._load_nodes(to_load,$.proxy(function(nodes){this.open_node(opened,!1,0),
this.select_node(s),this.trigger("refresh_node",{node:obj,nodes:nodes})},this),!1,!0)},set_id:function(obj,id){if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;var i,j,m=this._model.data,old=obj.id;for(id=id.toString(),m[obj.parent].children[$.inArray(obj.id,m[obj.parent].children)]=id,i=0,j=obj.parents.length;i<j;i++)m[obj.parents[i]].children_d[$.inArray(obj.id,m[obj.parents[i]].children_d)]=id;for(i=0,j=obj.children.length;i<j;i++)m[obj.children[i]].parent=id;for(i=0,j=obj.children_d.length;i<j;i++)m[obj.children_d[i]].parents[$.inArray(obj.id,m[obj.children_d[i]].parents)]=id;return i=$.inArray(obj.id,this._data.core.selected),
-1!==i&&(this._data.core.selected[i]=id),i=this.get_node(obj.id,!0),i&&(i.attr("id",id),this.element.attr("aria-activedescendant")===obj.id&&this.element.attr("aria-activedescendant",id)),delete m[obj.id],obj.id=id,obj.li_attr.id=id,m[id]=obj,this.trigger("set_id",{node:obj,new:obj.id,old:old}),!0},get_text:function(obj){return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root)&&obj.text},set_text:function(obj,val){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.set_text(obj[t1],val);return!0}return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root||(obj.text=val,this.get_node(obj,!0).length&&this.redraw_node(obj.id),
this.trigger("set_text",{obj:obj,text:val}),0))},get_json:function(obj,options,flat){if(!(obj=this.get_node(obj||$.jstree.root)))return!1;options&&options.flat&&!flat&&(flat=[]);var i,j,tmp={id:obj.id,text:obj.text,icon:this.get_icon(obj),li_attr:$.extend(!0,{},obj.li_attr),a_attr:$.extend(!0,{},obj.a_attr),state:{},data:(!options||!options.no_data)&&$.extend(!0,$.isArray(obj.data)?[]:{},obj.data)};if(options&&options.flat?tmp.parent=obj.parent:tmp.children=[],options&&options.no_state)delete tmp.state;else for(i in obj.state)obj.state.hasOwnProperty(i)&&(tmp.state[i]=obj.state[i]);if(options&&options.no_li_attr&&delete tmp.li_attr,
options&&options.no_a_attr&&delete tmp.a_attr,options&&options.no_id&&(delete tmp.id,tmp.li_attr&&tmp.li_attr.id&&delete tmp.li_attr.id,tmp.a_attr&&tmp.a_attr.id&&delete tmp.a_attr.id),options&&options.flat&&obj.id!==$.jstree.root&&flat.push(tmp),!options||!options.no_children)for(i=0,j=obj.children.length;i<j;i++)options&&options.flat?this.get_json(obj.children[i],options,flat):tmp.children.push(this.get_json(obj.children[i],options));return options&&options.flat?flat:obj.id===$.jstree.root?tmp.children:tmp},create_node:function(par,node,pos,callback,is_loaded){if(null===par&&(par=$.jstree.root),!(par=this.get_node(par)))return!1
;if(pos=pos===undefined?"last":pos,!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par))return this.load_node(par,function(){this.create_node(par,node,pos,callback,!0)});node||(node={text:this.get_string("New node")}),node="string"==typeof node?{text:node}:$.extend(!0,{},node),node.text===undefined&&(node.text=this.get_string("New node"));var tmp,dpc,i,j;switch(par.id===$.jstree.root&&("before"===pos&&(pos="first"),"after"===pos&&(pos="last")),pos){case"before":tmp=this.get_node(par.parent),pos=$.inArray(par.id,tmp.children),par=tmp;break;case"after":tmp=this.get_node(par.parent),pos=$.inArray(par.id,tmp.children)+1,par=tmp;break
;case"inside":case"first":pos=0;break;case"last":pos=par.children.length;break;default:pos||(pos=0)}if(pos>par.children.length&&(pos=par.children.length),node.id||(node.id=!0),!this.check("create_node",node,par,pos))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!0===node.id&&delete node.id,!(node=this._parse_model_from_json(node,par.id,par.parents.concat())))return!1;for(tmp=this.get_node(node),dpc=[],dpc.push(node),dpc=dpc.concat(tmp.children_d),this.trigger("model",{nodes:dpc,parent:par.id}),par.children_d=par.children_d.concat(dpc),i=0,
j=par.parents.length;i<j;i++)this._model.data[par.parents[i]].children_d=this._model.data[par.parents[i]].children_d.concat(dpc);for(node=tmp,tmp=[],i=0,j=par.children.length;i<j;i++)tmp[i>=pos?i+1:i]=par.children[i];return tmp[pos]=node.id,par.children=tmp,this.redraw_node(par,!0),this.trigger("create_node",{node:this.get_node(node),parent:par.id,position:pos}),callback&&callback.call(this,this.get_node(node)),node.id},rename_node:function(obj,val){var t1,t2,old;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.rename_node(obj[t1],val);return!0}return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root||(old=obj.text,
this.check("rename_node",obj,this.get_parent(obj),val)?(this.set_text(obj,val),this.trigger("rename_node",{node:obj,text:val,old:old}),0):(this.settings.core.error.call(this,this._data.core.last_error),1)))},delete_node:function(obj){var t1,t2,par,pos,tmp,i,j,k,l,c,top,lft;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.delete_node(obj[t1]);return!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;if(par=this.get_node(obj.parent),pos=$.inArray(obj.id,par.children),c=!1,!this.check("delete_node",obj,par,pos))return this.settings.core.error.call(this,this._data.core.last_error),!1
;for(-1!==pos&&(par.children=$.vakata.array_remove(par.children,pos)),tmp=obj.children_d.concat([]),tmp.push(obj.id),i=0,j=obj.parents.length;i<j;i++)this._model.data[obj.parents[i]].children_d=$.vakata.array_filter(this._model.data[obj.parents[i]].children_d,function(v){return-1===$.inArray(v,tmp)});for(k=0,l=tmp.length;k<l;k++)if(this._model.data[tmp[k]].state.selected){c=!0;break}for(c&&(this._data.core.selected=$.vakata.array_filter(this._data.core.selected,function(v){return-1===$.inArray(v,tmp)})),this.trigger("delete_node",{node:obj,parent:par.id}),c&&this.trigger("changed",{action:"delete_node",node:obj,selected:this._data.core.selected,parent:par.id
}),k=0,l=tmp.length;k<l;k++)delete this._model.data[tmp[k]];return-1!==$.inArray(this._data.core.focused,tmp)&&(this._data.core.focused=null,top=this.element[0].scrollTop,lft=this.element[0].scrollLeft,par.id===$.jstree.root?this._model.data[$.jstree.root].children[0]&&this.get_node(this._model.data[$.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(par,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=top,this.element[0].scrollLeft=lft),this.redraw_node(par,!0),!0},check:function(chk,obj,par,pos,more){obj=obj&&obj.id?obj:this.get_node(obj),par=par&&par.id?par:this.get_node(par)
;var tmp=chk.match(/^move_node|copy_node|create_node$/i)?par:obj,chc=this.settings.core.check_callback;return"move_node"!==chk&&"copy_node"!==chk||more&&more.is_multi||obj.id!==par.id&&("move_node"!==chk||$.inArray(obj.id,par.children)!==pos)&&-1===$.inArray(par.id,obj.children_d)?(tmp&&tmp.data&&(tmp=tmp.data),tmp&&tmp.functions&&(!1===tmp.functions[chk]||!0===tmp.functions[chk])?(!1===tmp.functions[chk]&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),
tmp.functions[chk]):!(!1===chc||$.isFunction(chc)&&!1===chc.call(this,chk,obj,par,pos,more)||chc&&!1===chc[chk])||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1)):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1)},last_error:function(){return this._data.core.last_error},
move_node:function(obj,par,pos,callback,is_loaded,skip_redraw,origin){var t1,t2,old_par,old_pos,new_par,old_ins,is_multi,dpc,tmp,i,j,k,l,p;if(par=this.get_node(par),pos=pos===undefined?0:pos,!par)return!1;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par))return this.load_node(par,function(){this.move_node(obj,par,pos,callback,!0,!1,origin)});if($.isArray(obj)){if(1!==obj.length){for(t1=0,t2=obj.length;t1<t2;t1++)(tmp=this.move_node(obj[t1],par,pos,callback,is_loaded,!1,origin))&&(par=tmp,pos="after");return this.redraw(),!0}obj=obj[0]}if(!(obj=obj&&obj.id?obj:this.get_node(obj))||obj.id===$.jstree.root)return!1
;if(old_par=(obj.parent||$.jstree.root).toString(),new_par=pos.toString().match(/^(before|after)$/)&&par.id!==$.jstree.root?this.get_node(par.parent):par,old_ins=origin||(this._model.data[obj.id]?this:$.jstree.reference(obj.id)),is_multi=!old_ins||!old_ins._id||this._id!==old_ins._id,old_pos=old_ins&&old_ins._id&&old_par&&old_ins._model.data[old_par]&&old_ins._model.data[old_par].children?$.inArray(obj.id,old_ins._model.data[old_par].children):-1,old_ins&&old_ins._id&&(obj=old_ins._model.data[obj.id]),is_multi)return!!(tmp=this.copy_node(obj,par,pos,callback,is_loaded,!1,origin))&&(old_ins&&old_ins.delete_node(obj),tmp)
;switch(par.id===$.jstree.root&&("before"===pos&&(pos="first"),"after"===pos&&(pos="last")),pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:pos||(pos=0)}if(pos>new_par.children.length&&(pos=new_par.children.length),!this.check("move_node",obj,new_par,pos,{core:!0,origin:origin,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(obj.parent===new_par.id){
for(dpc=new_par.children.concat(),tmp=$.inArray(obj.id,dpc),-1!==tmp&&(dpc=$.vakata.array_remove(dpc,tmp),pos>tmp&&pos--),tmp=[],i=0,j=dpc.length;i<j;i++)tmp[i>=pos?i+1:i]=dpc[i];tmp[pos]=obj.id,new_par.children=tmp,this._node_changed(new_par.id),this.redraw(new_par.id===$.jstree.root)}else{for(tmp=obj.children_d.concat(),tmp.push(obj.id),i=0,j=obj.parents.length;i<j;i++){for(dpc=[],p=old_ins._model.data[obj.parents[i]].children_d,k=0,l=p.length;k<l;k++)-1===$.inArray(p[k],tmp)&&dpc.push(p[k]);old_ins._model.data[obj.parents[i]].children_d=dpc}for(old_ins._model.data[old_par].children=$.vakata.array_remove_item(old_ins._model.data[old_par].children,obj.id),
i=0,j=new_par.parents.length;i<j;i++)this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(tmp);for(dpc=[],i=0,j=new_par.children.length;i<j;i++)dpc[i>=pos?i+1:i]=new_par.children[i];for(dpc[pos]=obj.id,new_par.children=dpc,new_par.children_d.push(obj.id),new_par.children_d=new_par.children_d.concat(obj.children_d),obj.parent=new_par.id,tmp=new_par.parents.concat(),tmp.unshift(new_par.id),p=obj.parents.length,obj.parents=tmp,tmp=tmp.concat(),i=0,j=obj.children_d.length;i<j;i++)this._model.data[obj.children_d[i]].parents=this._model.data[obj.children_d[i]].parents.slice(0,-1*p),
Array.prototype.push.apply(this._model.data[obj.children_d[i]].parents,tmp);old_par!==$.jstree.root&&new_par.id!==$.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(old_par),this._node_changed(new_par.id)),skip_redraw||this.redraw()}return callback&&callback.call(this,obj,new_par,pos),this.trigger("move_node",{node:obj,parent:new_par.id,position:pos,old_parent:old_par,old_position:old_pos,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id,old_instance:old_ins,new_instance:this}),obj.id},copy_node:function(obj,par,pos,callback,is_loaded,skip_redraw,origin){
var t1,t2,dpc,tmp,i,j,node,old_par,new_par,old_ins;if(par=this.get_node(par),pos=pos===undefined?0:pos,!par)return!1;if(!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par))return this.load_node(par,function(){this.copy_node(obj,par,pos,callback,!0,!1,origin)});if($.isArray(obj)){if(1!==obj.length){for(t1=0,t2=obj.length;t1<t2;t1++)(tmp=this.copy_node(obj[t1],par,pos,callback,is_loaded,!0,origin))&&(par=tmp,pos="after");return this.redraw(),!0}obj=obj[0]}if(!(obj=obj&&obj.id?obj:this.get_node(obj))||obj.id===$.jstree.root)return!1;switch(old_par=(obj.parent||$.jstree.root).toString(),
new_par=pos.toString().match(/^(before|after)$/)&&par.id!==$.jstree.root?this.get_node(par.parent):par,old_ins=origin||(this._model.data[obj.id]?this:$.jstree.reference(obj.id)),!old_ins||!old_ins._id||(this._id,old_ins._id),old_ins&&old_ins._id&&(obj=old_ins._model.data[obj.id]),par.id===$.jstree.root&&("before"===pos&&(pos="first"),"after"===pos&&(pos="last")),pos){case"before":pos=$.inArray(par.id,new_par.children);break;case"after":pos=$.inArray(par.id,new_par.children)+1;break;case"inside":case"first":pos=0;break;case"last":pos=new_par.children.length;break;default:pos||(pos=0)}if(pos>new_par.children.length&&(pos=new_par.children.length),
!this.check("copy_node",obj,new_par,pos,{core:!0,origin:origin,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(!(node=old_ins?old_ins.get_json(obj,{no_id:!0,no_data:!0,no_state:!0}):obj))return!1;if(!0===node.id&&delete node.id,!(node=this._parse_model_from_json(node,new_par.id,new_par.parents.concat())))return!1;for(tmp=this.get_node(node),obj&&obj.state&&!1===obj.state.loaded&&(tmp.state.loaded=!1),dpc=[],dpc.push(node),dpc=dpc.concat(tmp.children_d),this.trigger("model",{nodes:dpc,parent:new_par.id}),i=0,
j=new_par.parents.length;i<j;i++)this._model.data[new_par.parents[i]].children_d=this._model.data[new_par.parents[i]].children_d.concat(dpc);for(dpc=[],i=0,j=new_par.children.length;i<j;i++)dpc[i>=pos?i+1:i]=new_par.children[i];return dpc[pos]=tmp.id,new_par.children=dpc,new_par.children_d.push(tmp.id),new_par.children_d=new_par.children_d.concat(tmp.children_d),new_par.id===$.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(new_par.id),skip_redraw||this.redraw(new_par.id===$.jstree.root),callback&&callback.call(this,tmp,new_par,pos),this.trigger("copy_node",{node:tmp,original:obj,parent:new_par.id,
position:pos,old_parent:old_par,old_position:old_ins&&old_ins._id&&old_par&&old_ins._model.data[old_par]&&old_ins._model.data[old_par].children?$.inArray(obj.id,old_ins._model.data[old_par].children):-1,is_multi:old_ins&&old_ins._id&&old_ins._id!==this._id,is_foreign:!old_ins||!old_ins._id,old_instance:old_ins,new_instance:this}),tmp.id},cut:function(obj){if(obj||(obj=this._data.core.selected.concat()),$.isArray(obj)||(obj=[obj]),!obj.length)return!1;var o,t1,t2,tmp=[];for(t1=0,t2=obj.length;t1<t2;t1++)(o=this.get_node(obj[t1]))&&o.id&&o.id!==$.jstree.root&&tmp.push(o);if(!tmp.length)return!1;ccp_node=tmp,ccp_inst=this,ccp_mode="move_node",
this.trigger("cut",{node:obj})},copy:function(obj){if(obj||(obj=this._data.core.selected.concat()),$.isArray(obj)||(obj=[obj]),!obj.length)return!1;var o,t1,t2,tmp=[];for(t1=0,t2=obj.length;t1<t2;t1++)(o=this.get_node(obj[t1]))&&o.id&&o.id!==$.jstree.root&&tmp.push(o);if(!tmp.length)return!1;ccp_node=tmp,ccp_inst=this,ccp_mode="copy_node",this.trigger("copy",{node:obj})},get_buffer:function(){return{mode:ccp_mode,node:ccp_node,inst:ccp_inst}},can_paste:function(){return!1!==ccp_mode&&!1!==ccp_node},paste:function(obj,pos){if(!((obj=this.get_node(obj))&&ccp_mode&&ccp_mode.match(/^(copy_node|move_node)$/)&&ccp_node))return!1
;this[ccp_mode](ccp_node,obj,pos,!1,!1,!1,ccp_inst)&&this.trigger("paste",{parent:obj.id,node:ccp_node,mode:ccp_mode}),ccp_node=!1,ccp_mode=!1,ccp_inst=!1},clear_buffer:function(){ccp_node=!1,ccp_mode=!1,ccp_inst=!1,this.trigger("clear_buffer")},edit:function(obj,default_text,callback){var rtl,w,a,s,t,h1,h2,fn,tmp,cancel=!1;return!!(obj=this.get_node(obj))&&(this.check("edit",obj,this.get_parent(obj))?(tmp=obj,default_text="string"==typeof default_text?default_text:obj.text,this.set_text(obj,""),obj=this._open_to(obj),tmp.text=default_text,rtl=this._data.core.rtl,w=this.element.width(),this._data.core.focused=tmp.id,a=obj.children(".jstree-anchor").focus(),
s=$("<span>"),t=default_text,h1=$("<div />",{css:{position:"absolute",top:"-200px",left:rtl?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),h2=$("<input />",{value:t,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:$.proxy(function(e){e.stopImmediatePropagation(),e.preventDefault();var nv,i=s.children(".jstree-rename-input"),v=i.val(),f=this.settings.core.force_text;""===v&&(v=t),h1.remove(),s.replaceWith(a),s.remove(),t=f?t:$("<div></div>").append($.parseHTML(t)).html(),
this.set_text(obj,t),nv=!!this.rename_node(obj,f?$("<div></div>").text(v).text():$("<div></div>").append($.parseHTML(v)).html()),nv||this.set_text(obj,t),this._data.core.focused=tmp.id,setTimeout($.proxy(function(){var node=this.get_node(tmp.id,!0);node.length&&(this._data.core.focused=tmp.id,node.children(".jstree-anchor").focus())},this),0),callback&&callback.call(this,tmp,nv,cancel),h2=null},this),keydown:function(e){var key=e.which;27===key&&(cancel=!0,this.value=t),27!==key&&13!==key&&37!==key&&38!==key&&39!==key&&40!==key&&32!==key||e.stopImmediatePropagation(),27!==key&&13!==key||(e.preventDefault(),this.blur())},click:function(e){
e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h2.width(Math.min(h1.text("pW"+this.value).width(),w))},keypress:function(e){if(13===e.which)return!1}}),fn={fontFamily:a.css("fontFamily")||"",fontSize:a.css("fontSize")||"",fontWeight:a.css("fontWeight")||"",fontStyle:a.css("fontStyle")||"",fontStretch:a.css("fontStretch")||"",fontVariant:a.css("fontVariant")||"",letterSpacing:a.css("letterSpacing")||"",wordSpacing:a.css("wordSpacing")||""},s.attr("class",a.attr("class")).append(a.contents().clone()).append(h2),a.replaceWith(s),h1.css(fn),
h2.css(fn).width(Math.min(h1.text("pW"+h2[0].value).width(),w))[0].select(),void $(document).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(e){h2&&e.target!==h2&&$(h2).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(theme_name,theme_url){if(!theme_name)return!1;if(!0===theme_url){var dir=this.settings.core.themes.dir;dir||(dir=$.jstree.path+"/themes"),theme_url=dir+"/"+theme_name+"/style.css"}theme_url&&-1===$.inArray(theme_url,themes_loaded)&&($("head").append('<link rel="stylesheet" href="'+theme_url+'" type="text/css" />'),themes_loaded.push(theme_url)),
this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=theme_name,this.element.addClass("jstree-"+theme_name),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+theme_name+"-responsive"),this.trigger("set_theme",{theme:theme_name})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(variant_name){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=variant_name,
variant_name&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),
this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,
this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(obj,icon){var t1,t2,dom,old;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.set_icon(obj[t1],icon);return!0}return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root||(old=obj.icon,obj.icon=!0===icon||null===icon||icon===undefined||""===icon||icon,
dom=this.get_node(obj,!0).children(".jstree-anchor").children(".jstree-themeicon"),!1===icon?(dom.removeClass("jstree-themeicon-custom "+old).css("background","").removeAttr("rel"),this.hide_icon(obj)):!0===icon||null===icon||icon===undefined||""===icon?(dom.removeClass("jstree-themeicon-custom "+old).css("background","").removeAttr("rel"),!1===old&&this.show_icon(obj)):-1===icon.indexOf("/")&&-1===icon.indexOf(".")?(dom.removeClass(old).css("background",""),dom.addClass(icon+" jstree-themeicon-custom").attr("rel",icon),!1===old&&this.show_icon(obj)):(dom.removeClass(old).css("background",""),
dom.addClass("jstree-themeicon-custom").css("background","url('"+icon+"') center center no-repeat").attr("rel",icon),!1===old&&this.show_icon(obj)),0))},get_icon:function(obj){return!(!(obj=this.get_node(obj))||obj.id===$.jstree.root)&&obj.icon},hide_icon:function(obj){var t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.hide_icon(obj[t1]);return!0}return!(!(obj=this.get_node(obj))||obj===$.jstree.root||(obj.icon=!1,this.get_node(obj,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),0))},show_icon:function(obj){var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,
t2=obj.length;t1<t2;t1++)this.show_icon(obj[t1]);return!0}return!(!(obj=this.get_node(obj))||obj===$.jstree.root||(dom=this.get_node(obj,!0),obj.icon=!dom.length||dom.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),obj.icon||(obj.icon=!0),dom.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),0))}},$.vakata={},$.vakata.attributes=function(node,with_values){node=$(node)[0];var attr=with_values?{}:[];return node&&node.attributes&&$.each(node.attributes,function(i,v){
-1===$.inArray(v.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==v.value&&""!==$.trim(v.value)&&(with_values?attr[v.name]=v.value:attr.push(v.name))}),attr},$.vakata.array_unique=function(array){var i,l,a=[],o={};for(i=0,l=array.length;i<l;i++)o[array[i]]===undefined&&(a.push(array[i]),o[array[i]]=!0);return a},$.vakata.array_remove=function(array,from){return array.splice(from,1),array},$.vakata.array_remove_item=function(array,item){var tmp=$.inArray(item,array);return-1!==tmp?$.vakata.array_remove(array,tmp):array},$.vakata.array_filter=function(c,a,b,d,e){if(c.filter)return c.filter(a,b);d=[]
;for(e in c)~~e+""==e+""&&e>=0&&a.call(b,c[e],+e,c)&&d.push(c[e]);return d},$.jstree.plugins.changed=function(options,parent){var last=[];this.trigger=function(ev,data){var i,j;if(data||(data={}),"changed"===ev.replace(".jstree","")){data.changed={selected:[],deselected:[]};var tmp={};for(i=0,j=last.length;i<j;i++)tmp[last[i]]=1;for(i=0,j=data.selected.length;i<j;i++)tmp[data.selected[i]]?tmp[data.selected[i]]=2:data.changed.selected.push(data.selected[i]);for(i=0,j=last.length;i<j;i++)1===tmp[last[i]]&&data.changed.deselected.push(last[i]);last=data.selected.slice()}parent.trigger.call(this,ev,data)},this.refresh=function(skip_loading,forget_state){
return last=[],parent.refresh.apply(this,arguments)}};var _i=document.createElement("I");_i.className="jstree-icon jstree-checkbox",_i.setAttribute("role","presentation"),$.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},$.jstree.plugins.checkbox=function(options,parent){this.bind=function(){parent.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",$.proxy(function(){
this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",$.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",$.proxy(function(){
this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",$.proxy(function(e,data){var i,j,m=this._model.data,dpc=(m[data.parent],data.nodes);for(i=0,j=dpc.length;i<j;i++)m[dpc[i]].state.checked=m[dpc[i]].state.checked||m[dpc[i]].original&&m[dpc[i]].original.state&&m[dpc[i]].original.state.checked,m[dpc[i]].state.checked&&this._data.checkbox.selected.push(dpc[i])},this)),
-1===this.settings.checkbox.cascade.indexOf("up")&&-1===this.settings.checkbox.cascade.indexOf("down")||this.element.on("model.jstree",$.proxy(function(e,data){var c,i,j,k,l,tmp,m=this._model.data,p=m[data.parent],dpc=data.nodes,chd=[],s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection;if(-1!==s.indexOf("down"))if(p.state[t?"selected":"checked"]){for(i=0,j=dpc.length;i<j;i++)m[dpc[i]].state[t?"selected":"checked"]=!0;this._data[t?"core":"checkbox"].selected=this._data[t?"core":"checkbox"].selected.concat(dpc)}else for(i=0,j=dpc.length;i<j;i++)if(m[dpc[i]].state[t?"selected":"checked"]){for(k=0,
l=m[dpc[i]].children_d.length;k<l;k++)m[m[dpc[i]].children_d[k]].state[t?"selected":"checked"]=!0;this._data[t?"core":"checkbox"].selected=this._data[t?"core":"checkbox"].selected.concat(m[dpc[i]].children_d)}if(-1!==s.indexOf("up")){for(i=0,j=p.children_d.length;i<j;i++)m[p.children_d[i]].children.length||chd.push(m[p.children_d[i]].parent);for(chd=$.vakata.array_unique(chd),k=0,l=chd.length;k<l;k++)for(p=m[chd[k]];p&&p.id!==$.jstree.root;){for(c=0,i=0,j=p.children.length;i<j;i++)c+=m[p.children[i]].state[t?"selected":"checked"];if(c!==j)break;p.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(p.id),
(tmp=this.get_node(p,!0))&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"),p=this.get_node(p.parent)}}this._data[t?"core":"checkbox"].selected=$.vakata.array_unique(this._data[t?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",$.proxy(function(e,data){var i,j,c,tmp,obj=data.node,m=this._model.data,par=this.get_node(obj.parent),s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection,sel={},cur=this._data[t?"core":"checkbox"].selected;for(i=0,j=cur.length;i<j;i++)sel[cur[i]]=!0;if(-1!==s.indexOf("down")){
var selectedIds=this._cascade_new_checked_state(obj.id,!0),temp=obj.children_d.concat(obj.id);for(i=0,j=temp.length;i<j;i++)selectedIds.indexOf(temp[i])>-1?sel[temp[i]]=!0:delete sel[temp[i]]}if(-1!==s.indexOf("up"))for(;par&&par.id!==$.jstree.root;){for(c=0,i=0,j=par.children.length;i<j;i++)c+=m[par.children[i]].state[t?"selected":"checked"];if(c!==j)break;par.state[t?"selected":"checked"]=!0,sel[par.id]=!0,(tmp=this.get_node(par,!0))&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"),par=this.get_node(par.parent)}cur=[];for(i in sel)sel.hasOwnProperty(i)&&cur.push(i)
;this._data[t?"core":"checkbox"].selected=cur},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",$.proxy(function(e,data){var i,j,tmp,obj=this.get_node($.jstree.root),m=this._model.data;for(i=0,j=obj.children_d.length;i<j;i++)(tmp=m[obj.children_d[i]])&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&(tmp.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",$.proxy(function(e,data){var i,j,tmp,obj=data.node,s=(this.get_node(obj,!0),
this.settings.checkbox.cascade),t=this.settings.checkbox.tie_selection,cur=this._data[t?"core":"checkbox"].selected,allIds=obj.children_d.concat(obj.id);if(-1!==s.indexOf("down")){var selectedIds=this._cascade_new_checked_state(obj.id,!1);cur=cur.filter(function(id){return-1===allIds.indexOf(id)||selectedIds.indexOf(id)>-1})}if(-1!==s.indexOf("up")&&-1===cur.indexOf(obj.id)){for(i=0,j=obj.parents.length;i<j;i++)tmp=this._model.data[obj.parents[i]],tmp.state[t?"selected":"checked"]=!1,tmp&&tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&(tmp.original.state.undetermined=!1),
(tmp=this.get_node(obj.parents[i],!0))&&tmp.length&&tmp.attr("aria-selected",!1).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked");cur=cur.filter(function(id){return-1===obj.parents.indexOf(id)})}this._data[t?"core":"checkbox"].selected=cur},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",$.proxy(function(e,data){for(var i,j,c,tmp,p=this.get_node(data.parent),m=this._model.data,t=this.settings.checkbox.tie_selection;p&&p.id!==$.jstree.root&&!p.state[t?"selected":"checked"];){for(c=0,i=0,j=p.children.length;i<j;i++)c+=m[p.children[i]].state[t?"selected":"checked"];if(!(j>0&&c===j))break
;p.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(p.id),(tmp=this.get_node(p,!0))&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"),p=this.get_node(p.parent)}},this)).on("move_node.jstree",$.proxy(function(e,data){var p,c,i,j,tmp,is_multi=data.is_multi,old_par=data.old_parent,new_par=this.get_node(data.parent),m=this._model.data,t=this.settings.checkbox.tie_selection;if(!is_multi)for(p=this.get_node(old_par);p&&p.id!==$.jstree.root&&!p.state[t?"selected":"checked"];){for(c=0,i=0,j=p.children.length;i<j;i++)c+=m[p.children[i]].state[t?"selected":"checked"]
;if(!(j>0&&c===j))break;p.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(p.id),(tmp=this.get_node(p,!0))&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"),p=this.get_node(p.parent)}for(p=new_par;p&&p.id!==$.jstree.root;){for(c=0,i=0,j=p.children.length;i<j;i++)c+=m[p.children[i]].state[t?"selected":"checked"];if(c===j)p.state[t?"selected":"checked"]||(p.state[t?"selected":"checked"]=!0,this._data[t?"core":"checkbox"].selected.push(p.id),
(tmp=this.get_node(p,!0))&&tmp.length&&tmp.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked"));else{if(!p.state[t?"selected":"checked"])break;p.state[t?"selected":"checked"]=!1,this._data[t?"core":"checkbox"].selected=$.vakata.array_remove_item(this._data[t?"core":"checkbox"].selected,p.id),(tmp=this.get_node(p,!0))&&tmp.length&&tmp.attr("aria-selected",!1).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked")}p=this.get_node(p.parent)}},this))},this.get_undetermined=function(full){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[]
;var i,j,k,l,o={},m=this._model.data,t=this.settings.checkbox.tie_selection,s=this._data[t?"core":"checkbox"].selected,p=[],tt=this,r=[];for(i=0,j=s.length;i<j;i++)if(m[s[i]]&&m[s[i]].parents)for(k=0,l=m[s[i]].parents.length;k<l&&o[m[s[i]].parents[k]]===undefined;k++)m[s[i]].parents[k]!==$.jstree.root&&(o[m[s[i]].parents[k]]=!0,p.push(m[s[i]].parents[k]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var tmp2,tmp=tt.get_node(this);if(tmp)if(tmp.state.loaded){for(i=0,j=tmp.children_d.length;i<j;i++)if(tmp2=m[tmp.children_d[i]],
!tmp2.state.loaded&&tmp2.original&&tmp2.original.state&&tmp2.original.state.undetermined&&!0===tmp2.original.state.undetermined)for(o[tmp2.id]===undefined&&tmp2.id!==$.jstree.root&&(o[tmp2.id]=!0,p.push(tmp2.id)),k=0,l=tmp2.parents.length;k<l;k++)o[tmp2.parents[k]]===undefined&&tmp2.parents[k]!==$.jstree.root&&(o[tmp2.parents[k]]=!0,p.push(tmp2.parents[k]))}else if(tmp.original&&tmp.original.state&&tmp.original.state.undetermined&&!0===tmp.original.state.undetermined)for(o[tmp.id]===undefined&&tmp.id!==$.jstree.root&&(o[tmp.id]=!0,p.push(tmp.id)),k=0,
l=tmp.parents.length;k<l;k++)o[tmp.parents[k]]===undefined&&tmp.parents[k]!==$.jstree.root&&(o[tmp.parents[k]]=!0,p.push(tmp.parents[k]))}),i=0,j=p.length;i<j;i++)m[p[i]].state[t?"selected":"checked"]||r.push(full?m[p[i]]:p[i]);return r},this._undetermined=function(){if(null!==this.element){var i,j,s,p=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),i=0,j=p.length;i<j;i++)(s=this.get_node(p[i],!0))&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(obj,deep,is_callback,force_render){
if(obj=parent.redraw_node.apply(this,arguments)){var i,j,tmp=null,icon=null;for(i=0,j=obj.childNodes.length;i<j;i++)if(obj.childNodes[i]&&obj.childNodes[i].className&&-1!==obj.childNodes[i].className.indexOf("jstree-anchor")){tmp=obj.childNodes[i];break}tmp&&(!this.settings.checkbox.tie_selection&&this._model.data[obj.id].state.checked&&(tmp.className+=" jstree-checked"),icon=_i.cloneNode(!1),this._model.data[obj.id].state.checkbox_disabled&&(icon.className+=" jstree-checkbox-disabled"),tmp.insertBefore(icon,tmp.childNodes[0]))}
return is_callback||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout($.proxy(this._undetermined,this),50)),obj},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(obj){obj=this.get_node(obj)
;var i,j,s=this.settings.checkbox.cascade,t=this.settings.checkbox.tie_selection,d=this._data[t?"core":"checkbox"].selected,m=this._model.data;if(!obj||!0===obj.state[t?"selected":"checked"]||-1===s.indexOf("undetermined")||-1===s.indexOf("down")&&-1===s.indexOf("up"))return!1;if(!obj.state.loaded&&!0===obj.original.state.undetermined)return!0;for(i=0,j=obj.children_d.length;i<j;i++)if(-1!==$.inArray(obj.children_d[i],d)||!m[obj.children_d[i]].state.loaded&&m[obj.children_d[i]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(obj){var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,
t2=obj.length;t1<t2;t1++)this.disable_checkbox(obj[t1]);return!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;dom=this.get_node(obj,!0),obj.state.checkbox_disabled||(obj.state.checkbox_disabled=!0,dom&&dom.length&&dom.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:obj}))},this.enable_checkbox=function(obj){var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.enable_checkbox(obj[t1]);return!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;dom=this.get_node(obj,!0),
obj.state.checkbox_disabled&&(obj.state.checkbox_disabled=!1,dom&&dom.length&&dom.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:obj}))},this.activate_node=function(obj,e){return!$(e.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||$(e.target).hasClass("jstree-checkbox"))&&(e.ctrlKey=!0),
this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!$(e.target).hasClass("jstree-checkbox")?parent.activate_node.call(this,obj,e):!this.is_disabled(obj)&&(this.is_checked(obj)?this.uncheck_node(obj,e):this.check_node(obj,e),void this.trigger("activate_node",{node:this.get_node(obj)})))},this._cascade_new_checked_state=function(id,checkedState){var i,j,selectedChildIds,self=this,t=this.settings.checkbox.tie_selection,node=this._model.data[id],selectedNodeIds=[],selectedChildrenIds=[]
;if(!this.settings.checkbox.cascade_to_disabled&&node.state.disabled||!this.settings.checkbox.cascade_to_hidden&&node.state.hidden)selectedChildIds=this.get_checked_descendants(id),node.state[t?"selected":"checked"]&&selectedChildIds.push(node.id),selectedNodeIds=selectedNodeIds.concat(selectedChildIds);else{if(node.children)for(i=0,j=node.children.length;i<j;i++){var childId=node.children[i];selectedChildIds=self._cascade_new_checked_state(childId,checkedState),selectedNodeIds=selectedNodeIds.concat(selectedChildIds),selectedChildIds.indexOf(childId)>-1&&selectedChildrenIds.push(childId)}
var dom=self.get_node(node,!0),undetermined=selectedChildrenIds.length>0&&selectedChildrenIds.length<node.children.length;node.original&&node.original.state&&node.original.state.undetermined&&(node.original.state.undetermined=undetermined),undetermined?(node.state[t?"selected":"checked"]=!1,dom.attr("aria-selected",!1).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked")):checkedState&&selectedChildrenIds.length===node.children.length?(node.state[t?"selected":"checked"]=checkedState,selectedNodeIds.push(node.id),
dom.attr("aria-selected",!0).children(".jstree-anchor").addClass(t?"jstree-clicked":"jstree-checked")):(node.state[t?"selected":"checked"]=!1,dom.attr("aria-selected",!1).children(".jstree-anchor").removeClass(t?"jstree-clicked":"jstree-checked"))}return selectedNodeIds},this.get_checked_descendants=function(id){var self=this,t=self.settings.checkbox.tie_selection;return self._model.data[id].children_d.filter(function(_id){return self._model.data[_id].state[t?"selected":"checked"]})},this.check_node=function(obj,e){if(this.settings.checkbox.tie_selection)return this.select_node(obj,!1,!0,e);var dom,t1,t2;if($.isArray(obj)){for(obj=obj.slice(),t1=0,
t2=obj.length;t1<t2;t1++)this.check_node(obj[t1],e);return!0}if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;dom=this.get_node(obj,!0),obj.state.checked||(obj.state.checked=!0,this._data.checkbox.selected.push(obj.id),dom&&dom.length&&dom.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:obj,selected:this._data.checkbox.selected,event:e}))},this.uncheck_node=function(obj,e){if(this.settings.checkbox.tie_selection)return this.deselect_node(obj,!1,e);var t1,t2,dom;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.uncheck_node(obj[t1],e);return!0}
if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;dom=this.get_node(obj,!0),obj.state.checked&&(obj.state.checked=!1,this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,obj.id),dom.length&&dom.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:obj,selected:this._data.checkbox.selected,event:e}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var i,j;for(this._data.checkbox.selected.concat([]),this._data.checkbox.selected=this._model.data[$.jstree.root].children_d.concat(),i=0,
j=this._data.checkbox.selected.length;i<j;i++)this._model.data[this._data.checkbox.selected[i]]&&(this._model.data[this._data.checkbox.selected[i]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var i,j,tmp=this._data.checkbox.selected.concat([]);for(i=0,j=this._data.checkbox.selected.length;i<j;i++)this._model.data[this._data.checkbox.selected[i]]&&(this._model.data[this._data.checkbox.selected[i]].state.checked=!1);this._data.checkbox.selected=[],
this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:tmp})},this.is_checked=function(obj){return this.settings.checkbox.tie_selection?this.is_selected(obj):!(!(obj=this.get_node(obj))||obj.id===$.jstree.root)&&obj.state.checked},this.get_checked=function(full){return this.settings.checkbox.tie_selection?this.get_selected(full):full?$.map(this._data.checkbox.selected,$.proxy(function(i){return this.get_node(i)},this)):this._data.checkbox.selected},this.get_top_checked=function(full){if(this.settings.checkbox.tie_selection)return this.get_top_selected(full)
;var i,j,k,l,tmp=this.get_checked(!0),obj={};for(i=0,j=tmp.length;i<j;i++)obj[tmp[i].id]=tmp[i];for(i=0,j=tmp.length;i<j;i++)for(k=0,l=tmp[i].children_d.length;k<l;k++)obj[tmp[i].children_d[k]]&&delete obj[tmp[i].children_d[k]];tmp=[];for(i in obj)obj.hasOwnProperty(i)&&tmp.push(i);return full?$.map(tmp,$.proxy(function(i){return this.get_node(i)},this)):tmp},this.get_bottom_checked=function(full){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(full);var i,j,tmp=this.get_checked(!0),obj=[];for(i=0,j=tmp.length;i<j;i++)tmp[i].children.length||obj.push(tmp[i].id);return full?$.map(obj,$.proxy(function(i){return this.get_node(i)
},this)):obj},this.load_node=function(obj,callback){var k,l,tmp;if(!$.isArray(obj)&&!this.settings.checkbox.tie_selection&&(tmp=this.get_node(obj))&&tmp.state.loaded)for(k=0,l=tmp.children_d.length;k<l;k++)this._model.data[tmp.children_d[k]].state.checked&&(this._data.checkbox.selected=$.vakata.array_remove_item(this._data.checkbox.selected,tmp.children_d[k]));return parent.load_node.apply(this,arguments)},this.get_state=function(){var state=parent.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?state:(state.checkbox=this._data.checkbox.selected.slice(),state)},this.set_state=function(state,callback){
var res=parent.set_state.apply(this,arguments);if(res&&state.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var _this=this;$.each(state.checkbox,function(i,v){_this.check_node(v)})}return delete state.checkbox,this.set_state(state,callback),!1}return res},this.refresh=function(skip_loading,forget_state){return this.settings.checkbox.tie_selection||(this._data.checkbox.selected=[]),parent.refresh.apply(this,arguments)}},$.jstree.defaults.conditionalselect=function(){return!0},$.jstree.plugins.conditionalselect=function(options,parent){this.activate_node=function(obj,e){
if(this.settings.conditionalselect.call(this,this.get_node(obj),e))return parent.activate_node.call(this,obj,e)}},$.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(o,cb){return $container.find(".ctxMenu").css("display","none"),{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.create_node(obj,{},"last",function(new_node){try{inst.edit(new_node)}catch(ex){setTimeout(function(){inst.edit(new_node)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(data){
var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.edit(obj)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.is_selected(obj)?inst.delete_node(inst.get_selected()):inst.delete_node(obj)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference)
;inst.is_selected(obj)?inst.cut(inst.get_top_selected()):inst.cut(obj)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.is_selected(obj)?inst.copy(inst.get_top_selected()):inst.copy(obj)}},paste:{separator_before:!1,icon:!1,_disabled:function(data){return!$.jstree.reference(data.reference).can_paste()},separator_after:!1,label:"Paste",action:function(data){var inst=$.jstree.reference(data.reference),obj=inst.get_node(data.reference);inst.paste(obj)}}}}}}},$.jstree.plugins.contextmenu=function(options,parent){this.bind=function(){
parent.bind.call(this);var ex,ey,last_ts=0,cto=null;this.element.on("init.jstree loading.jstree ready.jstree",$.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",$.proxy(function(e,data){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),last_ts=e.ctrlKey?+new Date:0,(data||cto)&&(last_ts=+new Date+1e4),cto&&clearTimeout(cto),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",$.proxy(function(e){this._data.contextmenu.visible&&(!last_ts||+new Date-last_ts>250)&&$.vakata.context.hide(),last_ts=0
},this)).on("touchstart.jstree",".jstree-anchor",function(e){e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(ex=e.originalEvent.changedTouches[0].clientX,ey=e.originalEvent.changedTouches[0].clientY,cto=setTimeout(function(){$(e.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(e){cto&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(Math.abs(ex-e.originalEvent.changedTouches[0].clientX)>10||Math.abs(ey-e.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(cto),$.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){
cto&&clearTimeout(cto)}),$(document).on("context_hide.vakata.jstree",$.proxy(function(e,data){this._data.contextmenu.visible=!1,$(data.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&$.vakata.context.hide(),parent.teardown.call(this)},this.show_contextmenu=function(obj,x,y,e){if(!(obj=this.get_node(obj))||obj.id===$.jstree.root)return!1;var s=this.settings.contextmenu,d=this.get_node(obj,!0),a=d.children(".jstree-anchor"),o=!1,i=!1;(s.show_at_node||x===undefined||y===undefined)&&(o=a.offset(),x=o.left,y=o.top+this._data.core.li_height),
this.settings.contextmenu.select_node&&!this.is_selected(obj)&&this.activate_node(obj,e),i=s.items,$.isFunction(i)&&(i=i.call(this,obj,$.proxy(function(i){this._show_contextmenu(obj,x,y,i)},this))),$.isPlainObject(i)&&this._show_contextmenu(obj,x,y,i)},this._show_contextmenu=function(obj,x,y,i){var d=this.get_node(obj,!0),a=d.children(".jstree-anchor");$(document).one("context_show.vakata.jstree",$.proxy(function(e,data){var cls="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";$(data.element).addClass(cls),a.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,$.vakata.context.show(a,{x:x,y:y},i),this.trigger("show_contextmenu",{
node:obj,x:x,y:y})}},function($){var right_to_left=!1,vakata_context={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};$.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(event_name){$(document).triggerHandler("context_"+event_name+".vakata",{reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}})},_execute:function(i){return!(!(i=vakata_context.items[i])||i._disabled&&(!$.isFunction(i._disabled)||i._disabled({item:i,reference:vakata_context.reference,element:vakata_context.element}))||!i.action)&&i.action.call(null,{item:i,
reference:vakata_context.reference,element:vakata_context.element,position:{x:vakata_context.position_x,y:vakata_context.position_y}})},_parse:function(o,is_callback){if(!o)return!1;is_callback||(vakata_context.html="",vakata_context.items=[]);var tmp,str="",sep=!1;return is_callback&&(str+="<ul>"),$.each(o,function(i,val){if(!val)return!0;vakata_context.items.push(val),!sep&&val.separator_before&&(str+="<li class='vakata-context-separator'><a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),sep=!1,str+="<li class='"+(val._class||"")+(!0===val._disabled||$.isFunction(val._disabled)&&val._disabled({item:val,
reference:vakata_context.reference,element:vakata_context.element})?" vakata-contextmenu-disabled ":"")+"' "+(val.shortcut?" data-shortcut='"+val.shortcut+"' ":"")+">",str+="<a href='#' rel='"+(vakata_context.items.length-1)+"' "+(val.title?"title='"+val.title+"'":"")+">",$.vakata.context.settings.icons&&(str+="<i ",val.icon&&(-1!==val.icon.indexOf("/")||-1!==val.icon.indexOf(".")?str+=" style='background:url(\""+val.icon+"\") center center no-repeat' ":str+=" class='"+val.icon+"' "),str+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),str+=($.isFunction(val.label)?val.label({item:i,reference:vakata_context.reference,element:vakata_context.element
}):val.label)+(val.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+val.shortcut+'">'+(val.shortcut_label||"")+"</span>":"")+"</a>",val.submenu&&(tmp=$.vakata.context._parse(val.submenu,!0))&&(str+=tmp),str+="</li>",val.separator_after&&(str+="<li class='vakata-context-separator'><a href='#' "+($.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",sep=!0)}),str=str.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),is_callback&&(str+="</ul>"),is_callback||(vakata_context.html=str,$.vakata.context._trigger("parse")),str.length>10&&str},_show_submenu:function(o){if(o=$(o),
o.length&&o.children("ul").length){var e=o.children("ul"),xl=o.offset().left,x=xl+o.outerWidth(),y=o.offset().top,w=e.width(),h=e.height(),dw=$(window).width()+$(window).scrollLeft(),dh=$(window).height()+$(window).scrollTop();right_to_left?o[x-(w+10+o.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):o[x+w>dw&&xl>dw-x?"addClass":"removeClass"]("vakata-context-right"),y+h+10>dh&&e.css("bottom","-1px"),o.hasClass("vakata-context-right")?xl<w&&e.css("margin-right",xl-w):dw-x<w&&e.css("margin-left",dw-x-w),e.show()}},show:function(reference,position,data){var o,e,x,y,w,h,dw,dh
;switch(vakata_context.element&&vakata_context.element.length&&vakata_context.element.width(""),!0){case!position&&!reference:return!1;case!!position&&!!reference:vakata_context.reference=reference,vakata_context.position_x=position.x,vakata_context.position_y=position.y;break;case!position&&!!reference:vakata_context.reference=reference,o=reference.offset(),vakata_context.position_x=o.left+reference.outerHeight(),vakata_context.position_y=o.top;break;case!!position&&!reference:vakata_context.position_x=position.x,vakata_context.position_y=position.y}reference&&!data&&$(reference).data("vakata_contextmenu")&&(data=$(reference).data("vakata_contextmenu")),
$.vakata.context._parse(data)&&vakata_context.element.html(vakata_context.html),vakata_context.items.length&&(vakata_context.element.appendTo("body"),e=vakata_context.element,x=vakata_context.position_x,y=vakata_context.position_y,w=e.width(),h=e.height(),dw=$(window).width()+$(window).scrollLeft(),dh=$(window).height()+$(window).scrollTop(),right_to_left&&(x-=e.outerWidth()-$(reference).outerWidth())<$(window).scrollLeft()+20&&(x=$(window).scrollLeft()+20),x+w+20>dw&&(x=dw-(w+20)),y+h+20>dh&&(y=dh-(h+20)),vakata_context.element.css({left:x,top:y}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),vakata_context.is_visible=!0,
$.vakata.context._trigger("show"))},hide:function(){vakata_context.is_visible&&(vakata_context.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),vakata_context.is_visible=!1,$.vakata.context._trigger("hide"))}},$(function(){right_to_left="rtl"===$("body").css("direction");var to=!1;vakata_context.element=$("<ul class='vakata-context'></ul>"),vakata_context.element.on("mouseenter","li",function(e){e.stopImmediatePropagation(),$.contains(this,e.relatedTarget)||(to&&clearTimeout(to),vakata_context.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),
$(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),$.vakata.context._show_submenu(this))}).on("mouseleave","li",function(e){$.contains(this,e.relatedTarget)||$(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(e){$(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),$.vakata.context.settings.hide_onmouseleave&&(to=setTimeout(function(t){return function(){$.vakata.context.hide()}}(),$.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(e){e.preventDefault(),
$(this).blur().parent().hasClass("vakata-context-disabled")||!1===$.vakata.context._execute($(this).attr("rel"))||$.vakata.context.hide()}).on("keydown","a",function(e){var o=null;switch(e.which){case 13:case 32:e.type="click",e.preventDefault(),$(e.currentTarget).trigger(e);break;case 37:vakata_context.is_visible&&(vakata_context.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 38:
vakata_context.is_visible&&(o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),o.length||(o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),o.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 39:
vakata_context.is_visible&&(vakata_context.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 40:vakata_context.is_visible&&(o=vakata_context.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),o.length||(o=vakata_context.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),
o.addClass("vakata-context-hover").children("a").focus(),e.stopImmediatePropagation(),e.preventDefault());break;case 27:$.vakata.context.hide(),e.preventDefault()}}).on("keydown",function(e){e.preventDefault();var a=vakata_context.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();a.parent().not(".vakata-context-disabled")&&a.click()}),$(document).on("mousedown.vakata.jstree",function(e){vakata_context.is_visible&&vakata_context.element[0]!==e.target&&!$.contains(vakata_context.element[0],e.target)&&$.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,data){
vakata_context.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),right_to_left&&vakata_context.element.addClass("vakata-context-rtl").css("direction","rtl"),vakata_context.element.find("ul").hide().end()})})}($),$.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var drg,elm;$.jstree.plugins.dnd=function(options,parent){this.init=function(el,options){parent.init.call(this,el,options),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in document.createElement("span")},
this.bind=function(){parent.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",$.proxy(function(e){if(this.settings.dnd.large_drag_target&&$(e.target).closest(".jstree-node")[0]!==e.currentTarget)return!0;if("touchstart"===e.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0
;var obj=this.get_node(e.target),mlt=this.is_selected(obj)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,txt=mlt>1?mlt+" "+this.get_string("nodes"):this.get_text(e.currentTarget);if(this.settings.core.force_text&&(txt=$.vakata.html.escape(txt)),obj&&obj.id&&obj.id!==$.jstree.root&&(1===e.which||"touchstart"===e.type||"dragstart"===e.type)&&(!0===this.settings.dnd.is_draggable||$.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,mlt>1?this.get_top_selected(!0):[obj],e))){if(drg={jstree:!0,origin:this,obj:this.get_node(obj,!0),nodes:mlt>1?this.get_top_selected():[obj.id]},elm=e.currentTarget,
!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),$.vakata.dnd.start(e,drg,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+txt+'<ins class="jstree-copy" style="display:none;">+</ins></div>');$.vakata.dnd._trigger("start",e,{helper:$(),element:elm,data:drg})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(e){return e.preventDefault(),$.vakata.dnd._trigger("move",e,{helper:$(),element:elm,data:drg}),!1
}).on("drop.jstree",$.proxy(function(e){return e.preventDefault(),$.vakata.dnd._trigger("stop",e,{helper:$(),element:elm,data:drg}),!1},this))},this.redraw_node=function(obj,deep,callback,force_render){if((obj=parent.redraw_node.apply(this,arguments))&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)obj.setAttribute("draggable",!0);else{var i,j,tmp=null;for(i=0,j=obj.childNodes.length;i<j;i++)if(obj.childNodes[i]&&obj.childNodes[i].className&&-1!==obj.childNodes[i].className.indexOf("jstree-anchor")){tmp=obj.childNodes[i];break}tmp&&tmp.setAttribute("draggable",!0)}return obj}},$(function(){
var lastmv=!1,laster=!1,lastev=!1,opento=!1,marker=$('<div id="jstree-marker">&#160;</div>').hide();$(document).on("dnd_start.vakata.jstree",function(e,data){lastmv=!1,lastev=!1,data&&data.data&&data.data.jstree&&marker.appendTo("body")}).on("dnd_move.vakata.jstree",function(e,data){var isDifferentNode=data.event.target!==lastev.target;if(opento&&(data.event&&"dragover"===data.event.type&&!isDifferentNode||clearTimeout(opento)),data&&data.data&&data.data.jstree&&(!data.event.target.id||"jstree-marker"!==data.event.target.id)){lastev=data.event;var l,t,h,p,i,o,ok,t1,t2,op,ps,pr,ip,tm,is_copy,pn,ins=$.jstree.reference(data.event.target),ref=!1,off=!1,rel=!1
;if(ins&&ins._data&&ins._data.dnd)if(marker.attr("class","jstree-"+ins.get_theme()+(ins.settings.core.themes.responsive?" jstree-dnd-responsive":"")),is_copy=data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey)),data.helper.children().attr("class","jstree-"+ins.get_theme()+" jstree-"+ins.get_theme()+"-"+ins.get_theme_variant()+" "+(ins.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[is_copy?"show":"hide"](),
data.event.target!==ins.element[0]&&data.event.target!==ins.get_container_ul()[0]||0!==ins.get_container_ul().children().length){if((ref=ins.settings.dnd.large_drop_target?$(data.event.target).closest(".jstree-node").children(".jstree-anchor"):$(data.event.target).closest(".jstree-anchor"))&&ref.length&&ref.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(off=ref.offset(),rel=(data.event.pageY!==undefined?data.event.pageY:data.event.originalEvent.pageY)-off.top,h=ref.outerHeight(),o=rel<h/3?["b","i","a"]:rel>h-h/3?["a","i","b"]:rel>h/2?["i","a","b"]:["i","b","a"],$.each(o,function(j,v){switch(v){case"b":l=off.left-6,t=off.top,
p=ins.get_parent(ref),i=ref.parent().index();break;case"i":ip=ins.settings.dnd.inside_pos,tm=ins.get_node(ref.parent()),l=off.left-2,t=off.top+h/2+1,p=tm.id,i="first"===ip?0:"last"===ip?tm.children.length:Math.min(ip,tm.children.length);break;case"a":l=off.left-6,t=off.top+h,p=ins.get_parent(ref),i=ref.parent().index()+1}for(ok=!0,t1=0,t2=data.data.nodes.length;t1<t2;t1++)if(op=data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node",ps=i,
"move_node"===op&&"a"===v&&data.data.origin&&data.data.origin===ins&&p===ins.get_parent(data.data.nodes[t1])&&(pr=ins.get_node(p),ps>$.inArray(data.data.nodes[t1],pr.children)&&(ps-=1)),!(ok=ok&&(ins&&ins.settings&&ins.settings.dnd&&!1===ins.settings.dnd.check_while_dragging||ins.check(op,data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1],p,ps,{dnd:!0,ref:ins.get_node(ref.parent()),pos:v,origin:data.data.origin,is_multi:data.data.origin&&data.data.origin!==ins,is_foreign:!data.data.origin})))){ins&&ins.last_error&&(laster=ins.last_error());break}
if("i"===v&&ref.parent().is(".jstree-closed")&&ins.settings.dnd.open_timeout&&(data.event&&"dragover"===data.event.type&&!isDifferentNode||(opento&&clearTimeout(opento),opento=setTimeout(function(x,z){return function(){x.open_node(z)}}(ins,ref),ins.settings.dnd.open_timeout))),ok)return pn=ins.get_node(p,!0),pn.hasClass(".jstree-dnd-parent")||($(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),pn.addClass("jstree-dnd-parent")),lastmv={ins:ins,par:p,pos:"i"!==v||"last"!==ip||0!==i||ins.is_loaded(tm)?i:"last"},marker.css({left:l+"px",top:t+"px"}).show(),data.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),
data.event.originalEvent&&data.event.originalEvent.dataTransfer&&(data.event.originalEvent.dataTransfer.dropEffect=is_copy?"copy":"move"),laster={},o=!0,!1}),!0===o))return}else{for(ok=!0,t1=0,t2=data.data.nodes.length;t1<t2&&(ok=ok&&ins.check(data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node",data.data.origin&&data.data.origin!==ins?data.data.origin.get_node(data.data.nodes[t1]):data.data.nodes[t1],$.jstree.root,"last",{dnd:!0,ref:ins.get_node($.jstree.root),pos:"i",origin:data.data.origin,is_multi:data.data.origin&&data.data.origin!==ins,
is_foreign:!data.data.origin}));t1++);if(ok)return lastmv={ins:ins,par:$.jstree.root,pos:"last"},marker.hide(),data.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(data.event.originalEvent&&data.event.originalEvent.dataTransfer&&(data.event.originalEvent.dataTransfer.dropEffect=is_copy?"copy":"move"))}$(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),lastmv=!1,data.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),data.event.originalEvent&&data.event.originalEvent.dataTransfer&&(data.event.originalEvent.dataTransfer.dropEffect="none"),marker.hide()}
}).on("dnd_scroll.vakata.jstree",function(e,data){data&&data.data&&data.data.jstree&&(marker.hide(),lastmv=!1,lastev=!1,data.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(e,data){if($(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),opento&&clearTimeout(opento),data&&data.data&&data.data.jstree){marker.hide().detach();var i,j,nodes=[];if(lastmv){for(i=0,j=data.data.nodes.length;i<j;i++)nodes[i]=data.data.origin?data.data.origin.get_node(data.data.nodes[i]):data.data.nodes[i]
;lastmv.ins[data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(data.event.metaKey||data.event.ctrlKey))?"copy_node":"move_node"](nodes,lastmv.par,lastmv.pos,!1,!1,!1,data.data.origin)}else i=$(data.event.target).closest(".jstree"),i.length&&laster&&laster.error&&"check"===laster.error&&(i=i.jstree(!0))&&i.settings.core.error.call(this,laster);lastev=!1,lastmv=!1}}).on("keyup.jstree keydown.jstree",function(e,data){(data=$.vakata.dnd._get())&&data.data&&data.data.jstree&&("keyup"===e.type&&27===e.which?(opento&&clearTimeout(opento),lastmv=!1,laster=!1,lastev=!1,opento=!1,marker.hide().detach(),
$.vakata.dnd._clean()):(data.helper.find(".jstree-copy").first()[data.data.origin&&(data.data.origin.settings.dnd.always_copy||data.data.origin.settings.dnd.copy&&(e.metaKey||e.ctrlKey))?"show":"hide"](),lastev&&(lastev.metaKey=e.metaKey,lastev.ctrlKey=e.ctrlKey,$.vakata.dnd._trigger("move",lastev))))})}),function($){$.vakata.html={div:$("<div />"),escape:function(str){return $.vakata.html.div.text(str).html()},strip:function(str){return $.vakata.html.div.empty().append($.parseHTML(str)).text()}};var vakata_dnd={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1}
;$.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(event_name,e,data){data===undefined&&(data=$.vakata.dnd._get()),data.event=e,$(document).triggerHandler("dnd_"+event_name+".vakata",data)},_get:function(){return{data:vakata_dnd.data,element:vakata_dnd.element,helper:vakata_dnd.helper}},_clean:function(){vakata_dnd.helper&&vakata_dnd.helper.remove(),vakata_dnd.scroll_i&&(clearInterval(vakata_dnd.scroll_i),vakata_dnd.scroll_i=!1),vakata_dnd={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,
scroll_i:!1,is_touch:!1},$(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",$.vakata.dnd.drag),$(document).off("mouseup.vakata.jstree touchend.vakata.jstree",$.vakata.dnd.stop)},_scroll:function(init_only){if(!vakata_dnd.scroll_e||!vakata_dnd.scroll_l&&!vakata_dnd.scroll_t)return vakata_dnd.scroll_i&&(clearInterval(vakata_dnd.scroll_i),vakata_dnd.scroll_i=!1),!1;if(!vakata_dnd.scroll_i)return vakata_dnd.scroll_i=setInterval($.vakata.dnd._scroll,100),!1;if(!0===init_only)return!1;var i=vakata_dnd.scroll_e.scrollTop(),j=vakata_dnd.scroll_e.scrollLeft();vakata_dnd.scroll_e.scrollTop(i+vakata_dnd.scroll_t*$.vakata.dnd.settings.scroll_speed),
vakata_dnd.scroll_e.scrollLeft(j+vakata_dnd.scroll_l*$.vakata.dnd.settings.scroll_speed),i===vakata_dnd.scroll_e.scrollTop()&&j===vakata_dnd.scroll_e.scrollLeft()||$.vakata.dnd._trigger("scroll",vakata_dnd.scroll_e)},start:function(e,data,html){"touchstart"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),vakata_dnd.is_drag&&$.vakata.dnd.stop({});try{
e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.touchAction="none",e.currentTarget.style.msTouchAction="none",e.currentTarget.style.MozUserSelect="none")}catch(ignore){}return vakata_dnd.init_x=e.pageX,vakata_dnd.init_y=e.pageY,vakata_dnd.data=data,vakata_dnd.is_down=!0,vakata_dnd.element=e.currentTarget,vakata_dnd.target=e.target,vakata_dnd.is_touch="touchstart"===e.type,!1!==html&&(vakata_dnd.helper=$("<div id='vakata-dnd'></div>").html(html).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),
$(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",$.vakata.dnd.drag),$(document).on("mouseup.vakata.jstree touchend.vakata.jstree",$.vakata.dnd.stop),!1},drag:function(e){if("touchmove"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),vakata_dnd.is_down){if(!vakata_dnd.is_drag){
if(!(Math.abs(e.pageX-vakata_dnd.init_x)>(vakata_dnd.is_touch?$.vakata.dnd.settings.threshold_touch:$.vakata.dnd.settings.threshold)||Math.abs(e.pageY-vakata_dnd.init_y)>(vakata_dnd.is_touch?$.vakata.dnd.settings.threshold_touch:$.vakata.dnd.settings.threshold)))return;vakata_dnd.helper&&(vakata_dnd.helper.appendTo("body"),vakata_dnd.helper_w=vakata_dnd.helper.outerWidth()),vakata_dnd.is_drag=!0,$(vakata_dnd.target).one("click.vakata",!1),$.vakata.dnd._trigger("start",e)}var d=!1,w=!1,dh=!1,wh=!1,dw=!1,ww=!1,dt=!1,dl=!1,ht=!1,hl=!1;return vakata_dnd.scroll_t=0,vakata_dnd.scroll_l=0,vakata_dnd.scroll_e=!1,
$($(e.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test($(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var t=$(this),o=t.offset();if(this.scrollHeight>this.offsetHeight&&(o.top+t.height()-e.pageY<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_t=1),e.pageY-o.top<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(o.left+t.width()-e.pageX<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_l=1),
e.pageX-o.left<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_l=-1)),vakata_dnd.scroll_t||vakata_dnd.scroll_l)return vakata_dnd.scroll_e=$(this),!1}),vakata_dnd.scroll_e||(d=$(document),w=$(window),dh=d.height(),wh=w.height(),dw=d.width(),ww=w.width(),dt=d.scrollTop(),dl=d.scrollLeft(),dh>wh&&e.pageY-dt<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_t=-1),dh>wh&&wh-(e.pageY-dt)<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_t=1),dw>ww&&e.pageX-dl<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_l=-1),dw>ww&&ww-(e.pageX-dl)<$.vakata.dnd.settings.scroll_proximity&&(vakata_dnd.scroll_l=1),
(vakata_dnd.scroll_t||vakata_dnd.scroll_l)&&(vakata_dnd.scroll_e=d)),vakata_dnd.scroll_e&&$.vakata.dnd._scroll(!0),vakata_dnd.helper&&(ht=parseInt(e.pageY+$.vakata.dnd.settings.helper_top,10),hl=parseInt(e.pageX+$.vakata.dnd.settings.helper_left,10),dh&&ht+25>dh&&(ht=dh-50),dw&&hl+vakata_dnd.helper_w>dw&&(hl=dw-(vakata_dnd.helper_w+2)),vakata_dnd.helper.css({left:hl+"px",top:ht+"px"})),$.vakata.dnd._trigger("move",e),!1}},stop:function(e){if("touchend"===e.type&&e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]&&(e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,
e.target=document.elementFromPoint(e.originalEvent.changedTouches[0].pageX-window.pageXOffset,e.originalEvent.changedTouches[0].pageY-window.pageYOffset)),vakata_dnd.is_drag)e.target!==vakata_dnd.target&&$(vakata_dnd.target).off("click.vakata"),$.vakata.dnd._trigger("stop",e);else if("touchend"===e.type&&e.target===vakata_dnd.target){var to=setTimeout(function(){$(e.target).click()},100);$(e.target).one("click",function(){to&&clearTimeout(to)})}return $.vakata.dnd._clean(),!1}}}($),$.jstree.defaults.massload=null,$.jstree.plugins.massload=function(options,parent){this.init=function(el,options){this._data.massload={},parent.init.call(this,el,options)},
this._load_nodes=function(nodes,callback,is_callback,force_reload){var i,j,dom,s=this.settings.massload,toLoad=(JSON.stringify(nodes),[]),m=this._model.data;if(!is_callback){for(i=0,j=nodes.length;i<j;i++)m[nodes[i]]&&(m[nodes[i]].state.loaded||m[nodes[i]].state.failed)&&!force_reload||(toLoad.push(nodes[i]),(dom=this.get_node(nodes[i],!0))&&dom.length&&dom.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},toLoad.length){if($.isFunction(s))return s.call(this,toLoad,$.proxy(function(data){var i,j;if(data)for(i in data)data.hasOwnProperty(i)&&(this._data.massload[i]=data[i]);for(i=0,
j=nodes.length;i<j;i++)(dom=this.get_node(nodes[i],!0))&&dom.length&&dom.removeClass("jstree-loading").attr("aria-busy",!1);parent._load_nodes.call(this,nodes,callback,is_callback,force_reload)},this));if("object"==typeof s&&s&&s.url)return s=$.extend(!0,{},s),$.isFunction(s.url)&&(s.url=s.url.call(this,toLoad)),$.isFunction(s.data)&&(s.data=s.data.call(this,toLoad)),$.ajax(s).done($.proxy(function(data,t,x){var i,j;if(data)for(i in data)data.hasOwnProperty(i)&&(this._data.massload[i]=data[i]);for(i=0,j=nodes.length;i<j;i++)(dom=this.get_node(nodes[i],!0))&&dom.length&&dom.removeClass("jstree-loading").attr("aria-busy",!1)
;parent._load_nodes.call(this,nodes,callback,is_callback,force_reload)},this)).fail($.proxy(function(f){parent._load_nodes.call(this,nodes,callback,is_callback,force_reload)},this))}}return parent._load_nodes.call(this,nodes,callback,is_callback,force_reload)},this._load_node=function(obj,callback){var dom,data=this._data.massload[obj.id],rslt=null;return data?(rslt=this["string"==typeof data?"_append_html_data":"_append_json_data"](obj,"string"==typeof data?$($.parseHTML(data)).filter(function(){return 3!==this.nodeType}):data,function(status){callback.call(this,status)}),dom=this.get_node(obj.id,!0),
dom&&dom.length&&dom.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[obj.id],rslt):parent._load_node.call(this,obj,callback)}},$.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},$.jstree.plugins.search=function(options,parent){this.bind=function(){parent.bind.call(this),this._data.search.str="",this._data.search.dom=$(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",$.proxy(function(e,data){
if(this._data.search.som&&data.res.length){var i,j,k,l,m=this._model.data,p=[];for(i=0,j=data.res.length;i<j;i++)if(m[data.res[i]]&&!m[data.res[i]].state.hidden&&(p.push(data.res[i]),p=p.concat(m[data.res[i]].parents),this._data.search.smc))for(k=0,l=m[data.res[i]].children_d.length;k<l;k++)m[m[data.res[i]].children_d[k]]&&!m[m[data.res[i]].children_d[k]].state.hidden&&p.push(m[data.res[i]].children_d[k]);p=$.vakata.array_remove_item($.vakata.array_unique(p),$.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(p,!0),this.redraw(!0)}},this)).on("clear_search.jstree",$.proxy(function(e,data){
this._data.search.som&&data.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(str,skip_async,show_only_matches,inside,append,show_only_matches_children){if(!1===str||""===$.trim(str.toString()))return this.clear_search();inside=this.get_node(inside),inside=inside&&inside.id?inside.id:null,str=str.toString();var i,j,s=this.settings.search,a=!!s.ajax&&s.ajax,m=this._model.data,f=null,r=[],p=[];if(this._data.search.res.length&&!append&&this.clear_search(),show_only_matches===undefined&&(show_only_matches=s.show_only_matches),
show_only_matches_children===undefined&&(show_only_matches_children=s.show_only_matches_children),!skip_async&&!1!==a)return $.isFunction(a)?a.call(this,str,$.proxy(function(d){d&&d.d&&(d=d.d),this._load_nodes($.isArray(d)?$.vakata.array_unique(d):[],function(){this.search(str,!0,show_only_matches,inside,append,show_only_matches_children)})},this),inside):(a=$.extend({},a),a.data||(a.data={}),a.data.str=str,inside&&(a.data.inside=inside),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=$.ajax(a).fail($.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",
reason:"Could not load search parents",data:JSON.stringify(a)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done($.proxy(function(d){d&&d.d&&(d=d.d),this._load_nodes($.isArray(d)?$.vakata.array_unique(d):[],function(){this.search(str,!0,show_only_matches,inside,append,show_only_matches_children)})},this)),this._data.search.lastRequest);if(append||(this._data.search.str=str,this._data.search.dom=$(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=show_only_matches,this._data.search.smc=show_only_matches_children),f=new $.vakata.search(str,!0,{caseSensitive:s.case_sensitive,fuzzy:s.fuzzy}),
$.each(m[inside||$.jstree.root].children_d,function(ii,i){var v=m[i];v.text&&!v.state.hidden&&(!s.search_leaves_only||v.state.loaded&&0===v.children.length)&&(s.search_callback&&s.search_callback.call(this,str,v)||!s.search_callback&&f.search(v.text).isMatch)&&(r.push(i),p=p.concat(v.parents))}),r.length){for(p=$.vakata.array_unique(p),i=0,j=p.length;i<j;i++)p[i]!==$.jstree.root&&m[p[i]]&&!0===this.open_node(p[i],null,0)&&this._data.search.opn.push(p[i]);append?(this._data.search.dom=this._data.search.dom.add($(this.element[0].querySelectorAll("#"+$.map(r,function(v){
return-1!=="0123456789".indexOf(v[0])?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=$.vakata.array_unique(this._data.search.res.concat(r))):(this._data.search.dom=$(this.element[0].querySelectorAll("#"+$.map(r,function(v){return-1!=="0123456789".indexOf(v[0])?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=r),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:str,res:this._data.search.res,
show_only_matches:show_only_matches})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=$(this.element[0].querySelectorAll("#"+$.map(this._data.search.res,function(v){return-1!=="0123456789".indexOf(v[0])?"\\3"+v[0]+" "+v.substr(1).replace($.jstree.idregex,"\\$&"):v.replace($.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",
this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=$()},this.redraw_node=function(obj,deep,callback,force_render){if((obj=parent.redraw_node.apply(this,arguments))&&-1!==$.inArray(obj.id,this._data.search.res)){var i,j,tmp=null;for(i=0,j=obj.childNodes.length;i<j;i++)if(obj.childNodes[i]&&obj.childNodes[i].className&&-1!==obj.childNodes[i].className.indexOf("jstree-anchor")){tmp=obj.childNodes[i];break}tmp&&(tmp.className+=" jstree-search")}return obj}},function($){$.vakata.search=function(pattern,txt,options){options=options||{},options=$.extend({},$.vakata.search.defaults,options),!1!==options.fuzzy&&(options.fuzzy=!0),
pattern=options.caseSensitive?pattern:pattern.toLowerCase();var matchmask,pattern_alphabet,match_bitapScore,search,MATCH_LOCATION=options.location,MATCH_DISTANCE=options.distance,MATCH_THRESHOLD=options.threshold,patternLen=pattern.length;return patternLen>32&&(options.fuzzy=!1),options.fuzzy&&(matchmask=1<<patternLen-1,pattern_alphabet=function(){var mask={},i=0;for(i=0;i<patternLen;i++)mask[pattern.charAt(i)]=0;for(i=0;i<patternLen;i++)mask[pattern.charAt(i)]|=1<<patternLen-i-1;return mask}(),match_bitapScore=function(e,x){var accuracy=e/patternLen,proximity=Math.abs(MATCH_LOCATION-x)
;return MATCH_DISTANCE?accuracy+proximity/MATCH_DISTANCE:proximity?1:accuracy}),search=function(text){if(text=options.caseSensitive?text:text.toLowerCase(),pattern===text||-1!==text.indexOf(pattern))return{isMatch:!0,score:0};if(!options.fuzzy)return{isMatch:!1,score:1};var i,j,binMin,binMid,lastRd,start,finish,rd,charMatch,textLen=text.length,scoreThreshold=MATCH_THRESHOLD,bestLoc=text.indexOf(pattern,MATCH_LOCATION),binMax=patternLen+textLen,score=1,locations=[];for(-1!==bestLoc&&(scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold),
-1!==(bestLoc=text.lastIndexOf(pattern,MATCH_LOCATION+patternLen))&&(scoreThreshold=Math.min(match_bitapScore(0,bestLoc),scoreThreshold))),bestLoc=-1,i=0;i<patternLen;i++){for(binMin=0,binMid=binMax;binMin<binMid;)match_bitapScore(i,MATCH_LOCATION+binMid)<=scoreThreshold?binMin=binMid:binMax=binMid,binMid=Math.floor((binMax-binMin)/2+binMin);for(binMax=binMid,start=Math.max(1,MATCH_LOCATION-binMid+1),finish=Math.min(MATCH_LOCATION+binMid,textLen)+patternLen,rd=new Array(finish+2),rd[finish+1]=(1<<i)-1,j=finish;j>=start;j--)if(charMatch=pattern_alphabet[text.charAt(j-1)],
rd[j]=0===i?(rd[j+1]<<1|1)&charMatch:(rd[j+1]<<1|1)&charMatch|(lastRd[j+1]|lastRd[j])<<1|1|lastRd[j+1],rd[j]&matchmask&&(score=match_bitapScore(i,j-1))<=scoreThreshold){if(scoreThreshold=score,bestLoc=j-1,locations.push(bestLoc),!(bestLoc>MATCH_LOCATION))break;start=Math.max(1,2*MATCH_LOCATION-bestLoc)}if(match_bitapScore(i+1,MATCH_LOCATION)>scoreThreshold)break;lastRd=rd}return{isMatch:bestLoc>=0,score:score}},!0===txt?{search:search}:search(txt)},$.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}($),$.jstree.defaults.sort=function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},
$.jstree.plugins.sort=function(options,parent){this.bind=function(){parent.bind.call(this),this.element.on("model.jstree",$.proxy(function(e,data){this.sort(data.parent,!0)},this)).on("rename_node.jstree create_node.jstree",$.proxy(function(e,data){this.sort(data.parent||data.node.parent,!1),this.redraw_node(data.parent||data.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",$.proxy(function(e,data){this.sort(data.parent,!1),this.redraw_node(data.parent,!0)},this))},this.sort=function(obj,deep){var i,j;if((obj=this.get_node(obj))&&obj.children&&obj.children.length&&(obj.children.sort($.proxy(this.settings.sort,this)),deep))for(i=0,
j=obj.children_d.length;i<j;i++)this.sort(obj.children_d[i],!1)}};var to=!1;$.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},$.jstree.plugins.state=function(options,parent){this.bind=function(){parent.bind.call(this);var bind=$.proxy(function(){this.element.on(this.settings.state.events,$.proxy(function(){to&&clearTimeout(to),to=setTimeout($.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",$.proxy(function(e,data){this.element.one("restore_state.jstree",bind),
this.restore_state()||bind()},this))},this.save_state=function(){var tm=this.get_state();this.settings.state.preserve_loaded||delete tm.core.loaded;var st={state:tm,ttl:this.settings.state.ttl,sec:+new Date};$.vakata.storage.set(this.settings.state.key,JSON.stringify(st))},this.restore_state=function(){var k=$.vakata.storage.get(this.settings.state.key);if(k)try{k=JSON.parse(k)}catch(ex){return!1}return!(k&&k.ttl&&k.sec&&+new Date-k.sec>k.ttl||(k&&k.state&&(k=k.state),k&&$.isFunction(this.settings.state.filter)&&(k=this.settings.state.filter.call(this,k)),!k||(this.settings.state.preserve_loaded||delete k.core.loaded,
this.element.one("set_state.jstree",function(e,data){data.instance.trigger("restore_state",{state:$.extend(!0,{},k)})}),this.set_state(k),0)))},this.clear_state=function(){return $.vakata.storage.del(this.settings.state.key)}},function($,undefined){$.vakata.storage={set:function(key,val){return window.localStorage.setItem(key,val)},get:function(key){return window.localStorage.getItem(key)},del:function(key){return window.localStorage.removeItem(key)}}}($),$.jstree.defaults.types={default:{}},$.jstree.defaults.types[$.jstree.root]={},$.jstree.plugins.types=function(options,parent){this.init=function(el,options){var i,j
;if(options&&options.types&&options.types.default)for(i in options.types)if("default"!==i&&i!==$.jstree.root&&options.types.hasOwnProperty(i))for(j in options.types.default)options.types.default.hasOwnProperty(j)&&options.types[i][j]===undefined&&(options.types[i][j]=options.types.default[j]);parent.init.call(this,el,options),this._model.data[$.jstree.root].type=$.jstree.root},this.refresh=function(skip_loading,forget_state){parent.refresh.call(this,skip_loading,forget_state),this._model.data[$.jstree.root].type=$.jstree.root},this.bind=function(){this.element.on("model.jstree",$.proxy(function(e,data){
var i,j,k,m=this._model.data,dpc=data.nodes,t=this.settings.types,c="default";for(i=0,j=dpc.length;i<j;i++){if(c="default",m[dpc[i]].original&&m[dpc[i]].original.type&&t[m[dpc[i]].original.type]&&(c=m[dpc[i]].original.type),m[dpc[i]].data&&m[dpc[i]].data.jstree&&m[dpc[i]].data.jstree.type&&t[m[dpc[i]].data.jstree.type]&&(c=m[dpc[i]].data.jstree.type),m[dpc[i]].type=c,!0===m[dpc[i]].icon&&t[c].icon!==undefined&&(m[dpc[i]].icon=t[c].icon),t[c].li_attr!==undefined&&"object"==typeof t[c].li_attr)for(k in t[c].li_attr)if(t[c].li_attr.hasOwnProperty(k)){if("id"===k)continue
;m[dpc[i]].li_attr[k]===undefined?m[dpc[i]].li_attr[k]=t[c].li_attr[k]:"class"===k&&(m[dpc[i]].li_attr.class=t[c].li_attr.class+" "+m[dpc[i]].li_attr.class)}if(t[c].a_attr!==undefined&&"object"==typeof t[c].a_attr)for(k in t[c].a_attr)if(t[c].a_attr.hasOwnProperty(k)){if("id"===k)continue;m[dpc[i]].a_attr[k]===undefined?m[dpc[i]].a_attr[k]=t[c].a_attr[k]:"href"===k&&"#"===m[dpc[i]].a_attr[k]?m[dpc[i]].a_attr.href=t[c].a_attr.href:"class"===k&&(m[dpc[i]].a_attr.class=t[c].a_attr.class+" "+m[dpc[i]].a_attr.class)}}m[$.jstree.root].type=$.jstree.root},this)),parent.bind.call(this)},this.get_json=function(obj,options,flat){
var i,j,m=this._model.data,opt=options?$.extend(!0,{},options,{no_id:!1}):{},tmp=parent.get_json.call(this,obj,opt,flat);if(!1===tmp)return!1;if($.isArray(tmp))for(i=0,j=tmp.length;i<j;i++)tmp[i].type=tmp[i].id&&m[tmp[i].id]&&m[tmp[i].id].type?m[tmp[i].id].type:"default",options&&options.no_id&&(delete tmp[i].id,tmp[i].li_attr&&tmp[i].li_attr.id&&delete tmp[i].li_attr.id,tmp[i].a_attr&&tmp[i].a_attr.id&&delete tmp[i].a_attr.id);else tmp.type=tmp.id&&m[tmp.id]&&m[tmp.id].type?m[tmp.id].type:"default",options&&options.no_id&&(tmp=this._delete_ids(tmp));return tmp},this._delete_ids=function(tmp){if($.isArray(tmp)){
for(var i=0,j=tmp.length;i<j;i++)tmp[i]=this._delete_ids(tmp[i]);return tmp}return delete tmp.id,tmp.li_attr&&tmp.li_attr.id&&delete tmp.li_attr.id,tmp.a_attr&&tmp.a_attr.id&&delete tmp.a_attr.id,tmp.children&&$.isArray(tmp.children)&&(tmp.children=this._delete_ids(tmp.children)),tmp},this.check=function(chk,obj,par,pos,more){if(!1===parent.check.call(this,chk,obj,par,pos,more))return!1;obj=obj&&obj.id?obj:this.get_node(obj),par=par&&par.id?par:this.get_node(par);var tmp,d,i,j,m=obj&&obj.id?more&&more.origin?more.origin:$.jstree.reference(obj.id):null;switch(m=m&&m._model&&m._model.data?m._model.data:null,chk){case"create_node":case"move_node":
case"copy_node":if("move_node"!==chk||-1===$.inArray(obj.id,par.children)){if(tmp=this.get_rules(par),tmp.max_children!==undefined&&-1!==tmp.max_children&&tmp.max_children===par.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1;if(tmp.valid_children!==undefined&&-1!==tmp.valid_children&&-1===$.inArray(obj.type||"default",tmp.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+chk,
data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1;if(m&&obj.children_d&&obj.parents){for(d=0,i=0,j=obj.children_d.length;i<j;i++)d=Math.max(d,m[obj.children_d[i]].parents.length);d=d-obj.parents.length+1}(d<=0||d===undefined)&&(d=1);do{if(tmp.max_depth!==undefined&&-1!==tmp.max_depth&&tmp.max_depth<d)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})},!1;par=this.get_node(par.parent),tmp=this.get_rules(par),d++}while(par)}}return!0},
this.get_rules=function(obj){if(!(obj=this.get_node(obj)))return!1;var tmp=this.get_type(obj,!0);return tmp.max_depth===undefined&&(tmp.max_depth=-1),tmp.max_children===undefined&&(tmp.max_children=-1),tmp.valid_children===undefined&&(tmp.valid_children=-1),tmp},this.get_type=function(obj,rules){return!!(obj=this.get_node(obj))&&(rules?$.extend({type:obj.type},this.settings.types[obj.type]):obj.type)},this.set_type=function(obj,type){var t,t1,t2,old_type,old_icon,k,d,a,m=this._model.data;if($.isArray(obj)){for(obj=obj.slice(),t1=0,t2=obj.length;t1<t2;t1++)this.set_type(obj[t1],type);return!0}if(t=this.settings.types,obj=this.get_node(obj),
!t[type]||!obj)return!1;if(d=this.get_node(obj,!0),d&&d.length&&(a=d.children(".jstree-anchor")),old_type=obj.type,old_icon=this.get_icon(obj),obj.type=type,(!0===old_icon||!t[old_type]||t[old_type].icon!==undefined&&old_icon===t[old_type].icon)&&this.set_icon(obj,t[type].icon===undefined||t[type].icon),t[old_type]&&t[old_type].li_attr!==undefined&&"object"==typeof t[old_type].li_attr)for(k in t[old_type].li_attr)if(t[old_type].li_attr.hasOwnProperty(k)){if("id"===k)continue;"class"===k?(m[obj.id].li_attr.class=(m[obj.id].li_attr.class||"").replace(t[old_type].li_attr[k],""),
d&&d.removeClass(t[old_type].li_attr[k])):m[obj.id].li_attr[k]===t[old_type].li_attr[k]&&(m[obj.id].li_attr[k]=null,d&&d.removeAttr(k))}if(t[old_type]&&t[old_type].a_attr!==undefined&&"object"==typeof t[old_type].a_attr)for(k in t[old_type].a_attr)if(t[old_type].a_attr.hasOwnProperty(k)){if("id"===k)continue;"class"===k?(m[obj.id].a_attr.class=(m[obj.id].a_attr.class||"").replace(t[old_type].a_attr[k],""),a&&a.removeClass(t[old_type].a_attr[k])):m[obj.id].a_attr[k]===t[old_type].a_attr[k]&&("href"===k?(m[obj.id].a_attr[k]="#",a&&a.attr("href","#")):(delete m[obj.id].a_attr[k],a&&a.removeAttr(k)))}
if(t[type].li_attr!==undefined&&"object"==typeof t[type].li_attr)for(k in t[type].li_attr)if(t[type].li_attr.hasOwnProperty(k)){if("id"===k)continue;m[obj.id].li_attr[k]===undefined?(m[obj.id].li_attr[k]=t[type].li_attr[k],d&&("class"===k?d.addClass(t[type].li_attr[k]):d.attr(k,t[type].li_attr[k]))):"class"===k&&(m[obj.id].li_attr.class=t[type].li_attr[k]+" "+m[obj.id].li_attr.class,d&&d.addClass(t[type].li_attr[k]))}if(t[type].a_attr!==undefined&&"object"==typeof t[type].a_attr)for(k in t[type].a_attr)if(t[type].a_attr.hasOwnProperty(k)){if("id"===k)continue;m[obj.id].a_attr[k]===undefined?(m[obj.id].a_attr[k]=t[type].a_attr[k],
a&&("class"===k?a.addClass(t[type].a_attr[k]):a.attr(k,t[type].a_attr[k]))):"href"===k&&"#"===m[obj.id].a_attr[k]?(m[obj.id].a_attr.href=t[type].a_attr.href,a&&a.attr("href",t[type].a_attr.href)):"class"===k&&(m[obj.id].a_attr.class=t[type].a_attr.class+" "+m[obj.id].a_attr.class,a&&a.addClass(t[type].a_attr[k]))}return!0}},$.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(name,counter){return name+" ("+counter+")"}},$.jstree.plugins.unique=function(options,parent){this.check=function(chk,obj,par,pos,more){if(!1===parent.check.call(this,chk,obj,par,pos,more))return!1;if(obj=obj&&obj.id?obj:this.get_node(obj),
!(par=par&&par.id?par:this.get_node(par))||!par.children)return!0;var i,j,t,n="rename_node"===chk?pos:obj.text,c=[],s=this.settings.unique.case_sensitive,w=this.settings.unique.trim_whitespace,m=this._model.data;for(i=0,j=par.children.length;i<j;i++)t=m[par.children[i]].text,s||(t=t.toLowerCase()),w&&(t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),c.push(t);switch(s||(n=n.toLowerCase()),w&&(n=n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),chk){case"delete_node":return!0;case"rename_node":return t=obj.text||"",s||(t=t.toLowerCase()),w&&(t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),i=-1===$.inArray(n,c)||obj.text&&t===n,
i||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),i;case"create_node":return i=-1===$.inArray(n,c),i||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),i;case"copy_node":return i=-1===$.inArray(n,c),i||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",
reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),i;case"move_node":return i=obj.parent===par.id&&(!more||!more.is_multi)||-1===$.inArray(n,c),i||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+n+" already exists. Preventing: "+chk,data:JSON.stringify({chk:chk,pos:pos,obj:!(!obj||!obj.id)&&obj.id,par:!(!par||!par.id)&&par.id})}),i}return!0},this.create_node=function(par,node,pos,callback,is_loaded){if(!node||node.text===undefined){if(null===par&&(par=$.jstree.root),
!(par=this.get_node(par)))return parent.create_node.call(this,par,node,pos,callback,is_loaded);if(pos=pos===undefined?"last":pos,!pos.toString().match(/^(before|after)$/)&&!is_loaded&&!this.is_loaded(par))return parent.create_node.call(this,par,node,pos,callback,is_loaded);node||(node={});var tmp,n,dpc,i,j,t,m=this._model.data,s=this.settings.unique.case_sensitive,w=this.settings.unique.trim_whitespace,cb=this.settings.unique.duplicate;for(n=tmp=this.get_string("New node"),dpc=[],i=0,j=par.children.length;i<j;i++)t=m[par.children[i]].text,s||(t=t.toLowerCase()),w&&(t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),dpc.push(t);for(i=1,t=n,
s||(t=t.toLowerCase()),w&&(t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));-1!==$.inArray(t,dpc);)n=cb.call(this,tmp,++i).toString(),t=n,s||(t=t.toLowerCase()),w&&(t=t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));node.text=n}return parent.create_node.call(this,par,node,pos,callback,is_loaded)}};var div=document.createElement("DIV");if(div.setAttribute("unselectable","on"),div.setAttribute("role","presentation"),div.className="jstree-wholerow",div.innerHTML="&#160;",$.jstree.plugins.wholerow=function(options,parent){this.bind=function(){parent.bind.call(this),this.element.on("ready.jstree set_state.jstree",$.proxy(function(){this.hide_dots()
},this)).on("init.jstree loading.jstree ready.jstree",$.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",$.proxy(function(e,data){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",$.proxy(function(e,data){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var i,j,tmp=!1;for(i=0,j=data.selected.length;i<j;i++)(tmp=this.get_node(data.selected[i],!0))&&tmp.length&&tmp.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",$.proxy(function(e,data){
this.get_node(data.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",$.proxy(function(e,data){"hover_node"===e.type&&this.is_disabled(data.node)||this.get_node(data.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",$.proxy(function(e){if(this._data.contextmenu){e.preventDefault();var tmp=$.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY})
;$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp)}},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var tmp=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus()}).on("dblclick.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var tmp=$.Event("dblclick",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus()
}).on("click.jstree",".jstree-leaf > .jstree-ocl",$.proxy(function(e){e.stopImmediatePropagation();var tmp=$.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});$(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(tmp).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",$.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",$.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){
this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),parent.teardown.call(this)},this.redraw_node=function(obj,deep,callback,force_render){if(obj=parent.redraw_node.apply(this,arguments)){var tmp=div.cloneNode(!0);-1!==$.inArray(obj.id,this._data.core.selected)&&(tmp.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===obj.id&&(tmp.className+=" jstree-wholerow-hovered"),obj.insertBefore(tmp,obj.childNodes[0])}return obj}},document.registerElement&&Object&&Object.create){var proto=Object.create(HTMLElement.prototype);proto.createdCallback=function(){var i,c={core:{},plugins:[]}
;for(i in $.jstree.plugins)$.jstree.plugins.hasOwnProperty(i)&&this.attributes[i]&&(c.plugins.push(i),this.getAttribute(i)&&JSON.parse(this.getAttribute(i))&&(c[i]=JSON.parse(this.getAttribute(i))));for(i in $.jstree.defaults.core)$.jstree.defaults.core.hasOwnProperty(i)&&this.attributes[i]&&(c.core[i]=JSON.parse(this.getAttribute(i))||this.getAttribute(i));$(this).jstree(c)};try{document.registerElement("vakata-jstree",{prototype:proto})}catch(ignore){}}}}();var DataTable=$.fn.dataTable;DataTable.select={},DataTable.select.version="1.2.7",DataTable.select.init=function(dt){
var ctx=dt.settings()[0],init=ctx.oInit.select,defaults=DataTable.defaults.select,opts=init===undefined?defaults:init,items="row",style="api",blurable=!1,info=!0,selector="td, th",className="selected",setStyle=!1;ctx._select={},!0===opts?(style="os",setStyle=!0):"string"==typeof opts?(style=opts,setStyle=!0):$.isPlainObject(opts)&&(opts.blurable!==undefined&&(blurable=opts.blurable),opts.info!==undefined&&(info=opts.info),opts.items!==undefined&&(items=opts.items),opts.style!==undefined&&(style=opts.style,setStyle=!0),opts.selector!==undefined&&(selector=opts.selector),opts.className!==undefined&&(className=opts.className)),dt.select.selector(selector),
dt.select.items(items),dt.select.style(style),dt.select.blurable(blurable),dt.select.info(info),ctx._select.className=className,$.fn.dataTable.ext.order["select-checkbox"]=function(settings,col){return this.api().column(col,{order:"index"}).nodes().map(function(td){return"row"===settings._select.items?$(td).parent().hasClass(settings._select.className):"cell"===settings._select.items&&$(td).hasClass(settings._select.className)})},!setStyle&&$(dt.table().node()).hasClass("selectable")&&dt.select.style("os")},$.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(i,o){DataTable.ext.selector[o.type].push(function(settings,opts,indexes){
var data,selected=opts.selected,out=[];if(!0!==selected&&!1!==selected)return indexes;for(var i=0,ien=indexes.length;i<ien;i++)data=settings[o.prop][indexes[i]],(!0===selected&&!0===data._select_selected||!1===selected&&!data._select_selected)&&out.push(indexes[i]);return out})}),DataTable.ext.selector.cell.push(function(settings,opts,cells){var rowData,selected=opts.selected,out=[];if(selected===undefined)return cells;for(var i=0,ien=cells.length;i<ien;i++)rowData=settings.aoData[cells[i].row],
(!0===selected&&rowData._selected_cells&&!0===rowData._selected_cells[cells[i].column]||!1===selected&&(!rowData._selected_cells||!rowData._selected_cells[cells[i].column]))&&out.push(cells[i]);return out});var apiRegister=DataTable.Api.register,apiRegisterPlural=DataTable.Api.registerPlural;apiRegister("select()",function(){return this.iterator("table",function(ctx){DataTable.select.init(new DataTable.Api(ctx))})}),apiRegister("select.blurable()",function(flag){return flag===undefined?this.context[0]._select.blurable:this.iterator("table",function(ctx){ctx._select.blurable=flag})}),apiRegister("select.info()",function(flag){
return info===undefined?this.context[0]._select.info:this.iterator("table",function(ctx){ctx._select.info=flag})}),apiRegister("select.items()",function(items){return items===undefined?this.context[0]._select.items:this.iterator("table",function(ctx){ctx._select.items=items,eventTrigger(new DataTable.Api(ctx),"selectItems",[items])})}),apiRegister("select.style()",function(style){return style===undefined?this.context[0]._select.style:this.iterator("table",function(ctx){ctx._select.style=style,ctx._select_init||init(ctx);var dt=new DataTable.Api(ctx);disableMouseSelection(dt),"api"!==style&&enableMouseSelection(dt),
eventTrigger(new DataTable.Api(ctx),"selectStyle",[style])})}),apiRegister("select.selector()",function(selector){return selector===undefined?this.context[0]._select.selector:this.iterator("table",function(ctx){disableMouseSelection(new DataTable.Api(ctx)),ctx._select.selector=selector,"api"!==ctx._select.style&&enableMouseSelection(new DataTable.Api(ctx))})}),apiRegisterPlural("rows().select()","row().select()",function(select){var api=this;return!1===select?this.deselect():(this.iterator("row",function(ctx,idx){clear(ctx),ctx.aoData[idx]._select_selected=!0,$(ctx.aoData[idx].nTr).addClass(ctx._select.className)}),this.iterator("table",function(ctx,i){
eventTrigger(api,"select",["row",api[i]],!0)}),this)}),apiRegisterPlural("columns().select()","column().select()",function(select){var api=this;return!1===select?this.deselect():(this.iterator("column",function(ctx,idx){clear(ctx),ctx.aoColumns[idx]._select_selected=!0;var column=new DataTable.Api(ctx).column(idx);$(column.header()).addClass(ctx._select.className),$(column.footer()).addClass(ctx._select.className),column.nodes().to$().addClass(ctx._select.className)}),this.iterator("table",function(ctx,i){eventTrigger(api,"select",["column",api[i]],!0)}),this)}),apiRegisterPlural("cells().select()","cell().select()",function(select){var api=this
;return!1===select?this.deselect():(this.iterator("cell",function(ctx,rowIdx,colIdx){clear(ctx);var data=ctx.aoData[rowIdx];data._selected_cells===undefined&&(data._selected_cells=[]),data._selected_cells[colIdx]=!0,data.anCells&&$(data.anCells[colIdx]).addClass(ctx._select.className)}),this.iterator("table",function(ctx,i){eventTrigger(api,"select",["cell",api[i]],!0)}),this)}),apiRegisterPlural("rows().deselect()","row().deselect()",function(){var api=this;return this.iterator("row",function(ctx,idx){ctx.aoData[idx]._select_selected=!1,$(ctx.aoData[idx].nTr).removeClass(ctx._select.className)}),this.iterator("table",function(ctx,i){
eventTrigger(api,"deselect",["row",api[i]],!0)}),this}),apiRegisterPlural("columns().deselect()","column().deselect()",function(){var api=this;return this.iterator("column",function(ctx,idx){ctx.aoColumns[idx]._select_selected=!1;var api=new DataTable.Api(ctx),column=api.column(idx);$(column.header()).removeClass(ctx._select.className),$(column.footer()).removeClass(ctx._select.className),api.cells(null,idx).indexes().each(function(cellIdx){var data=ctx.aoData[cellIdx.row],cellSelected=data._selected_cells;!data.anCells||cellSelected&&cellSelected[cellIdx.column]||$(data.anCells[cellIdx.column]).removeClass(ctx._select.className)})}),
this.iterator("table",function(ctx,i){eventTrigger(api,"deselect",["column",api[i]],!0)}),this}),apiRegisterPlural("cells().deselect()","cell().deselect()",function(){var api=this;return this.iterator("cell",function(ctx,rowIdx,colIdx){var data=ctx.aoData[rowIdx];data._selected_cells[colIdx]=!1,data.anCells&&!ctx.aoColumns[colIdx]._select_selected&&$(data.anCells[colIdx]).removeClass(ctx._select.className)}),this.iterator("table",function(ctx,i){eventTrigger(api,"deselect",["cell",api[i]],!0)}),this});var _buttonNamespace=0;return $.extend(DataTable.ext.buttons,{selected:{text:i18n("selected","Selected"),className:"buttons-selected",
limitTo:["rows","columns","cells"],init:function(dt,node,config){var that=this;config._eventNamespace=".select"+_buttonNamespace++,dt.on(namespacedEvents(config),function(){that.enable(enabled(dt,config))}),this.disable()},destroy:function(dt,node,config){dt.off(config._eventNamespace)}},selectedSingle:{text:i18n("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(dt,node,config){var that=this;config._eventNamespace=".select"+_buttonNamespace++,dt.on(namespacedEvents(config),function(){var count=dt.rows({selected:!0}).flatten().length+dt.columns({selected:!0}).flatten().length+dt.cells({selected:!0}).flatten().length
;that.enable(1===count)}),this.disable()},destroy:function(dt,node,config){dt.off(config._eventNamespace)}},selectAll:{text:i18n("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:i18n("selectNone","Deselect all"),className:"buttons-select-none",action:function(){clear(this.settings()[0],!0)},init:function(dt,node,config){var that=this;config._eventNamespace=".select"+_buttonNamespace++,dt.on(namespacedEvents(config),function(){var count=dt.rows({selected:!0}).flatten().length+dt.columns({selected:!0}).flatten().length+dt.cells({selected:!0}).flatten().length
;that.enable(count>0)}),this.disable()},destroy:function(dt,node,config){dt.off(config._eventNamespace)}}}),$.each(["Row","Column","Cell"],function(i,item){var lc=item.toLowerCase();DataTable.ext.buttons["select"+item+"s"]={text:i18n("select"+item+"s","Select "+lc+"s"),className:"buttons-select-"+lc+"s",action:function(){this.select.items(lc)},init:function(dt){var that=this;dt.on("selectItems.dt.DT",function(e,ctx,items){that.active(items===lc)})}}}),$(document).on("preInit.dt.dtSelect",function(e,ctx){"dt"===e.namespace&&DataTable.select.init(new DataTable.Api(ctx))}),function($){!function($){$.fn.richText=function(options){
function formatText(command,option,editorID){if(void 0===option&&(option=null),doRestore(editorID),"heading"===command&&getSelectedText())pasteHTMLAtCaret("<"+option+">"+getSelectedText()+"</"+option+">");else if("fontSize"===command&&parseInt(option)>0){var selection=getSelectedText();selection=(selection+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2");var html=settings.useSingleQuotes?"<span style='font-size:"+option+"px;'>"+selection+"</span>":'<span style="font-size:'+option+'px;">'+selection+"</span>";pasteHTMLAtCaret(html)}else document.execCommand(command,!1,option)}function updateTextarea(){var $editor=$("#"+editorID),content=$editor.html()
;!0===settings.useSingleQuotes&&(content=changeAttributeQuotes(content)),$editor.siblings(".richText-initial").val(content)}function updateEditor(editorID){var $editor=$("#"+editorID),content=$editor.siblings(".richText-initial").val();$editor.html(content)}function saveSelection(editorID){var range,start,end,type,containerEl=document.getElementById(editorID);if(window.getSelection&&document.createRange){var sel=window.getSelection&&window.getSelection();if(sel&&sel.rangeCount>0&&$(sel.anchorNode).parents("#"+editorID).length>0){range=window.getSelection().getRangeAt(0);var preSelectionRange=range.cloneRange()
;preSelectionRange.selectNodeContents(containerEl),preSelectionRange.setEnd(range.startContainer,range.startOffset),start=preSelectionRange.toString().length,end=start+range.toString().length,type=start===end?"caret":"selection";var anchor=sel.anchorNode;return!("caret"!==type||!sel.anchorNode.tagName)&&sel.anchorNode,start="caret"===type&&!1!==anchor?0:preSelectionRange.toString().length,end="caret"===type&&!1!==anchor?0:start+range.toString().length,{start:start,end:end,type:type,anchor:anchor,editorID:editorID}}}return savedSelection||{start:0,end:0}}function restoreSelection(editorID,media,url){
var containerEl=document.getElementById(editorID),savedSel=savedSelection;if(savedSel||(savedSel={start:0,end:0,type:"caret",editorID:editorID,anchor:$("#"+editorID).children("div")[0]}),savedSel.editorID!==editorID)return!1;if(!0===media?containerEl=savedSel.anchor?savedSel.anchor:containerEl:!0===url&&0===savedSel.start&&0===savedSel.end&&(containerEl=savedSel.anchor?savedSel.anchor:containerEl),window.getSelection&&document.createRange){var charIndex=0,range=document.createRange();if(!range||!containerEl)return window.getSelection().removeAllRanges(),!0;range.setStart(containerEl,0),range.collapse(!0)
;for(var node,nodeStack=[containerEl],foundStart=!1,stop=!1;!stop&&(node=nodeStack.pop());)if(3===node.nodeType){var nextCharIndex=charIndex+node.length;!foundStart&&savedSel.start>=charIndex&&savedSel.start<=nextCharIndex&&(range.setStart(node,savedSel.start-charIndex),foundStart=!0),foundStart&&savedSel.end>=charIndex&&savedSel.end<=nextCharIndex&&(range.setEnd(node,savedSel.end-charIndex),stop=!0),charIndex=nextCharIndex}else for(var i=node.childNodes.length;i--;)nodeStack.push(node.childNodes[i]);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)}}function tabifyEditableTable(win,e){if(9!==e.keyCode)return!1;var sel
;if(win.getSelection&&(sel=win.getSelection(),sel.rangeCount>0)){var textNode=null,direction=null;if(e.shiftKey?(direction="previous",
textNode="TD"===sel.focusNode.nodeName?null!=sel.focusNode.previousSibling?sel.focusNode.previousSibling:null!=sel.focusNode.parentNode.previousSibling?sel.focusNode.parentNode.previousSibling.childNodes[sel.focusNode.parentNode.previousSibling.childNodes.length-1]:null:null!=sel.focusNode.parentNode.previousSibling?sel.focusNode.parentNode.previousSibling:null!=sel.focusNode.parentNode.parentNode.previousSibling?sel.focusNode.parentNode.parentNode.previousSibling.childNodes[sel.focusNode.parentNode.parentNode.previousSibling.childNodes.length-1]:null):(direction="next",
textNode="TD"===sel.focusNode.nodeName?null!=sel.focusNode.nextSibling?sel.focusNode.nextSibling:null!=sel.focusNode.parentNode.nextSibling?sel.focusNode.parentNode.nextSibling.childNodes[0]:null:null!=sel.focusNode.parentNode.nextSibling?sel.focusNode.parentNode.nextSibling:null!=sel.focusNode.parentNode.parentNode.nextSibling?sel.focusNode.parentNode.parentNode.nextSibling.childNodes[0]:null),null!=textNode)return sel.collapse(textNode,Math.min(textNode.length,sel.focusOffset+1)),null!=textNode.textContent&&sel.selectAllChildren(textNode),e.preventDefault(),!0;if(null===textNode&&"next"===direction&&"TD"===sel.focusNode.nodeName){
for(var $table=$(sel.focusNode).parents("table"),cellsPerLine=$table.find("tr").first().children("td").length,$tr=$("<tr />"),$td=$("<td />"),i=1;i<=cellsPerLine;i++)$tr.append($td.clone());$table.append($tr),tabifyEditableTable(window,{keyCode:9,shiftKey:!1,preventDefault:function(){}})}}return!1}function getSelectedText(){var range;return window.getSelection?(range=window.getSelection(),range.toString()?range.toString():range.focusNode.nodeValue):!!document.selection.createRange&&(range=document.selection.createRange(),range.text)}function doSave(editorID){addHistory($(".richText-editor#"+editorID).siblings(".richText-initial").val()),
savedSelection=saveSelection(editorID)}function addHistory(val){history.length-1>historyPosition&&(history.length=historyPosition+1),history[history.length-1]!==val&&history.push(val),historyPosition=history.length-1,setHistoryButtons()}function setHistoryButtons(){historyPosition<=0?$editor.find(".richText-undo").addClass("is-disabled"):$editor.find(".richText-undo").removeClass("is-disabled"),historyPosition>=history.length-1||0===history.length?$editor.find(".richText-redo").addClass("is-disabled"):$editor.find(".richText-redo").removeClass("is-disabled")}function undo(){historyPosition--;var value=history[historyPosition]
;$editor.find("textarea").val(value),$editor.find(".richText-editor").html(value),setHistoryButtons()}function redo(){historyPosition++;var value=history[historyPosition];$editor.find("textarea").val(value),$editor.find(".richText-editor").html(value),setHistoryButtons()}function doRestore(id){savedSelection&&restoreSelection(id||savedSelection.editorID)}function pasteHTMLAtCaret(html){var sel,range;if(window.getSelection){if(sel=window.getSelection(),sel.getRangeAt&&sel.rangeCount){range=sel.getRangeAt(0),range.deleteContents();var el=document.createElement("div");el.innerHTML=html
;for(var node,lastNode,frag=document.createDocumentFragment();node=el.firstChild;)lastNode=frag.appendChild(node);range.insertNode(frag),lastNode&&(range=range.cloneRange(),range.setStartAfter(lastNode),range.collapse(!0),sel.removeAllRanges(),sel.addRange(range))}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(html)}function changeAttributeQuotes(string){if(!string)return"";var regex,rstring;return!0===settings.useSingleQuotes?(regex=/\s+(\w+\s*=\s*(["][^"]*["])|(['][^']*[']))+/g,rstring=string.replace(regex,function($0,$1,$2){return $2?$0.replace($2,$2.replace(/\"/g,"'")):$0
})):(regex=/\s+(\w+\s*=\s*(['][^']*['])|(["][^"]*["]))+/g,rstring=string.replace(regex,function($0,$1,$2){return $2?$0.replace($2,$2.replace(/'/g,'"')):$0})),rstring}function toggleCode(editorID){doRestore(editorID),$editor.find(".richText-editor").is(":visible")?($editor.find(".richText-initial").show(),$editor.find(".richText-editor").hide(),$(".richText-toolbar").find(".richText-btn").each(function(){0===$(this).children(".fa-code").length&&$(this).parent("li").attr("data-disable","true")}),convertCaretPosition(editorID,savedSelection)):($editor.find(".richText-initial").hide(),$editor.find(".richText-editor").show(),
convertCaretPosition(editorID,savedSelection,!0),$(".richText-toolbar").find("li").removeAttr("data-disable"))}function convertCaretPosition(editorID,selection,reverse){var $editor=$("#"+editorID),$textarea=$editor.siblings(".richText-initial"),code=$textarea.val();if(!selection||!code)return{start:0,end:0};if(!0===reverse)return savedSelection={start:$editor.text().length,end:$editor.text().length,editorID:editorID},restoreSelection(editorID),!0;selection.node=$textarea[0];for(var states={start:!1,end:!1,tag:!1,isTag:!1,tagsCount:0,isHighlight:selection.start!==selection.end},i=0;i<code.length;i++)"<"===code[i]?(states.isTag=!0,states.tag=!1,
states.tagsCount++):!0===states.isTag&&">"!==code[i]?states.tagsCount++:!0===states.isTag&&">"===code[i]?(states.isTag=!1,states.tag=!0,states.tagsCount++):!0===states.tag&&(states.tag=!1),reverse||(selection.start+states.tagsCount<=i&&states.isHighlight&&!states.isTag&&!states.tag&&!states.start?(selection.start=i,states.start=!0):!(selection.start+states.tagsCount<=i+1)||states.isHighlight||states.isTag||states.tag||states.start||(selection.start=i+1,states.start=!0),selection.end+states.tagsCount<=i+1&&!states.isTag&&!states.tag&&!states.end&&(selection.end=i+1,states.end=!0));return createSelection(selection.node,selection.start,selection.end),selection}
function createSelection(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(!0),selRange.moveStart("character",start),selRange.moveEnd("character",end),selRange.select(),field.focus()}else field.setSelectionRange?(field.focus(),field.setSelectionRange(start,end)):void 0!==field.selectionStart&&(field.selectionStart=start,field.selectionEnd=end,field.focus())}function getVideoCode(url,size){var video=getVideoID(url),responsive=!1,success=!1;if(!video)return!1;size?"responsive"!==size?size=size.split("x"):(responsive=!0,size="640x360",size=size.split("x")):(size="640x360",size=size.split("x"));var html="<br><br>"
;!0===responsive&&(html+='<div class="videoEmbed" style="position:relative;height:0;padding-bottom:56.25%">');var allowfullscreen="webkitallowfullscreen mozallowfullscreen allowfullscreen";return"YouTube"===video.platform?(html+='<iframe src="https://'+(settings.youtubeCookies?"www.youtube.com":"www.youtube-nocookie.com")+"/embed/"+video.id+'?ecver=2" width="'+size[0]+'" height="'+size[1]+'" frameborder="0"'+(!0===responsive?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+allowfullscreen+"></iframe>",
success=!0):"Vimeo"===video.platform?(html+='<iframe src="https://player.vimeo.com/video/'+video.id+'" width="'+size[0]+'" height="'+size[1]+'" frameborder="0"'+(!0===responsive?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+allowfullscreen+"></iframe>",
success=!0):"Facebook"===video.platform?(html+='<iframe src="https://www.facebook.com/plugins/video.php?href='+encodeURI(url)+"&show_text=0&width="+size[0]+'" width="'+size[0]+'" height="'+size[1]+'" style="'+(!0===responsive?'position:absolute;width:100%;height:100%;left:0;border:none;overflow:hidden"':"border:none;overflow:hidden")+'" scrolling="no" frameborder="0" allowTransparency="true" '+allowfullscreen+"></iframe>",
success=!0):"Dailymotion"===video.platform&&(html+='<iframe frameborder="0" width="'+size[0]+'" height="'+size[1]+'" src="//www.dailymotion.com/embed/video/'+video.id+'"'+(!0===responsive?' style="position:absolute;width:100%;height:100%;left:0"':"")+" "+allowfullscreen+"></iframe>",success=!0),!0===responsive&&(html+="</div>"),html+="<br><br>",!!success&&html}function getVideoID(url){
var vimeoRegExp=/(?:http?s?:\/\/)?(?:www\.)?(?:vimeo\.com)\/?(.+)/,youtubeRegExp=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,facebookRegExp=/(?:http?s?:\/\/)?(?:www\.)?(?:facebook\.com)\/.*\/videos\/[0-9]+/,dailymotionRegExp=/(?:http?s?:\/\/)?(?:www\.)?(?:dailymotion\.com)\/video\/([a-zA-Z0-9]+)/,youtubeMatch=url.match(youtubeRegExp),vimeoMatch=url.match(vimeoRegExp),facebookMatch=url.match(facebookRegExp),dailymotionMatch=url.match(dailymotionRegExp);return youtubeMatch&&11===youtubeMatch[2].length?{platform:"YouTube",id:youtubeMatch[2]}:vimeoMatch&&vimeoMatch[1]?{platform:"Vimeo",id:vimeoMatch[1]}:facebookMatch&&facebookMatch[0]?{
platform:"Facebook",id:facebookMatch[0]}:!(!dailymotionMatch||!dailymotionMatch[1])&&{platform:"Dailymotion",id:dailymotionMatch[1]}}function fixFirstLine(){$editor&&!$editor.find(".richText-editor").html()?!1!==settings.useParagraph?$editor.find(".richText-editor").html("<p><br></p>"):$editor.find(".richText-editor").html("<div><br></div>"):!1!==settings.useParagraph?$editor.find(".richText-editor").find("div:not(.videoEmbed)").replaceWith(function(){return $("<p />",{html:$(this).html()})}):$editor.find(".richText-editor").find("p").replaceWith(function(){return $("<div />",{html:$(this).html()})}),updateTextarea()}var settings=$.extend({bold:!0,italic:!0,
underline:!0,leftAlign:!0,centerAlign:!0,rightAlign:!0,justify:!0,ol:!0,ul:!0,heading:!0,fonts:!0,fontList:["Arial","Arial Black","Comic Sans MS","Courier New","Geneva","Georgia","Helvetica","Impact","Lucida Console","Tahoma","Times New Roman","Verdana"],fontColor:!0,fontSize:!0,imageUpload:!0,fileUpload:!0,videoEmbed:!0,urls:!0,table:!0,removeStyles:!0,code:!0,colors:[],fileHTML:"",imageHTML:"",translations:{title:"Title",white:"White",black:"Black",brown:"Brown",beige:"Beige",darkBlue:"Dark Blue",blue:"Blue",lightBlue:"Light Blue",darkRed:"Dark Red",red:"Red",darkGreen:"Dark Green",green:"Green",purple:"Purple",darkTurquois:"Dark Turquois",
turquois:"Turquois",darkOrange:"Dark Orange",orange:"Orange",yellow:"Yellow",imageURL:"Image URL",fileURL:"File URL",linkText:"Link text",url:"URL",size:"Size",responsive:"Responsive",text:"Text",openIn:"Open in",sameTab:"Same tab",newTab:"New tab",align:"Align",left:"Left",justify:"Justify",center:"Center",right:"Right",rows:"Rows",columns:"Columns",add:"Add",pleaseEnterURL:"Please enter an URL",videoURLnotSupported:"Video URL not supported",pleaseSelectImage:"Please select an image",pleaseSelectFile:"Please select a file",bold:"Bold",italic:"Italic",underline:"Underline",alignLeft:"Align left",alignCenter:"Align centered",alignRight:"Align right",
addOrderedList:"Add ordered list",addUnorderedList:"Add unordered list",addHeading:"Add Heading/title",addFont:"Add font",addFontColor:"Add font color",addFontSize:"Add font size",addImage:"Add image",addVideo:"Add video",addFile:"Add file",addURL:"Add URL",addTable:"Add table",removeStyles:"Remove styles",code:"Show HTML code",undo:"Undo",redo:"Redo",close:"Close"},youtubeCookies:!1,useSingleQuotes:!1,height:0,heightPercentage:0,id:"",class:"",useParagraph:!1},options),$inputElement=$(this);$inputElement.addClass("richText-initial");var $editor,savedSelection,$toolbarList=$("<ul />"),$toolbarElement=$("<li />"),$btnBold=$("<a />",{class:"richText-btn",
"data-command":"bold",title:settings.translations.bold,html:'<span class="fa fa-bold"></span>'}),$btnItalic=$("<a />",{class:"richText-btn","data-command":"italic",title:settings.translations.italic,html:'<span class="fa fa-italic"></span>'}),$btnUnderline=$("<a />",{class:"richText-btn","data-command":"underline",title:settings.translations.underline,html:'<span class="fa fa-underline"></span>'}),$btnJustify=$("<a />",{class:"richText-btn","data-command":"justifyFull",title:settings.translations.justify,html:'<span class="fa fa-align-justify"></span>'}),$btnLeftAlign=$("<a />",{class:"richText-btn","data-command":"justifyLeft",
title:settings.translations.alignLeft,html:'<span class="fa fa-align-left"></span>'}),$btnCenterAlign=$("<a />",{class:"richText-btn","data-command":"justifyCenter",title:settings.translations.alignCenter,html:'<span class="fa fa-align-center"></span>'}),$btnRightAlign=$("<a />",{class:"richText-btn","data-command":"justifyRight",title:settings.translations.alignRight,html:'<span class="fa fa-align-right"></span>'}),$btnOL=$("<a />",{class:"richText-btn","data-command":"insertOrderedList",title:settings.translations.addOrderedList,html:'<span class="fa fa-list-ol"></span>'}),$btnUL=$("<a />",{class:"richText-btn","data-command":"insertUnorderedList",
title:settings.translations.addUnorderedList,html:'<span class="fa fa-list"></span>'}),$btnHeading=$("<a />",{class:"richText-btn",title:settings.translations.addHeading,html:'<span class="fa fa-header fa-heading"></span>'}),$btnFont=$("<a />",{class:"richText-btn",title:settings.translations.addFont,html:'<span class="fa fa-font"></span>'}),$btnFontColor=$("<a />",{class:"richText-btn",title:settings.translations.addFontColor,html:'<span class="fa fa-paint-brush"></span>'}),$btnFontSize=$("<a />",{class:"richText-btn",title:settings.translations.addFontSize,html:'<span class="fa fa-text-height"></span>'}),$btnImageUpload=$("<a />",{class:"richText-btn",
title:settings.translations.addImage,html:'<span class="fa fa-image"></span>'}),$btnVideoEmbed=$("<a />",{class:"richText-btn",title:settings.translations.addVideo,html:'<span class="fa fa-video-camera fa-video"></span>'}),$btnFileUpload=$("<a />",{class:"richText-btn",title:settings.translations.addFile,html:'<span class="fa fa-file-text-o far fa-file-alt"></span>'}),$btnURLs=$("<a />",{class:"richText-btn",title:settings.translations.addURL,html:'<span class="fa fa-link"></span>'}),$btnTable=$("<a />",{class:"richText-btn",title:settings.translations.addTable,html:'<span class="fa fa-table"></span>'}),$btnRemoveStyles=$("<a />",{class:"richText-btn",
"data-command":"removeFormat",title:settings.translations.removeStyles,html:'<span class="fa fa-recycle"></span>'}),$btnCode=$("<a />",{class:"richText-btn","data-command":"toggleCode",title:settings.translations.code,html:'<span class="fa fa-code"></span>'}),$dropdownOuter=$("<div />",{class:"richText-dropdown-outer"}),$dropdownClose=$("<span />",{class:"richText-dropdown-close",html:'<span title="'+settings.translations.close+'"><span class="fa fa-times"></span></span>'}),$dropdownList=$("<ul />",{class:"richText-dropdown"}),$dropdownBox=$("<div />",{class:"richText-dropdown"}),$form=$("<div />",{class:"richText-form"}),$formItem=$("<div />",{
class:"richText-form-item"}),$formLabel=$("<label />"),$formInput=$("<input />",{type:"text"}),$formInputSelect=($("<input />",{type:"file"}),$("<select />")),$formButton=$("<button />",{text:settings.translations.add,class:"btn"}),editorID="richText-"+Math.random().toString(36).substring(7),$resizeImage=null,history=[],historyPosition=0,$titles=$dropdownList.clone();$titles.append($("<li />",{html:'<a data-command="formatBlock" data-option="h1">'+settings.translations.title+" #1</a>"})),$titles.append($("<li />",{html:'<a data-command="formatBlock" data-option="h2">'+settings.translations.title+" #2</a>"})),$titles.append($("<li />",{
html:'<a data-command="formatBlock" data-option="h3">'+settings.translations.title+" #3</a>"})),$titles.append($("<li />",{html:'<a data-command="formatBlock" data-option="h4">'+settings.translations.title+" #4</a>"})),$btnHeading.append($dropdownOuter.clone().append($titles.prepend($dropdownClose.clone())));for(var fonts=settings.fontList,$fonts=$dropdownList.clone(),i=0;i<fonts.length;i++)$fonts.append($("<li />",{html:'<a style="font-family:'+fonts[i]+';" data-command="fontName" data-option="'+fonts[i]+'">'+fonts[i]+"</a>"}));$btnFont.append($dropdownOuter.clone().append($fonts.prepend($dropdownClose.clone())))
;for(var fontSizes=[24,18,16,14,12],$fontSizes=$dropdownList.clone(),i=0;i<fontSizes.length;i++)$fontSizes.append($("<li />",{html:'<a style="font-size:'+fontSizes[i]+'px;" data-command="fontSize" data-option="'+fontSizes[i]+'">Text '+fontSizes[i]+"px</a>"}));$btnFontSize.append($dropdownOuter.clone().append($fontSizes.prepend($dropdownClose.clone())));var $fontColors=$dropdownList.clone();$fontColors.html(function(command){var colors=[],result="";colors["#FFFFFF"]=settings.translations.white,colors["#000000"]=settings.translations.black,colors["#7F6000"]=settings.translations.brown,colors["#938953"]=settings.translations.beige,
colors["#1F497D"]=settings.translations.darkBlue,colors.blue=settings.translations.blue,colors["#4F81BD"]=settings.translations.lightBlue,colors["#953734"]=settings.translations.darkRed,colors.red=settings.translations.red,colors["#4F6128"]=settings.translations.darkGreen,colors.green=settings.translations.green,colors["#3F3151"]=settings.translations.purple,colors["#31859B"]=settings.translations.darkTurquois,colors["#4BACC6"]=settings.translations.turquois,colors["#E36C09"]=settings.translations.darkOrange,colors["#F79646"]=settings.translations.orange,colors["#FFFF00"]=settings.translations.yellow,
settings.colors&&settings.colors.length>0&&(colors=settings.colors);for(var i in colors)result+='<li class="inline"><a data-command="'+command+'" data-option="'+i+'" style="text-align:left;" title="'+colors[i]+'"><span class="box-color" style="background-color:'+i+'"></span></a></li>';return result}("forecolor")),$btnFontColor.append($dropdownOuter.clone().append($fontColors.prepend($dropdownClose.clone())));var $linksDropdown=$dropdownBox.clone(),$linksForm=$form.clone().attr("id","richText-URL").attr("data-editor",editorID)
;$linksForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.url).attr("for","url")).append($formInput.clone().attr("id","url"))),$linksForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.text).attr("for","urlText")).append($formInput.clone().attr("id","urlText"))),$linksForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.openIn).attr("for","openIn")).append($formInputSelect.clone().attr("id","openIn").append($("<option />",{value:"_self",text:settings.translations.sameTab})).append($("<option />",{value:"_blank",text:settings.translations.newTab})))),
$linksForm.append($formItem.clone().append($formButton.clone())),$linksDropdown.append($linksForm),$btnURLs.append($dropdownOuter.clone().append($linksDropdown.prepend($dropdownClose.clone())));var $videoDropdown=$dropdownBox.clone(),$videoForm=$form.clone().attr("id","richText-Video").attr("data-editor",editorID);$videoForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.url).attr("for","videoURL")).append($formInput.clone().attr("id","videoURL"))),
$videoForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.size).attr("for","size")).append($formInputSelect.clone().attr("id","size").append($("<option />",{value:"responsive",text:settings.translations.responsive})).append($("<option />",{value:"640x360",text:"640x360"})).append($("<option />",{value:"560x315",text:"560x315"})).append($("<option />",{value:"480x270",text:"480x270"})).append($("<option />",{value:"320x180",text:"320x180"})))),$videoForm.append($formItem.clone().append($formButton.clone())),$videoDropdown.append($videoForm),
$btnVideoEmbed.append($dropdownOuter.clone().append($videoDropdown.prepend($dropdownClose.clone())));var $imageDropdown=$dropdownBox.clone(),$imageForm=$form.clone().attr("id","richText-Image").attr("data-editor",editorID);settings.imageHTML&&($(settings.imageHTML).find("#imageURL").length>0||"imageURL"===$(settings.imageHTML).attr("id"))?$imageForm.html(settings.imageHTML):($imageForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.imageURL).attr("for","imageURL")).append($formInput.clone().attr("id","imageURL"))),
$imageForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.align).attr("for","align")).append($formInputSelect.clone().attr("id","align").append($("<option />",{value:"left",text:settings.translations.left})).append($("<option />",{value:"center",text:settings.translations.center})).append($("<option />",{value:"right",text:settings.translations.right}))))),$imageForm.append($formItem.clone().append($formButton.clone())),$imageDropdown.append($imageForm),$btnImageUpload.append($dropdownOuter.clone().append($imageDropdown.prepend($dropdownClose.clone())))
;var $fileDropdown=$dropdownBox.clone(),$fileForm=$form.clone().attr("id","richText-File").attr("data-editor",editorID);settings.fileHTML&&($(settings.fileHTML).find("#fileURL").length>0||"fileURL"===$(settings.fileHTML).attr("id"))?$fileForm.html(settings.fileHTML):($fileForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.fileURL).attr("for","fileURL")).append($formInput.clone().attr("id","fileURL"))),$fileForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.linkText).attr("for","fileText")).append($formInput.clone().attr("id","fileText")))),
$fileForm.append($formItem.clone().append($formButton.clone())),$fileDropdown.append($fileForm),$btnFileUpload.append($dropdownOuter.clone().append($fileDropdown.prepend($dropdownClose.clone())));var $tableDropdown=$dropdownBox.clone(),$tableForm=$form.clone().attr("id","richText-Table").attr("data-editor",editorID);return $tableForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.rows).attr("for","tableRows")).append($formInput.clone().attr("id","tableRows").attr("type","number"))),
$tableForm.append($formItem.clone().append($formLabel.clone().text(settings.translations.columns).attr("for","tableColumns")).append($formInput.clone().attr("id","tableColumns").attr("type","number"))),$tableForm.append($formItem.clone().append($formButton.clone())),$tableDropdown.append($tableForm),$btnTable.append($dropdownOuter.clone().append($tableDropdown.prepend($dropdownClose.clone()))),function(){var value,attributes,attributes_html="";!1!==settings.useParagraph&&document.execCommand("DefaultParagraphSeparator",!1,"p"),"TEXTAREA"===$inputElement.prop("tagName")||($inputElement.val()?(value=$inputElement.val(),
attributes=$inputElement.prop("attributes"),$.each(attributes,function(){this.name&&(attributes_html+=" "+this.name+'="'+this.value+'"')}),$inputElement.replaceWith($("<textarea"+attributes_html+' data-richtext="init">'+value+"</textarea>")),$inputElement=$('[data-richtext="init"]'),$inputElement.removeAttr("data-richtext")):$inputElement.html()?(value=$inputElement.html(),attributes=$inputElement.prop("attributes"),$.each(attributes,function(){this.name&&(attributes_html+=" "+this.name+'="'+this.value+'"')}),$inputElement.replaceWith($("<textarea"+attributes_html+' data-richtext="init">'+value+"</textarea>")),$inputElement=$('[data-richtext="init"]'),
$inputElement.removeAttr("data-richtext")):(attributes=$inputElement.prop("attributes"),$.each(attributes,function(){this.name&&(attributes_html+=" "+this.name+'="'+this.value+'"')}),$inputElement.replaceWith($("<textarea"+attributes_html+' data-richtext="init"></textarea>')),$inputElement=$('[data-richtext="init"]'),$inputElement.removeAttr("data-richtext"))),$editor=$("<div />",{class:"richText"});var $toolbar=$("<div />",{class:"richText-toolbar"}),$editorView=$("<div />",{class:"richText-editor",id:editorID,contenteditable:!0});if($toolbar.append($toolbarList),!0===settings.bold&&$toolbarList.append($toolbarElement.clone().append($btnBold)),
!0===settings.italic&&$toolbarList.append($toolbarElement.clone().append($btnItalic)),!0===settings.underline&&$toolbarList.append($toolbarElement.clone().append($btnUnderline)),!0===settings.leftAlign&&$toolbarList.append($toolbarElement.clone().append($btnLeftAlign)),!0===settings.centerAlign&&$toolbarList.append($toolbarElement.clone().append($btnCenterAlign)),!0===settings.rightAlign&&$toolbarList.append($toolbarElement.clone().append($btnRightAlign)),!0===settings.justify&&$toolbarList.append($toolbarElement.clone().append($btnJustify)),!0===settings.ol&&$toolbarList.append($toolbarElement.clone().append($btnOL)),
!0===settings.ul&&$toolbarList.append($toolbarElement.clone().append($btnUL)),!0===settings.fonts&&settings.fontList.length>0&&$toolbarList.append($toolbarElement.clone().append($btnFont)),!0===settings.fontSize&&$toolbarList.append($toolbarElement.clone().append($btnFontSize)),!0===settings.heading&&$toolbarList.append($toolbarElement.clone().append($btnHeading)),!0===settings.fontColor&&$toolbarList.append($toolbarElement.clone().append($btnFontColor)),!0===settings.imageUpload&&$toolbarList.append($toolbarElement.clone().append($btnImageUpload)),!0===settings.fileUpload&&$toolbarList.append($toolbarElement.clone().append($btnFileUpload)),
!0===settings.videoEmbed&&$toolbarList.append($toolbarElement.clone().append($btnVideoEmbed)),!0===settings.urls&&$toolbarList.append($toolbarElement.clone().append($btnURLs)),!0===settings.table&&$toolbarList.append($toolbarElement.clone().append($btnTable)),!0===settings.removeStyles&&$toolbarList.append($toolbarElement.clone().append($btnRemoveStyles)),!0===settings.code&&$toolbarList.append($toolbarElement.clone().append($btnCode)),$editorView.html($inputElement.val()),$editor.append($toolbar),$editor.append($editorView),$editor.append($inputElement.clone().hide()),$inputElement.replaceWith($editor),$editor.append($("<div />",{class:"richText-toolbar"
}).append($("<a />",{class:"richText-undo is-disabled",html:'<span class="fa fa-undo"></span>',title:settings.translations.undo})).append($("<a />",{class:"richText-redo is-disabled",html:'<span class="fa fa-repeat fa-redo"></span>',title:settings.translations.redo})).append($("<a />",{class:"richText-help",html:'<span class="fa fa-question-circle"></span>'}))),settings.height&&settings.height>0)$editor.children(".richText-editor, .richText-initial").css({"min-height":settings.height+"px",height:settings.height+"px"});else if(settings.heightPercentage&&settings.heightPercentage>0){
var parentHeight=$editor.parent().innerHeight(),height=settings.heightPercentage/100*parentHeight;height-=2*$toolbar.outerHeight(),height-=parseInt($editor.css("margin-top")),height-=parseInt($editor.css("margin-bottom")),height-=parseInt($editor.find(".richText-editor").css("padding-top")),height-=parseInt($editor.find(".richText-editor").css("padding-bottom")),$editor.children(".richText-editor, .richText-initial").css({"min-height":height+"px",height:height+"px"})}settings.class&&$editor.addClass(settings.class),settings.id&&$editor.attr("id",settings.id),fixFirstLine(),history.push($editor.find("textarea").val())}(),
$editor.find(".richText-help").on("click",function(){var $editor=$(this).parents(".richText");if($editor){var $outer=$("<div />",{class:"richText-help-popup",style:"position:absolute;top:0;right:0;bottom:0;left:0;background-color: rgba(0,0,0,0.3);"}),$inner=$("<div />",{style:"position:relative;margin:60px auto;padding:20px;background-color:#FAFAFA;width:70%;font-family:Calibri,Verdana,Helvetica,sans-serif;font-size:small;"}),$content=$("<div />",{html:'<span id="closeHelp" style="display:block;position:absolute;top:0;right:0;padding:10px;cursor:pointer;" title="'+settings.translations.close+'"><span class="fa fa-times"></span></span>'})
;$content.append('<h3 style="margin:0;">RichText</h3>'),$content.append('<hr><br>Powered by <a href="https://github.com/webfashionist/RichText" target="_blank">webfashionist/RichText</a> (Github) <br>License: <a href="https://github.com/webfashionist/RichText/blob/master/LICENSE" target="_blank">AGPL-3.0</a>'),$outer.append($inner.append($content)),$editor.append($outer),$outer.on("click","#closeHelp",function(){$(this).parents(".richText-help-popup").remove()})}}),$(document).on("click",".richText-undo, .richText-redo",function(e){var $this=$(this)
;$this.hasClass("richText-undo")&&!$this.hasClass("is-disabled")?undo():$this.hasClass("richText-redo")&&!$this.hasClass("is-disabled")&&redo()}),$(document).on("input change blur keydown keyup",".richText-editor",function(e){if((9===e.keyCode||"9"===e.keyCode)&&"keydown"===e.type)return e.preventDefault(),tabifyEditableTable(window,e),!1;fixFirstLine(),updateTextarea(),doSave($(this).attr("id"))}),$(document).on("contextmenu",".richText-editor",function(e){var $list=$("<ul />",{class:"list-rightclick richText-list"}),$li=$("<li />");$(".richText-editor").find(".richText-editNode").removeClass("richText-editNode")
;var $target=$(e.target),$richText=$target.parents(".richText"),$toolbar=$richText.find(".richText-toolbar"),positionX=e.pageX-$richText.offset().left,positionY=e.pageY-$richText.offset().top;return $list.css({top:positionY,left:positionX}),"A"===$target.prop("tagName")?(e.preventDefault(),$list.append($li.clone().html('<span class="fa fa-link"></span>')),$target.parents(".richText").append($list),$list.find(".fa-link").on("click",function(){$(".list-rightclick.richText-list").remove(),$target.addClass("richText-editNode");var $popup=$toolbar.find("#richText-URL");$popup.find("input#url").val($target.attr("href")),
$popup.find("input#urlText").val($target.text()),$popup.find("select#openIn").val($target.attr("target")),$toolbar.find(".richText-btn").children(".fa-link").parents("li").addClass("is-selected")}),!1):"IMG"===$target.prop("tagName")?(e.preventDefault(),$list.append($li.clone().html('<span class="fa fa-image"></span>')),$target.parents(".richText").append($list),$list.find(".fa-image").on("click",function(){var align;align=$target.parent("div").length>0&&"text-align:center;"===$target.parent("div").attr("style")?"center":$target.attr("align"),$(".list-rightclick.richText-list").remove(),$target.addClass("richText-editNode")
;var $popup=$toolbar.find("#richText-Image");$popup.find("input#imageURL").val($target.attr("src")),$popup.find("select#align").val(align),$toolbar.find(".richText-btn").children(".fa-image").parents("li").addClass("is-selected")}),!1):void 0}),$(document).on("input change blur",".richText-initial",function(){!0===settings.useSingleQuotes&&$(this).val(changeAttributeQuotes($(this).val()));var editorID=$(this).siblings(".richText-editor").attr("id");updateEditor(editorID),doSave(editorID)}),$(document).on("dblclick mouseup",".richText-editor",function(){doSave($(this).attr("id"))}),$(document).on("click","#richText-Video button.btn",function(event){
event.preventDefault();var $button=$(this),$form=$button.parent(".richText-form-item").parent(".richText-form");if($form.attr("data-editor")===editorID){var url=$form.find("input#videoURL").val(),size=$form.find("select#size").val();if(url){var html="";html=getVideoCode(url,size),html?(settings.useSingleQuotes,restoreSelection(editorID,!0),pasteHTMLAtCaret(html),updateTextarea(),$form.find("input#videoURL").val(""),$(".richText-toolbar li.is-selected").removeClass("is-selected")):($form.prepend($("<div />",{style:"color:red;display:none;",class:"form-item is-error",text:settings.translations.videoURLnotSupported})),
$form.children(".form-item.is-error").slideDown(),setTimeout(function(){$form.children(".form-item.is-error").slideUp(function(){$(this).remove()})},5e3))}else $form.prepend($("<div />",{style:"color:red;display:none;",class:"form-item is-error",text:settings.translations.pleaseEnterURL})),$form.children(".form-item.is-error").slideDown(),setTimeout(function(){$form.children(".form-item.is-error").slideUp(function(){$(this).remove()})},5e3)}}),$(document).on("mousedown",function(e){var $target=$(e.target);if($target.hasClass("richText-list")||0!==$target.parents(".richText-list").length||($(".richText-list.list-rightclick").remove(),
$target.hasClass("richText-form")||0!==$target.parents(".richText-form").length||$(".richText-editNode").each(function(){var $this=$(this);$this.removeClass("richText-editNode"),""===$this.attr("class")&&$this.removeAttr("class")})),"IMG"===$target.prop("tagName")&&$target.parents("#"+editorID)){var startX=e.pageX,startY=e.pageY,right=($target.innerWidth(),$target.innerHeight(),$target.offset().left,$target.offset().left+$target.innerWidth()),bottom=$target.offset().top+$target.innerHeight(),resize=($target.offset().top,!1);$target.css({cursor:"default"}),startY<=bottom&&startY>=bottom-20&&startX>=right-20&&startX<=right&&($resizeImage=$target,
$resizeImage.css({cursor:"nwse-resize"}),resize=!0),!0!==resize&&!$resizeImage||$resizeImage.data("width")?!0===resize||$resizeImage?e.preventDefault():$resizeImage=null:($resizeImage.data("width",$target.parents("#"+editorID).innerWidth()),$resizeImage.data("height",3*$target.parents("#"+editorID).innerHeight()),e.preventDefault())}}),$(document).mouseup(function(){$resizeImage&&$resizeImage.css({cursor:"default"}),$resizeImage=null}).mousemove(function(e){if(null!==$resizeImage){
var maxWidth=$resizeImage.data("width"),currentWidth=$resizeImage.width(),maxHeight=$resizeImage.data("height"),currentHeight=$resizeImage.height(),startW=$target.innerWidth(),startH=$target.innerHeight();try{startW+e.pageX-startX<=maxWidth&&startH+e.pageY-startY<=maxHeight?($resizeImage.innerWidth(startW+e.pageX-startX),updateTextarea()):startW+e.pageX-startX<=currentWidth&&startH+e.pageY-startY<=currentHeight&&($resizeImage.innerWidth(startW+e.pageX-startX),updateTextarea())}catch(error){console.error(error)}}}),$(document).on("click","#richText-URL button.btn",function(event){event.preventDefault()
;var $button=$(this),$form=$button.parent(".richText-form-item").parent(".richText-form");if($form.attr("data-editor")===editorID){var url=$form.find("input#url").val(),text=$form.find("input#urlText").val(),target=$form.find("#openIn").val();if(target||(target="_self"),text||(text=url),url){var html="";html=!0===settings.useSingleQuotes?"<a href='"+url+"' target='"+target+"'>"+text+"</a>":'<a href="'+url+'" target="'+target+'">'+text+"</a>",restoreSelection(editorID,!1,!0);var $editNode=$(".richText-editNode");$editNode.length>0&&"A"===$editNode.prop("tagName")?($editNode.attr("href",url),$editNode.attr("target",target),$editNode.text(text),
$editNode.removeClass("richText-editNode"),""===$editNode.attr("class")&&$editNode.removeAttr("class")):pasteHTMLAtCaret(html),$form.find("input#url").val(""),$form.find("input#urlText").val(""),$(".richText-toolbar li.is-selected").removeClass("is-selected")}else $form.prepend($("<div />",{style:"color:red;display:none;",class:"form-item is-error",text:settings.translations.pleaseEnterURL})),$form.children(".form-item.is-error").slideDown(),setTimeout(function(){$form.children(".form-item.is-error").slideUp(function(){$(this).remove()})},5e3)}}),$(document).on("click","#richText-Image button.btn",function(event){event.preventDefault()
;var $button=$(this),$form=$button.parent(".richText-form-item").parent(".richText-form");if($form.attr("data-editor")===editorID){var url=$form.find("#imageURL").val(),align=$form.find("select#align").val();if(align||(align="center"),url){var html="";html=!0===settings.useSingleQuotes?"center"===align?"<div style='text-align:center;'><img src='"+url+"'></div>":"<img src='"+url+"' align='"+align+"'>":"center"===align?'<div style="text-align:center;"><img src="'+url+'"></div>':'<img src="'+url+'" align="'+align+'">',restoreSelection(editorID,!0);var $editNode=$(".richText-editNode")
;$editNode.length>0&&"IMG"===$editNode.prop("tagName")?($editNode.attr("src",url),$editNode.parent("div").length>0&&"text-align:center;"===$editNode.parent("div").attr("style")&&"center"!==align?($editNode.unwrap("div"),$editNode.attr("align",align)):0!==$editNode.parent("div").length&&"text-align:center;"===$editNode.parent("div").attr("style")||"center"!==align?$editNode.attr("align",align):($editNode.wrap('<div style="text-align:center;"></div>'),$editNode.removeAttr("align")),$editNode.removeClass("richText-editNode"),""===$editNode.attr("class")&&$editNode.removeAttr("class")):pasteHTMLAtCaret(html),$form.find("input#imageURL").val(""),
$(".richText-toolbar li.is-selected").removeClass("is-selected")}else $form.prepend($("<div />",{style:"color:red;display:none;",class:"form-item is-error",text:settings.translations.pleaseSelectImage})),$form.children(".form-item.is-error").slideDown(),setTimeout(function(){$form.children(".form-item.is-error").slideUp(function(){$(this).remove()})},5e3)}}),$(document).on("click","#richText-File button.btn",function(event){event.preventDefault();var $button=$(this),$form=$button.parent(".richText-form-item").parent(".richText-form");if($form.attr("data-editor")===editorID){var url=$form.find("#fileURL").val(),text=$form.find("#fileText").val()
;if(text||(text=url),url){var html="";html=!0===settings.useSingleQuotes?"<a href='"+url+"' target='_blank'>"+text+"</a>":'<a href="'+url+'" target="_blank">'+text+"</a>",restoreSelection(editorID,!0),pasteHTMLAtCaret(html),$form.find("input#fileURL").val(""),$form.find("input#fileText").val(""),$(".richText-toolbar li.is-selected").removeClass("is-selected")}else $form.prepend($("<div />",{style:"color:red;display:none;",class:"form-item is-error",text:settings.translations.pleaseSelectFile})),$form.children(".form-item.is-error").slideDown(),setTimeout(function(){$form.children(".form-item.is-error").slideUp(function(){$(this).remove()})},5e3)}}),
$(document).on("click","#richText-Table button.btn",function(event){event.preventDefault();var $button=$(this),$form=$button.parent(".richText-form-item").parent(".richText-form");if($form.attr("data-editor")===editorID){var rows=$form.find("input#tableRows").val(),columns=$form.find("input#tableColumns").val();(!rows||rows<=0)&&(rows=2),(!columns||columns<=0)&&(columns=2);var html="";html=!0===settings.useSingleQuotes?"<table class='table-1'><tbody>":'<table class="table-1"><tbody>';for(var i=1;i<=rows;i++){html+="<tr>";for(var n=1;n<=columns;n++)html+="<td> </td>";html+="</tr>"}html+="</tbody></table>",restoreSelection(editorID,!0),pasteHTMLAtCaret(html),
$form.find("input#tableColumns").val(""),$form.find("input#tableRows").val(""),$(".richText-toolbar li.is-selected").removeClass("is-selected")}}),$(document).on("click",function(event){var $clickedElement=$(event.target)
;if(0===$clickedElement.parents(".richText-toolbar").length);else if($clickedElement.hasClass("richText-dropdown-outer"))$clickedElement.parent("a").parent("li").removeClass("is-selected");else if($clickedElement.find(".richText").length>0)$(".richText-toolbar li").removeClass("is-selected");else if($clickedElement.parent().hasClass("richText-dropdown-close"))$(".richText-toolbar li").removeClass("is-selected");else if($clickedElement.hasClass("richText-btn")&&$(event.target).children(".richText-dropdown-outer").length>0)if($clickedElement.parent("li").addClass("is-selected"),$clickedElement.children(".fa,svg").hasClass("fa-link")){
restoreSelection(editorID,!1,!0);var selectedText=getSelectedText();$clickedElement.find("input#urlText").val(""),$clickedElement.find("input#url").val(""),selectedText&&$clickedElement.find("input#urlText").val(selectedText)}else $clickedElement.hasClass("fa-image")}),$(document).on("click",".richText-toolbar a[data-command]",function(event){var $button=$(this),$toolbar=$button.closest(".richText-toolbar"),$editor=$toolbar.siblings(".richText-editor"),id=$editor.attr("id");if($editor.length>0&&id===editorID&&(!$button.parent("li").attr("data-disable")||"false"===$button.parent("li").attr("data-disable"))){event.preventDefault()
;var command=$(this).data("command");if("toggleCode"===command)toggleCode($editor.attr("id"));else{var option=null;$(this).data("option")&&(option=$(this).data("option").toString(),option.match(/^h[1-6]$/)&&(command="heading")),formatText(command,option,id),"removeFormat"===command&&($editor.find("*").each(function(){var keepAttributes=["id","class","name","action","method","src","align","alt","title","style","webkitallowfullscreen","mozallowfullscreen","allowfullscreen","width","height","frameborder"],element=$(this),attributes=$.map(this.attributes,function(item){return item.name});$.each(attributes,function(i,item){
keepAttributes.indexOf(item)<0&&"data-"!==item.substr(0,5)&&element.removeAttr(item)}),"A"===element.prop("tagName")&&element.replaceWith(function(){return $("<span />",{html:$(this).html()})})}),formatText("formatBlock","div",id)),$editor.find("div:empty,p:empty,li:empty,h1:empty,h2:empty,h3:empty,h4:empty,h5:empty,h6:empty").remove(),$editor.find("h1,h2,h3,h4,h5,h6").unwrap("h1,h2,h3,h4,h5,h6")}}$button.parents("li.is-selected").removeClass("is-selected")}),$(this)},$.fn.unRichText=function(options){function remove(){$main.find(".richText-toolbar").remove(),$main.find(".richText-editor").remove(),
$textarea.unwrap(".richText").data("editor","richText").removeClass("richText-initial").show()}var $editor,$textarea,$main,settings=$.extend({delay:0},options),$el=$(this);!function(){if($el.hasClass("richText")?$main=$el:($el.hasClass("richText-initial")||$el.hasClass("richText-editor"))&&($main=$el.parents(".richText")),!$main)return!1;$editor=$main.find(".richText-editor"),$textarea=$main.find(".richText-initial"),parseInt(settings.delay)>0?setTimeout(remove,parseInt(settings.delay)):remove()}()}}($)}($),$.fn.dataTable}),$}),define("taoQtiItem/portableLib/OAT/util/xml",[],function(){return{addNamespace:function(xml,ns){
return ns?xml.replace(/<(\/)?([^!\/:>]+)(\/)?>/g,"<$1"+ns+":$2$3>"):xml},removeNamespace:function(markup){return markup.replace(/<(\/)?(\w*):([^>]*)>/g,"<$1$3>")}}}),define("taoQtiItem/portableLib/OAT/util/math",["taoQtiItem/portableLib/jquery_2_1_1","mathJax"],function($,MathJax){"use strict";return{render:function($container){MathJax&&$container.find("math").each(function(){var $wrap,$math=$(this);$math.wrap($("<span>",{class:"math-renderer"})),$wrap=$math.parent(".math-renderer"),MathJax.Hub.Queue(["Typeset",MathJax.Hub,$wrap[0]])})}}}),function(window,document,undefined){!function(factory){"use strict"
;"function"==typeof define&&define.amd?define("taoQtiItem/portableLib/jquery.qtip",["taoQtiItem/portableLib/jquery_2_1_1"],factory):jQuery&&!jQuery.fn.qtip&&factory(jQuery)}(function($){"use strict";function QTip(target,options,id,attr){this.id=id,this.target=target,this.tooltip=NULL,this.elements={target:target},this._id=NAMESPACE+"-"+id,this.timers={img:{}},this.options=options,this.plugins={},this.cache={event:{},target:$(),disabled:FALSE,attr:attr,onTooltip:FALSE,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=FALSE}function invalidOpt(a){return a===NULL||"object"!==$.type(a)}
function invalidContent(c){return!($.isFunction(c)||c&&c.attr||c.length||"object"===$.type(c)&&(c.jquery||c.then))}function sanitizeOptions(opts){var content,text,ajax,once;return invalidOpt(opts)?FALSE:(invalidOpt(opts.metadata)&&(opts.metadata={type:opts.metadata}),"content"in opts&&(content=opts.content,invalidOpt(content)||content.jquery||content.done?(text=invalidContent(content)?FALSE:content,content=opts.content={text:text}):text=content.text,"ajax"in content&&(ajax=content.ajax,once=ajax&&ajax.once!==FALSE,delete content.ajax,content.text=function(event,api){
var loading=text||$(this).attr(api.options.content.attr)||"Loading...",deferred=$.ajax($.extend({},ajax,{context:api})).then(ajax.success,NULL,ajax.error).then(function(newContent){return newContent&&once&&api.set("content.text",newContent),newContent},function(xhr,status,error){api.destroyed||0===xhr.status||api.set("content.text",status+": "+error)});return once?loading:(api.set("content.text",loading),deferred)}),"title"in content&&($.isPlainObject(content.title)&&(content.button=content.title.button,content.title=content.title.text),invalidContent(content.title||FALSE)&&(content.title=FALSE))),
"position"in opts&&invalidOpt(opts.position)&&(opts.position={my:opts.position,at:opts.position}),"show"in opts&&invalidOpt(opts.show)&&(opts.show=opts.show.jquery?{target:opts.show}:opts.show===TRUE?{ready:TRUE}:{event:opts.show}),"hide"in opts&&invalidOpt(opts.hide)&&(opts.hide=opts.hide.jquery?{target:opts.hide}:{event:opts.hide}),"style"in opts&&invalidOpt(opts.style)&&(opts.style={classes:opts.style}),$.each(PLUGINS,function(){this.sanitize&&this.sanitize(opts)}),opts)}function convertNotation(options,notation){for(var obj,i=0,option=options,levels=notation.split(".");option=option[levels[i++]];)i<levels.length&&(obj=option)
;return[obj||options,levels.pop()]}function setCallback(notation,args){var category,rule,match;for(category in this.checks)if(this.checks.hasOwnProperty(category))for(rule in this.checks[category])this.checks[category].hasOwnProperty(rule)&&(match=new RegExp(rule,"i").exec(notation))&&(args.push(match),("builtin"===category||this.plugins[category])&&this.checks[category][rule].apply(this.plugins[category]||this,args))}function createWidgetClass(cls){return WIDGET.concat("").join(cls?"-"+cls+" ":" ")}function delay(callback,duration){if(duration>0)return setTimeout($.proxy(callback,this),duration);callback.call(this)}function showMethod(event){
this.tooltip.hasClass(CLASS_DISABLED)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=delay.call(this,function(){this.toggle(TRUE,event)},this.options.show.delay))}function hideMethod(event){if(!this.tooltip.hasClass(CLASS_DISABLED)&&!this.destroyed){var relatedTarget=$(event.relatedTarget),ontoTooltip=relatedTarget.closest(SELECTOR)[0]===this.tooltip[0],ontoTarget=relatedTarget[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),
this!==relatedTarget[0]&&"mouse"===this.options.position.target&&ontoTooltip||this.options.hide.fixed&&/mouse(out|leave|move)/.test(event.type)&&(ontoTooltip||ontoTarget))try{event.preventDefault(),event.stopImmediatePropagation()}catch(e){}else this.timers.hide=delay.call(this,function(){this.toggle(FALSE,event)},this.options.hide.delay,this)}}function inactiveMethod(event){!this.tooltip.hasClass(CLASS_DISABLED)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=delay.call(this,function(){this.hide(event)},this.options.hide.inactive))}function repositionMethod(event){
this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(event)}function delegate(selector,events,method){$(document.body).delegate(selector,(events.split?events:events.join("."+NAMESPACE+" "))+"."+NAMESPACE,function(){var api=QTIP.api[$.attr(this,ATTR_ID)];api&&!api.disabled&&method.apply(api,arguments)})}function init(elem,id,opts){var obj,posOptions,attr,config,title,docBody=$(document.body),newTarget=elem[0]===document?docBody:elem,metadata=elem.metadata?elem.metadata(opts.metadata):NULL,metadata5="html5"===opts.metadata.type&&metadata?metadata[opts.metadata.name]:NULL,html5=elem.data(opts.metadata.name||"qtipopts");try{
html5="string"==typeof html5?$.parseJSON(html5):html5}catch(e){}if(config=$.extend(TRUE,{},QTIP.defaults,opts,"object"==typeof html5?sanitizeOptions(html5):NULL,sanitizeOptions(metadata5||metadata)),posOptions=config.position,config.id=id,"boolean"==typeof config.content.text){if(attr=elem.attr(config.content.attr),config.content.attr===FALSE||!attr)return FALSE;config.content.text=attr}if(posOptions.container.length||(posOptions.container=docBody),posOptions.target===FALSE&&(posOptions.target=newTarget),config.show.target===FALSE&&(config.show.target=newTarget),config.show.solo===TRUE&&(config.show.solo=posOptions.container.closest("body")),
config.hide.target===FALSE&&(config.hide.target=newTarget),config.position.viewport===TRUE&&(config.position.viewport=posOptions.container),posOptions.container=posOptions.container.eq(0),posOptions.at=new CORNER(posOptions.at,TRUE),posOptions.my=new CORNER(posOptions.my),elem.data(NAMESPACE))if(config.overwrite)elem.qtip("destroy",!0);else if(config.overwrite===FALSE)return FALSE;return elem.attr(ATTR_HAS,id),config.suppress&&(title=elem.attr("title"))&&elem.removeAttr("title").attr(oldtitle,title).attr("title",""),obj=new QTip(elem,config,id,!!attr),elem.data(NAMESPACE,obj),obj}function camel(s){return s.charAt(0).toUpperCase()+s.slice(1)}
function vendorCss(elem,prop){var cur,val,ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+" "+cssPrefixes.join(ucProp+" ")+ucProp).split(" "),i=0;if(cssProps[prop])return elem.css(cssProps[prop]);for(;cur=props[i++];)if((val=elem.css(cur))!==undefined)return cssProps[prop]=cur,val}function intCss(elem,prop){return Math.ceil(parseFloat(vendorCss(elem,prop)))}function Tip(qtip,options){this._ns="tip",this.options=options,this.offset=options.offset,this.size=[options.width,options.height],this.qtip=qtip,this.init(qtip)}function Modal(api,options){this.options=options,this._ns="-modal",this.qtip=api,this.init(api)}function Ie6(api){this._ns="ie6",
this.qtip=api,this.init(api)}var QTIP,PROTOTYPE,CORNER,CHECKS,trackingBound,TRUE=!0,FALSE=!1,NULL=null,X="x",Y="y",WIDTH="width",TOP="top",LEFT="left",RIGHT="right",CENTER="center",FLIPINVERT="flipinvert",SHIFT="shift",PLUGINS={},NAMESPACE="qtip",ATTR_HAS="data-hasqtip",ATTR_ID="data-qtip-id",WIDGET=["ui-widget","ui-tooltip"],SELECTOR="."+NAMESPACE,INACTIVE_EVENTS="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),CLASS_FIXED=NAMESPACE+"-fixed",CLASS_DEFAULT=NAMESPACE+"-default",CLASS_FOCUS=NAMESPACE+"-focus",CLASS_HOVER=NAMESPACE+"-hover",CLASS_DISABLED=NAMESPACE+"-disabled",oldtitle="oldtitle",BROWSER={ie:function(){var v,i
;for(v=4,i=document.createElement("div");(i.innerHTML="\x3c!--[if gt IE "+v+"]><i></i><![endif]--\x3e")&&i.getElementsByTagName("i")[0];v+=1);return v>4?v:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||FALSE};PROTOTYPE=QTip.prototype,PROTOTYPE._when=function(deferreds){return $.when.apply($,deferreds)},PROTOTYPE.render=function(show){if(this.rendered||this.destroyed)return this
;var self=this,options=this.options,cache=this.cache,elements=this.elements,text=options.content.text,title=options.content.title,button=options.content.button,posOptions=options.position,deferreds=[];return $.attr(this.target[0],"aria-describedby",this._id),cache.posClass=this._createPosClass((this.position={my:posOptions.my,at:posOptions.at}).my),this.tooltip=elements.tooltip=$("<div/>",{id:this._id,class:[NAMESPACE,CLASS_DEFAULT,options.style.classes,cache.posClass].join(" "),width:options.style.width||"",height:options.style.height||"",tracking:"mouse"===posOptions.target&&posOptions.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":FALSE,
"aria-describedby":this._id+"-content","aria-hidden":TRUE}).toggleClass(CLASS_DISABLED,this.disabled).attr(ATTR_ID,this.id).data(NAMESPACE,this).appendTo(posOptions.container).append(elements.content=$("<div />",{class:NAMESPACE+"-content",id:this._id+"-content","aria-atomic":TRUE})),this.rendered=-1,this.positioning=TRUE,title&&(this._createTitle(),$.isFunction(title)||deferreds.push(this._updateTitle(title,FALSE))),button&&this._createButton(),$.isFunction(text)||deferreds.push(this._updateContent(text,FALSE)),this.rendered=TRUE,this._setWidget(),$.each(PLUGINS,function(name){var instance
;"render"===this.initialize&&(instance=this(self))&&(self.plugins[name]=instance)}),this._unassignEvents(),this._assignEvents(),this._when(deferreds).then(function(){self._trigger("render"),self.positioning=FALSE,self.hiddenDuringWait||!options.show.ready&&!show||self.toggle(TRUE,cache.event,FALSE),self.hiddenDuringWait=FALSE}),QTIP.api[this.id]=this,this},PROTOTYPE.destroy=function(immediate){function process(){if(!this.destroyed){this.destroyed=TRUE;var timer,target=this.target,title=target.attr(oldtitle);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),$.each(this.plugins,function(){this.destroy&&this.destroy()})
;for(timer in this.timers)this.timers.hasOwnProperty(timer)&&clearTimeout(this.timers[timer]);target.removeData(NAMESPACE).removeAttr(ATTR_ID).removeAttr(ATTR_HAS).removeAttr("aria-describedby"),this.options.suppress&&title&&target.attr("title",title).removeAttr(oldtitle),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=NULL,delete QTIP.api[this.id]}}return this.destroyed?this.target:(immediate===TRUE&&"hide"!==this.triggering||!this.rendered?process.call(this):(this.tooltip.one("tooltiphidden",$.proxy(process,this)),!this.triggering&&this.hide()),this.target)},CHECKS=PROTOTYPE.checks={builtin:{
"^id$":function(obj,o,v,prev){var id=v===TRUE?QTIP.nextid:v,newId=NAMESPACE+"-"+id;id!==FALSE&&id.length>0&&!$("#"+newId).length?(this._id=newId,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):obj[o]=prev},"^prerender":function(obj,o,v){v&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(obj,o,v){this._updateContent(v)},"^content.attr$":function(obj,o,v,prev){this.options.content.text===this.target.attr(prev)&&this._updateContent(this.target.attr(v))},"^content.title$":function(obj,o,v){if(!v)return this._removeTitle()
;v&&!this.elements.title&&this._createTitle(),this._updateTitle(v)},"^content.button$":function(obj,o,v){this._updateButton(v)},"^content.title.(text|button)$":function(obj,o,v){this.set("content."+o,v)},"^position.(my|at)$":function(obj,o,v){"string"==typeof v&&(this.position[o]=obj[o]=new CORNER(v,"at"===o))},"^position.container$":function(obj,o,v){this.rendered&&this.tooltip.appendTo(v)},"^show.ready$":function(obj,o,v){v&&(!this.rendered&&this.render(TRUE)||this.toggle(TRUE))},"^style.classes$":function(obj,o,v,p){this.rendered&&this.tooltip.removeClass(p).addClass(v)},"^style.(width|height)":function(obj,o,v){this.rendered&&this.tooltip.css(o,v)},
"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(obj,o,v){this.rendered&&this.tooltip.toggleClass(CLASS_DEFAULT,!!v)},"^events.(render|show|move|hide|focus|blur)$":function(obj,o,v){this.rendered&&this.tooltip[($.isFunction(v)?"":"un")+"bind"]("tooltip"+o,v)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var posOptions=this.options.position;this.tooltip.attr("tracking","mouse"===posOptions.target&&posOptions.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},PROTOTYPE.get=function(notation){if(this.destroyed)return this
;var o=convertNotation(this.options,notation.toLowerCase()),result=o[0][o[1]];return result.precedance?result.string():result};var rmove=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,rrender=/^prerender|show\.ready/i;PROTOTYPE.set=function(option,value){if(this.destroyed)return this;var name,rendered=this.rendered,reposition=FALSE,options=this.options;return"string"==typeof option?(name=option,option={},option[name]=value):option=$.extend({},option),$.each(option,function(notation,val){if(rendered&&rrender.test(notation))return void delete option[notation];var previous,obj=convertNotation(options,notation.toLowerCase())
;previous=obj[0][obj[1]],obj[0][obj[1]]=val&&val.nodeType?$(val):val,reposition=rmove.test(notation)||reposition,option[notation]=[obj[0],obj[1],val,previous]}),sanitizeOptions(options),this.positioning=TRUE,$.each(option,$.proxy(setCallback,this)),this.positioning=FALSE,this.rendered&&this.tooltip[0].offsetWidth>0&&reposition&&this.reposition("mouse"===options.position.target?NULL:this.cache.event),this},PROTOTYPE._update=function(content,element){var self=this,cache=this.cache;return this.rendered&&content?($.isFunction(content)&&(content=content.call(this.elements.target,cache.event,this)||""),$.isFunction(content.then)?(cache.waiting=TRUE,
content.then(function(c){return cache.waiting=FALSE,self._update(c,element)},NULL,function(e){return self._update(e,element)})):content===FALSE||!content&&""!==content?FALSE:(content.jquery&&content.length>0?element.empty().append(content.css({display:"block",visibility:"visible"})):element.html(content),this._waitForContent(element).then(function(images){self.rendered&&self.tooltip[0].offsetWidth>0&&self.reposition(cache.event,!images.length)}))):FALSE},PROTOTYPE._waitForContent=function(element){var cache=this.cache;return cache.waiting=TRUE,($.fn.imagesLoaded?element.imagesLoaded():(new $.Deferred).resolve([])).done(function(){cache.waiting=FALSE
}).promise()},PROTOTYPE._updateContent=function(content,reposition){this._update(content,this.elements.content,reposition)},PROTOTYPE._updateTitle=function(content,reposition){this._update(content,this.elements.title,reposition)===FALSE&&this._removeTitle(FALSE)},PROTOTYPE._createTitle=function(){var elements=this.elements,id=this._id+"-title";elements.titlebar&&this._removeTitle(),elements.titlebar=$("<div />",{class:NAMESPACE+"-titlebar "+(this.options.style.widget?createWidgetClass("header"):"")}).append(elements.title=$("<div />",{id:id,class:NAMESPACE+"-title","aria-atomic":TRUE
})).insertBefore(elements.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(event){$(this).toggleClass("ui-state-active ui-state-focus","down"===event.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(event){$(this).toggleClass("ui-state-hover","mouseover"===event.type)}),this.options.content.button&&this._createButton()},PROTOTYPE._removeTitle=function(reposition){var elements=this.elements;elements.title&&(elements.titlebar.remove(),elements.titlebar=elements.title=elements.button=NULL,reposition!==FALSE&&this.reposition())},PROTOTYPE._createPosClass=function(my){
return NAMESPACE+"-pos-"+(my||this.options.position.my).abbrev()},PROTOTYPE.reposition=function(event,effect){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=TRUE;var pluginCalculations,offset,adjusted,newClass,cache=this.cache,tooltip=this.tooltip,posOptions=this.options.position,target=posOptions.target,my=posOptions.my,at=posOptions.at,viewport=posOptions.viewport,container=posOptions.container,adjust=posOptions.adjust,method=adjust.method.split(" "),tooltipWidth=tooltip.outerWidth(FALSE),tooltipHeight=tooltip.outerHeight(FALSE),targetWidth=0,targetHeight=0,type=tooltip.css("position"),position={left:0,top:0
},visible=tooltip[0].offsetWidth>0,isScroll=event&&"scroll"===event.type,win=$(window),doc=container[0].ownerDocument,mouse=this.mouse;if($.isArray(target)&&2===target.length)at={x:LEFT,y:TOP},position={left:target[0],top:target[1]};else if("mouse"===target)at={x:LEFT,y:TOP},(!adjust.mouse||this.options.hide.distance)&&cache.origin&&cache.origin.pageX?event=cache.origin:!event||event&&("resize"===event.type||"scroll"===event.type)?event=cache.event:mouse&&mouse.pageX&&(event=mouse),"static"!==type&&(position=container.offset()),doc.body.offsetWidth!==(window.innerWidth||doc.documentElement.clientWidth)&&(offset=$(document.body).offset()),position={
left:event.pageX-position.left+(offset&&offset.left||0),top:event.pageY-position.top+(offset&&offset.top||0)},adjust.mouse&&isScroll&&mouse&&(position.left-=(mouse.scrollX||0)-win.scrollLeft(),position.top-=(mouse.scrollY||0)-win.scrollTop());else{if("event"===target?event&&event.target&&"scroll"!==event.type&&"resize"!==event.type?cache.target=$(event.target):event.target||(cache.target=this.elements.target):"event"!==target&&(cache.target=$(target.jquery?target:this.elements.target)),target=cache.target,target=$(target).eq(0),0===target.length)return this;target[0]===document||target[0]===window?(targetWidth=BROWSER.iOS?window.innerWidth:target.width(),
targetHeight=BROWSER.iOS?window.innerHeight:target.height(),target[0]===window&&(position={top:(viewport||target).scrollTop(),left:(viewport||target).scrollLeft()})):PLUGINS.imagemap&&target.is("area")?pluginCalculations=PLUGINS.imagemap(this,target,at,PLUGINS.viewport?method:FALSE):PLUGINS.svg&&target&&target[0].ownerSVGElement?pluginCalculations=PLUGINS.svg(this,target,at,PLUGINS.viewport?method:FALSE):(targetWidth=target.outerWidth(FALSE),targetHeight=target.outerHeight(FALSE),position=target.offset()),pluginCalculations&&(targetWidth=pluginCalculations.width,targetHeight=pluginCalculations.height,offset=pluginCalculations.offset,
position=pluginCalculations.position),position=this.reposition.offset(target,position,container),(BROWSER.iOS>3.1&&BROWSER.iOS<4.1||BROWSER.iOS>=4.3&&BROWSER.iOS<4.33||!BROWSER.iOS&&"fixed"===type)&&(position.left-=win.scrollLeft(),position.top-=win.scrollTop()),(!pluginCalculations||pluginCalculations&&pluginCalculations.adjustable!==FALSE)&&(position.left+=at.x===RIGHT?targetWidth:at.x===CENTER?targetWidth/2:0,position.top+="bottom"===at.y?targetHeight:at.y===CENTER?targetHeight/2:0)}return position.left+=adjust.x+(my.x===RIGHT?-tooltipWidth:my.x===CENTER?-tooltipWidth/2:0),
position.top+=adjust.y+("bottom"===my.y?-tooltipHeight:my.y===CENTER?-tooltipHeight/2:0),PLUGINS.viewport?(adjusted=position.adjusted=PLUGINS.viewport(this,position,posOptions,targetWidth,targetHeight,tooltipWidth,tooltipHeight),offset&&adjusted.left&&(position.left+=offset.left),offset&&adjusted.top&&(position.top+=offset.top),adjusted.my&&(this.position.my=adjusted.my)):position.adjusted={left:0,top:0},cache.posClass!==(newClass=this._createPosClass(this.position.my))&&(cache.posClass=newClass,tooltip.removeClass(cache.posClass).addClass(newClass)),this._trigger("move",[position,viewport.elem||viewport],event)?(delete position.adjusted,
effect===FALSE||!visible||isNaN(position.left)||isNaN(position.top)||"mouse"===target||!$.isFunction(posOptions.effect)?tooltip.css(position):$.isFunction(posOptions.effect)&&(posOptions.effect.call(tooltip,this,$.extend({},position)),tooltip.queue(function(next){$(this).css({opacity:"",height:""}),BROWSER.ie&&this.style.removeAttribute("filter"),next()})),this.positioning=FALSE,this):this},PROTOTYPE.reposition.offset=function(elem,pos,container){function scroll(e,i){pos.left+=i*e.scrollLeft(),pos.top+=i*e.scrollTop()}if(!container[0])return pos
;var scrolled,position,parentOffset,overflow,ownerDocument=$(elem[0].ownerDocument),quirks=!!BROWSER.ie&&"CSS1Compat"!==document.compatMode,parent=container[0];do{"static"!==(position=$.css(parent,"position"))&&("fixed"===position?(parentOffset=parent.getBoundingClientRect(),scroll(ownerDocument,-1)):(parentOffset=$(parent).position(),parentOffset.left+=parseFloat($.css(parent,"borderLeftWidth"))||0,parentOffset.top+=parseFloat($.css(parent,"borderTopWidth"))||0),pos.left-=parentOffset.left+(parseFloat($.css(parent,"marginLeft"))||0),pos.top-=parentOffset.top+(parseFloat($.css(parent,"marginTop"))||0),
scrolled||"hidden"===(overflow=$.css(parent,"overflow"))||"visible"===overflow||(scrolled=$(parent)))}while(parent=parent.offsetParent);return scrolled&&(scrolled[0]!==ownerDocument[0]||quirks)&&scroll(scrolled,1),pos};var C=(CORNER=PROTOTYPE.reposition.Corner=function(corner,forceY){corner=(""+corner).replace(/([A-Z])/," $1").replace(/middle/gi,CENTER).toLowerCase(),this.x=(corner.match(/left|right/i)||corner.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(corner.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!forceY;var f=corner.charAt(0);this.precedance="t"===f||"b"===f?Y:X}).prototype;C.invert=function(z,center){
this[z]=this[z]===LEFT?RIGHT:this[z]===RIGHT?LEFT:center||this[z]},C.string=function(join){var x=this.x,y=this.y,result=x!==y?"center"===x||"center"!==y&&(this.precedance===Y||this.forceY)?[y,x]:[x,y]:[x];return!1!==join?result.join(" "):result},C.abbrev=function(){var result=this.string(!1);return result[0].charAt(0)+(result[1]&&result[1].charAt(0)||"")},C.clone=function(){return new CORNER(this.string(),this.forceY)},PROTOTYPE.toggle=function(state,event){var cache=this.cache,options=this.options,tooltip=this.tooltip;if(event){
if(/over|enter/.test(event.type)&&cache.event&&/out|leave/.test(cache.event.type)&&options.show.target.add(event.target).length===options.show.target.length&&tooltip.has(event.relatedTarget).length)return this;cache.event=$.event.fix(event)}if(this.waiting&&!state&&(this.hiddenDuringWait=TRUE),!this.rendered)return state?this.render(1):this;if(this.destroyed||this.disabled)return this
;var identicalState,allow,after,type=state?"show":"hide",opts=this.options[type],posOptions=this.options.position,contentOptions=this.options.content,width=this.tooltip.css("width"),visible=this.tooltip.is(":visible"),animate=state||1===opts.target.length,sameTarget=!event||opts.target.length<2||cache.target[0]===event.target;return(typeof state).search("boolean|number")&&(state=!visible),identicalState=!tooltip.is(":animated")&&visible===state&&sameTarget,allow=identicalState?NULL:!!this._trigger(type,[90]),this.destroyed?this:(allow!==FALSE&&state&&this.focus(event),!allow||identicalState?this:($.attr(tooltip[0],"aria-hidden",!state),
state?(this.mouse&&(cache.origin=$.event.fix(this.mouse)),$.isFunction(contentOptions.text)&&this._updateContent(contentOptions.text,FALSE),$.isFunction(contentOptions.title)&&this._updateTitle(contentOptions.title,FALSE),!trackingBound&&"mouse"===posOptions.target&&posOptions.adjust.mouse&&($(document).bind("mousemove."+NAMESPACE,this._storeMouse),trackingBound=TRUE),width||tooltip.css("width",tooltip.outerWidth(FALSE)),this.reposition(event,arguments[2]),width||tooltip.css("width",""),
opts.solo&&("string"==typeof opts.solo?$(opts.solo):$(SELECTOR,opts.solo)).not(tooltip).not(opts.target).qtip("hide",new $.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete cache.origin,trackingBound&&!$(SELECTOR+'[tracking="true"]:visible',opts.solo).not(tooltip).length&&($(document).unbind("mousemove."+NAMESPACE),trackingBound=FALSE),this.blur(event)),after=$.proxy(function(){state?(BROWSER.ie&&tooltip[0].style.removeAttribute("filter"),tooltip.css("overflow",""),"string"==typeof opts.autofocus&&$(this.options.show.autofocus,tooltip).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):tooltip.css({display:"",visibility:"",
opacity:"",left:"",top:""}),this._trigger(state?"visible":"hidden")},this),opts.effect===FALSE||animate===FALSE?(tooltip[type](),after()):$.isFunction(opts.effect)?(tooltip.stop(1,1),opts.effect.call(tooltip,this),tooltip.queue("fx",function(n){after(),n()})):tooltip.fadeTo(90,state?1:0,after),state&&opts.target.trigger("qtip-"+this.id+"-inactive"),this))},PROTOTYPE.show=function(event){return this.toggle(TRUE,event)},PROTOTYPE.hide=function(event){return this.toggle(FALSE,event)},PROTOTYPE.focus=function(event){if(!this.rendered||this.destroyed)return this
;var qtips=$(SELECTOR),tooltip=this.tooltip,curIndex=parseInt(tooltip[0].style.zIndex,10),newIndex=QTIP.zindex+qtips.length;return tooltip.hasClass(CLASS_FOCUS)||this._trigger("focus",[newIndex],event)&&(curIndex!==newIndex&&(qtips.each(function(){this.style.zIndex>curIndex&&(this.style.zIndex=this.style.zIndex-1)}),qtips.filter("."+CLASS_FOCUS).qtip("blur",event)),tooltip.addClass(CLASS_FOCUS)[0].style.zIndex=newIndex),this},PROTOTYPE.blur=function(event){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(CLASS_FOCUS),this._trigger("blur",[this.tooltip.css("zIndex")],event),this)},PROTOTYPE.disable=function(state){
return this.destroyed?this:("toggle"===state?state=!(this.rendered?this.tooltip.hasClass(CLASS_DISABLED):this.disabled):"boolean"!=typeof state&&(state=TRUE),this.rendered&&this.tooltip.toggleClass(CLASS_DISABLED,state).attr("aria-disabled",state),this.disabled=!!state,this)},PROTOTYPE.enable=function(){return this.disable(FALSE)},PROTOTYPE._createButton=function(){var self=this,elements=this.elements,tooltip=elements.tooltip,button=this.options.content.button,isString="string"==typeof button,close=isString?button:"Close tooltip";elements.button&&elements.button.remove(),button.jquery?elements.button=button:elements.button=$("<a />",{
class:"qtip-close "+(this.options.style.widget?"":NAMESPACE+"-icon"),title:close,"aria-label":close}).prepend($("<span />",{class:"ui-icon ui-icon-close",html:"&times;"})),elements.button.appendTo(elements.titlebar||tooltip).attr("role","button").click(function(event){return tooltip.hasClass(CLASS_DISABLED)||self.hide(event),FALSE})},PROTOTYPE._updateButton=function(button){if(!this.rendered)return FALSE;var elem=this.elements.button;button?this._createButton():elem.remove()},PROTOTYPE._setWidget=function(){var on=this.options.style.widget,elements=this.elements,tooltip=elements.tooltip,disabled=tooltip.hasClass(CLASS_DISABLED)
;tooltip.removeClass(CLASS_DISABLED),CLASS_DISABLED=on?"ui-state-disabled":"qtip-disabled",tooltip.toggleClass(CLASS_DISABLED,disabled),tooltip.toggleClass("ui-helper-reset "+createWidgetClass(),on).toggleClass(CLASS_DEFAULT,this.options.style.def&&!on),elements.content&&elements.content.toggleClass(createWidgetClass("content"),on),elements.titlebar&&elements.titlebar.toggleClass(createWidgetClass("header"),on),elements.button&&elements.button.toggleClass(NAMESPACE+"-icon",!on)},PROTOTYPE._storeMouse=function(event){return(this.mouse=$.event.fix(event)).type="mousemove",this},PROTOTYPE._bind=function(targets,events,method,suffix,context){
if(targets&&method&&events.length){var ns="."+this._id+(suffix?"-"+suffix:"");return $(targets).bind((events.split?events:events.join(ns+" "))+ns,$.proxy(method,context||this)),this}},PROTOTYPE._unbind=function(targets,suffix){return targets&&$(targets).unbind("."+this._id+(suffix?"-"+suffix:"")),this},PROTOTYPE._trigger=function(type,args,event){var callback=new $.Event("tooltip"+type);return callback.originalEvent=event&&$.extend({},event)||this.cache.event||NULL,this.triggering=type,this.tooltip.trigger(callback,[this].concat(args||[])),this.triggering=FALSE,!callback.isDefaultPrevented()},
PROTOTYPE._bindEvents=function(showEvents,hideEvents,showTargets,hideTargets,showCallback,hideCallback){var similarTargets=showTargets.filter(hideTargets).add(hideTargets.filter(showTargets)),toggleEvents=[];similarTargets.length&&($.each(hideEvents,function(i,type){var showIndex=$.inArray(type,showEvents);showIndex>-1&&toggleEvents.push(showEvents.splice(showIndex,1)[0])}),toggleEvents.length&&(this._bind(similarTargets,toggleEvents,function(event){(!!this.rendered&&this.tooltip[0].offsetWidth>0?hideCallback:showCallback).call(this,event)}),showTargets=showTargets.not(similarTargets),hideTargets=hideTargets.not(similarTargets))),
this._bind(showTargets,showEvents,showCallback),this._bind(hideTargets,hideEvents,hideCallback)},PROTOTYPE._assignInitialEvents=function(event){function hoverIntent(hoverEvent){if(this.disabled||this.destroyed)return FALSE;this.cache.event=hoverEvent&&$.event.fix(hoverEvent),this.cache.target=hoverEvent&&$(hoverEvent.target),clearTimeout(this.timers.show),this.timers.show=delay.call(this,function(){this.render("object"==typeof hoverEvent||options.show.ready)},options.prerender?0:options.show.delay)}
var options=this.options,showTarget=options.show.target,hideTarget=options.hide.target,showEvents=options.show.event?$.trim(""+options.show.event).split(" "):[],hideEvents=options.hide.event?$.trim(""+options.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(options.show.event)&&!/mouse(out|leave)/i.test(options.hide.event)&&hideEvents.push("mouseleave"),this._bind(showTarget,"mousemove",function(moveEvent){this._storeMouse(moveEvent),this.cache.onTarget=TRUE}),this._bindEvents(showEvents,hideEvents,showTarget,hideTarget,hoverIntent,function(){
if(!this.timers)return FALSE;clearTimeout(this.timers.show)}),(options.show.ready||options.prerender)&&hoverIntent.call(this,event)},PROTOTYPE._assignEvents=function(){var self=this,options=this.options,posOptions=options.position,tooltip=this.tooltip,showTarget=options.show.target,hideTarget=options.hide.target,containerTarget=posOptions.container,viewportTarget=posOptions.viewport,documentTarget=$(document),windowTarget=$(window),showEvents=options.show.event?$.trim(""+options.show.event).split(" "):[],hideEvents=options.hide.event?$.trim(""+options.hide.event).split(" "):[];$.each(options.events,function(name,callback){
self._bind(tooltip,"toggle"===name?["tooltipshow","tooltiphide"]:["tooltip"+name],callback,null,tooltip)}),/mouse(out|leave)/i.test(options.hide.event)&&"window"===options.hide.leave&&this._bind(documentTarget,["mouseout","blur"],function(event){/select|option/.test(event.target.nodeName)||event.relatedTarget||this.hide(event)}),options.hide.fixed?hideTarget=hideTarget.add(tooltip.addClass(CLASS_FIXED)):/mouse(over|enter)/i.test(options.show.event)&&this._bind(hideTarget,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+options.hide.event).indexOf("unfocus")>-1&&this._bind(containerTarget.closest("html"),["mousedown","touchstart"],function(event){
var elem=$(event.target),enabled=this.rendered&&!this.tooltip.hasClass(CLASS_DISABLED)&&this.tooltip[0].offsetWidth>0,isAncestor=elem.parents(SELECTOR).filter(this.tooltip[0]).length>0;elem[0]===this.target[0]||elem[0]===this.tooltip[0]||isAncestor||this.target.has(elem[0]).length||!enabled||this.hide(event)}),"number"==typeof options.hide.inactive&&(this._bind(showTarget,"qtip-"+this.id+"-inactive",inactiveMethod,"inactive"),this._bind(hideTarget.add(tooltip),QTIP.inactiveEvents,inactiveMethod)),this._bindEvents(showEvents,hideEvents,showTarget,hideTarget,showMethod,hideMethod),this._bind(showTarget.add(tooltip),"mousemove",function(event){
if("number"==typeof options.hide.distance){var origin=this.cache.origin||{},limit=this.options.hide.distance,abs=Math.abs;(abs(event.pageX-origin.pageX)>=limit||abs(event.pageY-origin.pageY)>=limit)&&this.hide(event)}this._storeMouse(event)}),"mouse"===posOptions.target&&posOptions.adjust.mouse&&(options.hide.event&&this._bind(showTarget,["mouseenter","mouseleave"],function(event){if(!this.cache)return FALSE;this.cache.onTarget="mouseenter"===event.type}),this._bind(documentTarget,"mousemove",function(event){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(CLASS_DISABLED)&&this.tooltip[0].offsetWidth>0&&this.reposition(event)})),
(posOptions.adjust.resize||viewportTarget.length)&&this._bind($.event.special.resize?viewportTarget:windowTarget,"resize",repositionMethod),posOptions.adjust.scroll&&this._bind(windowTarget.add(posOptions.container),"scroll",repositionMethod)},PROTOTYPE._unassignEvents=function(){var options=this.options,showTargets=options.show.target,hideTargets=options.hide.target,targets=$.grep([this.elements.target[0],this.rendered&&this.tooltip[0],options.position.container[0],options.position.viewport[0],options.position.container.closest("html")[0],window,document],function(i){return"object"==typeof i})
;showTargets&&showTargets.toArray&&(targets=targets.concat(showTargets.toArray())),hideTargets&&hideTargets.toArray&&(targets=targets.concat(hideTargets.toArray())),this._unbind(targets)._unbind(targets,"destroy")._unbind(targets,"inactive")},$(function(){delegate(SELECTOR,["mouseenter","mouseleave"],function(event){var state="mouseenter"===event.type,tooltip=$(event.currentTarget),target=$(event.relatedTarget||event.target),options=this.options;state?(this.focus(event),
tooltip.hasClass(CLASS_FIXED)&&!tooltip.hasClass(CLASS_DISABLED)&&clearTimeout(this.timers.hide)):"mouse"===options.position.target&&options.position.adjust.mouse&&options.hide.event&&options.show.target&&!target.closest(options.show.target[0]).length&&this.hide(event),tooltip.toggleClass(CLASS_HOVER,state)}),delegate("["+ATTR_ID+"]",INACTIVE_EVENTS,inactiveMethod)}),QTIP=$.fn.qtip=function(options,notation,newValue){var command=(""+options).toLowerCase(),returned=NULL,args=$.makeArray(arguments).slice(1),event=args[args.length-1],opts=this[0]?$.data(this[0],NAMESPACE):NULL
;return!arguments.length&&opts||"api"===command?opts:"string"==typeof options?(this.each(function(){var api=$.data(this,NAMESPACE);if(!api)return TRUE;if(event&&event.timeStamp&&(api.cache.event=event),!notation||"option"!==command&&"options"!==command)api[command]&&api[command].apply(api,args);else{if(newValue===undefined&&!$.isPlainObject(notation))return returned=api.get(notation),FALSE;api.set(notation,newValue)}}),returned!==NULL?returned:this):"object"!=typeof options&&arguments.length?void 0:(opts=sanitizeOptions($.extend(TRUE,{},options)),this.each(function(i){var api,id;if(id=$.isArray(opts.id)?opts.id[i]:opts.id,
id=!id||id===FALSE||id.length<1||QTIP.api[id]?QTIP.nextid++:id,(api=init($(this),id,opts))===FALSE)return TRUE;QTIP.api[id]=api,$.each(PLUGINS,function(){"initialize"===this.initialize&&this(api)}),api._assignInitialEvents(event)}))},$.qtip=QTip,QTIP.api={},$.each({attr:function(attr,val){if(this.length){var self=this[0],api=$.data(self,"qtip");if("title"===attr&&api&&api.options&&"object"==typeof api&&"object"==typeof api.options&&api.options.suppress)return arguments.length<2?$.attr(self,oldtitle):(api&&"title"===api.options.content.attr&&api.cache.attr&&api.set("content.text",val),this.attr(oldtitle,val))}
return $.fn.attr_replacedByqTip.apply(this,arguments)},clone:function(keepData){var elems=$.fn.clone_replacedByqTip.apply(this,arguments);return keepData||elems.filter("["+oldtitle+"]").attr("title",function(){return $.attr(this,oldtitle)}).removeAttr(oldtitle),elems}},function(name,func){if(!func||$.fn[name+"_replacedByqTip"])return TRUE;var old=$.fn[name+"_replacedByqTip"]=$.fn[name];$.fn[name]=function(){return func.apply(this,arguments)||old.apply(this,arguments)}}),$.ui||($.cleanData_replacedByqTip=$.cleanData,$.cleanData=function(elems){for(var elem,i=0;(elem=$(elems[i])).length;i++)if(elem.attr(ATTR_HAS))try{elem.triggerHandler("removeqtip")
}catch(e){}$.cleanData_replacedByqTip.apply(this,arguments)}),QTIP.version="3.0.3",QTIP.nextid=0,QTIP.inactiveEvents=INACTIVE_EVENTS,QTIP.zindex=15e3,QTIP.defaults={prerender:FALSE,id:FALSE,overwrite:TRUE,suppress:TRUE,content:{text:TRUE,attr:"title",title:FALSE,button:FALSE},position:{my:"top left",at:"bottom right",target:FALSE,container:FALSE,viewport:FALSE,adjust:{x:0,y:0,mouse:TRUE,scroll:TRUE,resize:TRUE,method:"flipinvert flipinvert"},effect:function(api,pos){$(this).animate(pos,{duration:200,queue:FALSE})}},show:{target:FALSE,event:"mouseenter",effect:TRUE,delay:90,solo:FALSE,ready:FALSE,autofocus:FALSE},hide:{target:FALSE,event:"mouseleave",
effect:TRUE,delay:0,fixed:FALSE,inactive:FALSE,leave:"window",distance:FALSE},style:{classes:"",widget:FALSE,width:FALSE,height:FALSE,def:TRUE},events:{render:NULL,move:NULL,show:NULL,hide:NULL,toggle:NULL,visible:NULL,hidden:NULL,focus:NULL,blur:NULL}};var TIP,createVML,SCALE,PIXEL_RATIO,BACKING_STORE_RATIO,MARGIN="margin",BG_COLOR="background-color",HASCANVAS=!!document.createElement("canvas").getContext,INVALID=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,cssProps={},cssPrefixes=["Webkit","O","Moz","ms"];HASCANVAS?(PIXEL_RATIO=window.devicePixelRatio||1,BACKING_STORE_RATIO=function(){var context=document.createElement("canvas").getContext("2d")
;return context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||1}(),SCALE=PIXEL_RATIO/BACKING_STORE_RATIO):createVML=function(tag,props,style){return"<qtipvml:"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(props||"")+' style="behavior: url(#default#VML); '+(style||"")+'" />'},$.extend(Tip.prototype,{init:function(qtip){var context,tip;tip=this.element=qtip.elements.tip=$("<div />",{class:NAMESPACE+"-tip"}).prependTo(qtip.tooltip),HASCANVAS?(context=$("<canvas />").appendTo(this.element)[0].getContext("2d"),
context.lineJoin="miter",context.miterLimit=1e5,context.save()):(context=createVML("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(context+context),qtip._bind($("*",tip).add(tip),["click","mousedown"],function(event){event.stopPropagation()},this._ns)),qtip._bind(qtip.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(corner){var titlebar=this.qtip.elements.titlebar
;return titlebar&&(corner.y===TOP||corner.y===CENTER&&this.element.position().top+this.size[1]/2+this.options.offset<titlebar.outerHeight(TRUE))},_parseCorner:function(corner){var my=this.qtip.options.position.my;return corner===FALSE||my===FALSE?corner=FALSE:corner===TRUE?corner=new CORNER(my.string()):corner.string||(corner=new CORNER(corner),corner.fixed=TRUE),corner},_parseWidth:function(corner,side,use){var elements=this.qtip.elements,prop="border"+camel(side)+"Width";return(use?intCss(use,prop):intCss(elements.content,prop)||intCss(this._useTitle(corner)&&elements.titlebar||elements.content,prop)||intCss(elements.tooltip,prop))||0},
_parseRadius:function(corner){var elements=this.qtip.elements,prop="border"+camel(corner.y)+camel(corner.x)+"Radius";return BROWSER.ie<9?0:intCss(this._useTitle(corner)&&elements.titlebar||elements.content,prop)||intCss(elements.tooltip,prop)||0},_invalidColour:function(elem,prop,compare){var val=elem.css(prop);return!val||compare&&val===elem.css(compare)||INVALID.test(val)?FALSE:val},_parseColours:function(corner){var elements=this.qtip.elements,tip=this.element.css("cssText",""),borderSide="border"+camel(corner[corner.precedance])+camel("color"),colorElem=this._useTitle(corner)&&elements.titlebar||elements.content,css=this._invalidColour,color=[]
;return color[0]=css(tip,BG_COLOR)||css(colorElem,BG_COLOR)||css(elements.content,BG_COLOR)||css(elements.tooltip,BG_COLOR)||tip.css(BG_COLOR),color[1]=css(tip,borderSide,"color")||css(colorElem,borderSide,"color")||css(elements.content,borderSide,"color")||css(elements.tooltip,borderSide,"color")||elements.tooltip.css(borderSide),$("*",tip).add(tip).css("cssText",BG_COLOR+":transparent !important;border:0 !important;"),color},_calculateSize:function(corner){
var bigHyp,ratio,result,y=corner.precedance===Y,width=this.options.width,height=this.options.height,isCenter="c"===corner.abbrev(),base=(y?width:height)*(isCenter?.5:1),pow=Math.pow,round=Math.round,smallHyp=Math.sqrt(pow(base,2)+pow(height,2)),hyp=[this.border/base*smallHyp,this.border/height*smallHyp];return hyp[2]=Math.sqrt(pow(hyp[0],2)-pow(this.border,2)),hyp[3]=Math.sqrt(pow(hyp[1],2)-pow(this.border,2)),bigHyp=smallHyp+hyp[2]+hyp[3]+(isCenter?0:hyp[0]),ratio=bigHyp/smallHyp,result=[round(ratio*width),round(ratio*height)],y?result:result.reverse()},_calculateTip:function(corner,size,scale){scale=scale||1,size=size||this.size
;var width=size[0]*scale,height=size[1]*scale,width2=Math.ceil(width/2),height2=Math.ceil(height/2),tips={br:[0,0,width,height,width,0],bl:[0,0,width,0,0,height],tr:[0,height,width,0,width,height],tl:[0,0,0,height,width,height],tc:[0,height,width2,0,width,height],bc:[0,0,width,0,width2,height],rc:[0,0,width,height2,0,height],lc:[width,0,width,height,0,height2]};return tips.lt=tips.br,tips.rt=tips.bl,tips.lb=tips.tr,tips.rb=tips.tl,tips[corner.abbrev()]},_drawCoords:function(context,coords){context.beginPath(),context.moveTo(coords[0],coords[1]),context.lineTo(coords[2],coords[3]),context.lineTo(coords[4],coords[5]),context.closePath()},create:function(){
var c=this.corner=(HASCANVAS||BROWSER.ie)&&this._parseCorner(this.options.corner);return this.enabled=!!this.corner&&"c"!==this.corner.abbrev(),this.enabled&&(this.qtip.cache.corner=c.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(corner,position){if(!this.enabled)return this;var color,precedance,context,coords,bigCoords,translate,newSize,border,elements=this.qtip.elements,tip=this.element,inner=tip.children(),options=this.options,curSize=this.size,mimic=options.mimic,round=Math.round;corner||(corner=this.qtip.cache.corner||this.corner),mimic===FALSE?mimic=corner:(mimic=new CORNER(mimic),
mimic.precedance=corner.precedance,"inherit"===mimic.x?mimic.x=corner.x:"inherit"===mimic.y?mimic.y=corner.y:mimic.x===mimic.y&&(mimic[corner.precedance]=corner[corner.precedance])),precedance=mimic.precedance,corner.precedance===X?this._swapDimensions():this._resetDimensions(),color=this.color=this._parseColours(corner),"transparent"!==color[1]?(border=this.border=this._parseWidth(corner,corner[corner.precedance]),options.border&&border<1&&!INVALID.test(color[1])&&(color[0]=color[1]),this.border=border=options.border!==TRUE?options.border:border):this.border=border=0,newSize=this.size=this._calculateSize(corner),tip.css({width:newSize[0],height:newSize[1],
lineHeight:newSize[1]+"px"}),translate=corner.precedance===Y?[round(mimic.x===LEFT?border:mimic.x===RIGHT?newSize[0]-curSize[0]-border:(newSize[0]-curSize[0])/2),round(mimic.y===TOP?newSize[1]-curSize[1]:0)]:[round(mimic.x===LEFT?newSize[0]-curSize[0]:0),round(mimic.y===TOP?border:"bottom"===mimic.y?newSize[1]-curSize[1]-border:(newSize[1]-curSize[1])/2)],HASCANVAS?(context=inner[0].getContext("2d"),context.restore(),context.save(),context.clearRect(0,0,6e3,6e3),coords=this._calculateTip(mimic,curSize,SCALE),bigCoords=this._calculateTip(mimic,this.size,SCALE),inner.attr(WIDTH,newSize[0]*SCALE).attr("height",newSize[1]*SCALE),
inner.css(WIDTH,newSize[0]).css("height",newSize[1]),this._drawCoords(context,bigCoords),context.fillStyle=color[1],context.fill(),context.translate(translate[0]*SCALE,translate[1]*SCALE),this._drawCoords(context,coords),context.fillStyle=color[0],context.fill()):(coords=this._calculateTip(mimic),coords="m"+coords[0]+","+coords[1]+" l"+coords[2]+","+coords[3]+" "+coords[4]+","+coords[5]+" xe",translate[2]=border&&/^(r|b)/i.test(corner.string())?8===BROWSER.ie?2:1:0,inner.css({coordsize:newSize[0]+border+" "+newSize[1]+border,antialias:""+(mimic.string().indexOf(CENTER)>-1),left:translate[0]-translate[2]*Number(precedance===X),
top:translate[1]-translate[2]*Number(precedance===Y),width:newSize[0]+border,height:newSize[1]+border}).each(function(i){var $this=$(this);$this[$this.prop?"prop":"attr"]({coordsize:newSize[0]+border+" "+newSize[1]+border,path:coords,fillcolor:color[0],filled:!!i,stroked:!i}).toggle(!(!border&&!i)),!i&&$this.html(createVML("stroke",'weight="'+2*border+'px" color="'+color[1]+'" miterlimit="1000" joinstyle="miter"'))})),window.opera&&setTimeout(function(){elements.tip.css({display:"inline-block",visibility:"visible"})},1),position!==FALSE&&this.calculate(corner,newSize)},calculate:function(corner,size){if(!this.enabled)return FALSE
;var precedance,corners,self=this,elements=this.qtip.elements,tip=this.element,userOffset=this.options.offset,position={};return corner=corner||this.corner,precedance=corner.precedance,size=size||this._calculateSize(corner),corners=[corner.x,corner.y],precedance===X&&corners.reverse(),$.each(corners,function(i,side){var b,bc,br;side===CENTER?(b=precedance===Y?LEFT:TOP,position[b]="50%",position[MARGIN+"-"+b]=-Math.round(size[precedance===Y?0:1]/2)+userOffset):(b=self._parseWidth(corner,side,elements.tooltip),bc=self._parseWidth(corner,side,elements.content),br=self._parseRadius(corner),position[side]=Math.max(-self.border,i?bc:userOffset+(br>b?br:-b)))}),
position[corner[precedance]]-=size[precedance===X?0:1],tip.css({margin:"",top:"",bottom:"",left:"",right:""}).css(position),position},reposition:function(event,api,pos){function shiftflip(direction,precedance,popposite,side,opposite){direction===SHIFT&&newCorner.precedance===precedance&&adjust[side]&&newCorner[popposite]!==CENTER?newCorner.precedance=newCorner.precedance===X?Y:X:direction!==SHIFT&&adjust[side]&&(newCorner[precedance]=newCorner[precedance]===CENTER?adjust[side]>0?side:opposite:newCorner[precedance]===side?opposite:side)}function shiftonly(xy,side,opposite){
newCorner[xy]===CENTER?css[MARGIN+"-"+side]=shift[xy]=offset[MARGIN+"-"+side]-adjust[side]:(props=offset[opposite]!==undefined?[adjust[side],-offset[side]]:[-adjust[side],offset[side]],(shift[xy]=Math.max(props[0],props[1]))>props[0]&&(pos[side]-=adjust[side],shift[side]=FALSE),css[offset[opposite]!==undefined?opposite:side]=shift[xy])}if(this.enabled){var offset,props,cache=api.cache,newCorner=this.corner.clone(),adjust=pos.adjusted,method=api.options.position.adjust.method.split(" "),horizontal=method[0],vertical=method[1]||method[0],shift={left:FALSE,top:FALSE,x:0,y:0},css={};this.corner.fixed!==TRUE&&(shiftflip(horizontal,X,Y,LEFT,RIGHT),
shiftflip(vertical,Y,X,TOP,"bottom"),newCorner.string()===cache.corner.string()&&cache.cornerTop===adjust.top&&cache.cornerLeft===adjust.left||this.update(newCorner,FALSE)),offset=this.calculate(newCorner),offset.right!==undefined&&(offset.left=-offset.right),offset.bottom!==undefined&&(offset.top=-offset.bottom),offset.user=this.offset,shift.left=horizontal===SHIFT&&!!adjust.left,shift.left&&shiftonly(X,LEFT,RIGHT),shift.top=vertical===SHIFT&&!!adjust.top,shift.top&&shiftonly(Y,TOP,"bottom"),this.element.css(css).toggle(!(shift.x&&shift.y||newCorner.x===CENTER&&shift.y||newCorner.y===CENTER&&shift.x)),
pos.left-=offset.left.charAt?offset.user:horizontal!==SHIFT||shift.top||!shift.left&&!shift.top?offset.left+this.border:0,pos.top-=offset.top.charAt?offset.user:vertical!==SHIFT||shift.left||!shift.left&&!shift.top?offset.top+this.border:0,cache.cornerLeft=adjust.left,cache.cornerTop=adjust.top,cache.corner=newCorner.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),TIP=PLUGINS.tip=function(api){return new Tip(api,api.options.style.tip)},TIP.initialize="render",TIP.sanitize=function(options){if(options.style&&"tip"in options.style){
var opts=options.style.tip;"object"!=typeof opts&&(opts=options.style.tip={corner:opts}),/string|boolean/i.test(typeof opts.corner)||(opts.corner=TRUE)}},CHECKS.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(obj){this.size=[obj.width,obj.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},$.extend(TRUE,QTIP.defaults,{style:{tip:{corner:TRUE,mimic:FALSE,width:6,height:6,border:TRUE,offset:0}}});var MODAL,OVERLAY;OVERLAY=function(){function focusable(element){
if($.expr[":"].focusable)return $.expr[":"].focusable;var map,mapName,img,isTabIndexNotNaN=!isNaN($.attr(element,"tabindex")),nodeName=element.nodeName&&element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,!(!element.href||!mapName||"map"!==map.nodeName.toLowerCase())&&(!!(img=$("img[usemap=#"+mapName+"]")[0])&&img.is(":visible"))):/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN}function focusInputs(blurElems){focusableElems.length<1&&blurElems.length?blurElems.not("body").blur():focusableElems.first().focus()}
function stealFocus(event){if(elem.is(":visible")){var targetOnTop,target=$(event.target),tooltip=current.tooltip,container=target.closest(SELECTOR);targetOnTop=container.length<1?FALSE:parseInt(container[0].style.zIndex,10)>parseInt(tooltip[0].style.zIndex,10),targetOnTop||target.closest(SELECTOR)[0]===tooltip[0]||focusInputs(target)}}var current,prevState,elem,self=this,focusableElems={};$.extend(self,{init:function(){return elem=self.elem=$("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return FALSE}}).hide(),$(document.body).bind("focusin.qtip-modal",stealFocus),$(document).bind("keydown.qtip-modal",function(event){
current&&current.options.show.modal.escape&&27===event.keyCode&&current.hide(event)}),elem.bind("click.qtip-modal",function(event){current&&current.options.show.modal.blur&&current.hide(event)}),self},update:function(api){current=api,focusableElems=api.options.show.modal.stealfocus!==FALSE?api.tooltip.find("*").filter(function(){return focusable(this)}):[]},toggle:function(api,state,duration){var tooltip=api.tooltip,options=api.options.show.modal,effect=options.effect,type=state?"show":"hide",visible=elem.is(":visible"),visibleModals=$(".qtip-modal").filter(":visible:not(:animated)").not(tooltip);return self.update(api),
state&&options.stealfocus!==FALSE&&focusInputs($(":focus")),elem.toggleClass("blurs",options.blur),state&&elem.appendTo(document.body),elem.is(":animated")&&visible===state&&prevState!==FALSE||!state&&visibleModals.length?self:(elem.stop(TRUE,FALSE),$.isFunction(effect)?effect.call(elem,state):effect===FALSE?elem[type]():elem.fadeTo(parseInt(duration,10)||90,state?1:0,function(){state||elem.hide()}),state||elem.queue(function(next){elem.css({left:"",top:""}),$(".qtip-modal").length||elem.detach(),next()}),prevState=state,current.destroyed&&(current=NULL),self)}}),self.init()},OVERLAY=new OVERLAY,$.extend(Modal.prototype,{init:function(qtip){
var tooltip=qtip.tooltip;if(!this.options.on)return this;qtip.elements.overlay=OVERLAY.elem,tooltip.addClass("qtip-modal").css("z-index",QTIP.modal_zindex+$(".qtip-modal").length),qtip._bind(tooltip,["tooltipshow","tooltiphide"],function(event,api,duration){var oEvent=event.originalEvent;if(event.target===tooltip[0])if(oEvent&&"tooltiphide"===event.type&&/mouse(leave|enter)/.test(oEvent.type)&&$(oEvent.relatedTarget).closest(OVERLAY.elem[0]).length)try{event.preventDefault()}catch(e){}else(!oEvent||oEvent&&"tooltipsolo"!==oEvent.type)&&this.toggle(event,"tooltipshow"===event.type,duration)},this._ns,this),
qtip._bind(tooltip,"tooltipfocus",function(event,api){if(!event.isDefaultPrevented()&&event.target===tooltip[0]){var qtips=$(".qtip-modal"),newIndex=QTIP.modal_zindex+qtips.length,curIndex=parseInt(tooltip[0].style.zIndex,10);OVERLAY.elem[0].style.zIndex=newIndex-1,qtips.each(function(){this.style.zIndex>curIndex&&(this.style.zIndex-=1)}),qtips.filter("."+CLASS_FOCUS).qtip("blur",event.originalEvent),tooltip.addClass(CLASS_FOCUS)[0].style.zIndex=newIndex,OVERLAY.update(api);try{event.preventDefault()}catch(e){}}},this._ns,this),qtip._bind(tooltip,"tooltiphide",function(event){
event.target===tooltip[0]&&$(".qtip-modal").filter(":visible").not(tooltip).last().qtip("focus",event)},this._ns,this)},toggle:function(event,state,duration){if(event&&event.isDefaultPrevented())return this;OVERLAY.toggle(this.qtip,!!state,duration)},destroy:function(){this.qtip.tooltip.removeClass("qtip-modal"),this.qtip._unbind(this.qtip.tooltip,this._ns),OVERLAY.toggle(this.qtip,FALSE),delete this.qtip.elements.overlay}}),MODAL=PLUGINS.modal=function(api){return new Modal(api,api.options.show.modal)},MODAL.sanitize=function(opts){opts.show&&("object"!=typeof opts.show.modal?opts.show.modal={on:!!opts.show.modal
}:void 0===opts.show.modal.on&&(opts.show.modal.on=TRUE))},QTIP.modal_zindex=QTIP.zindex-200,MODAL.initialize="render",CHECKS.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},$.extend(TRUE,QTIP.defaults,{show:{modal:{on:FALSE,effect:TRUE,blur:TRUE,stealfocus:TRUE,escape:TRUE}}}),PLUGINS.viewport=function(api,position,posOptions,targetWidth,targetHeight,elemWidth,elemHeight){function calculate(side,otherSide,type,adjustment,side1,side2,lengthName,targetLength,elemLength){
var initialPos=position[side1],mySide=my[side],atSide=at[side],isShift=type===SHIFT,myLength=mySide===side1?elemLength:mySide===side2?-elemLength:-elemLength/2,atLength=atSide===side1?targetLength:atSide===side2?-targetLength:-targetLength/2,sideOffset=viewportScroll[side1]+viewportOffset[side1]-(containerStatic?0:containerOffset[side1]),overflow1=sideOffset-initialPos,overflow2=initialPos+elemLength-(lengthName===WIDTH?viewportWidth:viewportHeight)-sideOffset,offset=myLength-(my.precedance===side||mySide===my[otherSide]?atLength:0)-(atSide===CENTER?targetLength/2:0);return isShift?(offset=(mySide===side1?1:-1)*myLength,
position[side1]+=overflow1>0?overflow1:overflow2>0?-overflow2:0,position[side1]=Math.max(-containerOffset[side1]+viewportOffset[side1],initialPos-offset,Math.min(Math.max(-containerOffset[side1]+viewportOffset[side1]+(lengthName===WIDTH?viewportWidth:viewportHeight),initialPos+offset),position[side1],"center"===mySide?initialPos-myLength:1e9))):(adjustment*=type===FLIPINVERT?2:0,overflow1>0&&(mySide!==side1||overflow2>0)?(position[side1]-=offset+adjustment,newMy.invert(side,side1)):overflow2>0&&(mySide!==side2||overflow1>0)&&(position[side1]-=(mySide===CENTER?-offset:offset)+adjustment,newMy.invert(side,side2)),
position[side1]<viewportScroll[side1]&&-position[side1]>overflow2&&(position[side1]=initialPos,newMy=my.clone())),position[side1]-initialPos}var fixed,newMy,containerOffset,containerStatic,viewportWidth,viewportHeight,viewportScroll,viewportOffset,target=posOptions.target,tooltip=api.elements.tooltip,my=posOptions.my,at=posOptions.at,adjust=posOptions.adjust,method=adjust.method.split(" "),methodX=method[0],methodY=method[1]||method[0],viewport=posOptions.viewport,container=posOptions.container,adjusted={left:0,top:0};return viewport.jquery&&target[0]!==window&&target[0]!==document.body&&"none"!==adjust.method?(containerOffset=container.offset()||adjusted,
containerStatic="static"===container.css("position"),fixed="fixed"===tooltip.css("position"),viewportWidth=viewport[0]===window?viewport.width():viewport.outerWidth(FALSE),viewportHeight=viewport[0]===window?viewport.height():viewport.outerHeight(FALSE),viewportScroll={left:fixed?0:viewport.scrollLeft(),top:fixed?0:viewport.scrollTop()},viewportOffset=viewport.offset()||adjusted,"shift"===methodX&&"shift"===methodY||(newMy=my.clone()),adjusted={left:"none"!==methodX?calculate(X,Y,methodX,adjust.x,LEFT,RIGHT,WIDTH,targetWidth,elemWidth):0,top:"none"!==methodY?calculate(Y,X,methodY,adjust.y,TOP,"bottom","height",targetHeight,elemHeight):0,my:newMy}):adjusted},
PLUGINS.polys={polygon:function(baseCoords,corner){var next,newWidth,newHeight,result={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:FALSE},i=0,coords=[],compareX=1,compareY=1,realX=0,realY=0;for(i=baseCoords.length;i--;)next=[parseInt(baseCoords[--i],10),parseInt(baseCoords[i+1],10)],next[0]>result.position.right&&(result.position.right=next[0]),next[0]<result.position.left&&(result.position.left=next[0]),next[1]>result.position.bottom&&(result.position.bottom=next[1]),next[1]<result.position.top&&(result.position.top=next[1]),coords.push(next);if(newWidth=result.width=Math.abs(result.position.right-result.position.left),
newHeight=result.height=Math.abs(result.position.bottom-result.position.top),"c"===corner.abbrev())result.position={left:result.position.left+result.width/2,top:result.position.top+result.height/2};else{for(;newWidth>0&&newHeight>0&&compareX>0&&compareY>0;)for(newWidth=Math.floor(newWidth/2),newHeight=Math.floor(newHeight/2),corner.x===LEFT?compareX=newWidth:corner.x===RIGHT?compareX=result.width-newWidth:compareX+=Math.floor(newWidth/2),corner.y===TOP?compareY=newHeight:"bottom"===corner.y?compareY=result.height-newHeight:compareY+=Math.floor(newHeight/2),i=coords.length;i--&&!(coords.length<2);)realX=coords[i][0]-result.position.left,
realY=coords[i][1]-result.position.top,(corner.x===LEFT&&realX>=compareX||corner.x===RIGHT&&realX<=compareX||corner.x===CENTER&&(realX<compareX||realX>result.width-compareX)||corner.y===TOP&&realY>=compareY||"bottom"===corner.y&&realY<=compareY||corner.y===CENTER&&(realY<compareY||realY>result.height-compareY))&&coords.splice(i,1);result.position={left:coords[0][0],top:coords[0][1]}}return result},rect:function(ax,ay,bx,by){return{width:Math.abs(bx-ax),height:Math.abs(by-ay),position:{left:Math.min(ax,bx),top:Math.min(ay,by)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(cx,cy,rx,ry,corner){
var c=PLUGINS.polys._angles[corner.abbrev()],rxc=0===c?0:rx*Math.cos(c*Math.PI),rys=ry*Math.sin(c*Math.PI);return{width:2*rx-Math.abs(rxc),height:2*ry-Math.abs(rys),position:{left:cx+rxc,top:cy+rys},adjustable:FALSE}},circle:function(cx,cy,r,corner){return PLUGINS.polys.ellipse(cx,cy,r,r,corner)}},PLUGINS.svg=function(api,svg,corner){for(var frameOffset,mtx,transformed,len,next,i,points,result,position,elem=svg[0],root=$(elem.ownerSVGElement),ownerDocument=elem.ownerDocument,strokeWidth2=(parseInt(svg.css("stroke-width"),10)||0)/2;!elem.getBBox;)elem=elem.parentNode;if(!elem.getBBox||!elem.parentNode)return FALSE;switch(elem.nodeName){case"ellipse":
case"circle":result=PLUGINS.polys.ellipse(elem.cx.baseVal.value,elem.cy.baseVal.value,(elem.rx||elem.r).baseVal.value+strokeWidth2,(elem.ry||elem.r).baseVal.value+strokeWidth2,corner);break;case"line":case"polygon":case"polyline":for(points=elem.points||[{x:elem.x1.baseVal.value,y:elem.y1.baseVal.value},{x:elem.x2.baseVal.value,y:elem.y2.baseVal.value}],result=[],i=-1,len=points.numberOfItems||points.length;++i<len;)next=points.getItem?points.getItem(i):points[i],result.push.apply(result,[next.x,next.y]);result=PLUGINS.polys.polygon(result,corner);break;default:result=elem.getBBox(),result={width:result.width,height:result.height,position:{left:result.x,
top:result.y}}}return position=result.position,root=root[0],root.createSVGPoint&&(mtx=elem.getScreenCTM(),points=root.createSVGPoint(),points.x=position.left,points.y=position.top,transformed=points.matrixTransform(mtx),position.left=transformed.x,position.top=transformed.y),ownerDocument!==document&&"mouse"!==api.position.target&&(frameOffset=$((ownerDocument.defaultView||ownerDocument.parentWindow).frameElement).offset())&&(position.left+=frameOffset.left,position.top+=frameOffset.top),ownerDocument=$(ownerDocument),position.left+=ownerDocument.scrollLeft(),position.top+=ownerDocument.scrollTop(),result},PLUGINS.imagemap=function(api,area,corner){
area.jquery||(area=$(area));var imageOffset,coords,i,result,len,shape=(area.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),image=$('img[usemap="#'+area.parent("map").attr("name")+'"]'),coordsString=$.trim(area.attr("coords")),coordsArray=coordsString.replace(/,$/,"").split(",");if(!image.length)return FALSE;if("polygon"===shape)result=PLUGINS.polys.polygon(coordsArray,corner);else{if(!PLUGINS.polys[shape])return FALSE;for(i=-1,len=coordsArray.length,coords=[];++i<len;)coords.push(parseInt(coordsArray[i],10));result=PLUGINS.polys[shape].apply(this,coords.concat(corner))}return imageOffset=image.offset(),
imageOffset.left+=Math.ceil((image.outerWidth(FALSE)-image.width())/2),imageOffset.top+=Math.ceil((image.outerHeight(FALSE)-image.height())/2),result.position.left+=imageOffset.left,result.position.top+=imageOffset.top,result};var IE6;$.extend(Ie6.prototype,{_scroll:function(){var overlay=this.qtip.elements.overlay;overlay&&(overlay[0].style.top=$(window).scrollTop()+"px")},init:function(qtip){var tooltip=qtip.tooltip
;$("select, object").length<1&&(this.bgiframe=qtip.elements.bgiframe=$('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>').appendTo(tooltip),qtip._bind(tooltip,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=$("<div/>",{id:NAMESPACE+"-rcontainer"}).appendTo(document.body),qtip.elements.overlay&&qtip.elements.overlay.addClass("qtipmodal-ie6fix")&&(qtip._bind(window,["scroll","resize"],this._scroll,this._ns,this),
qtip._bind(tooltip,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var tipAdjust,offset,tooltip=this.qtip.tooltip,dimensions={height:tooltip.outerHeight(FALSE),width:tooltip.outerWidth(FALSE)},plugin=this.qtip.plugins.tip,tip=this.qtip.elements.tip;offset=parseInt(tooltip.css("borderLeftWidth"),10)||0,offset={left:-offset,top:-offset},plugin&&tip&&(tipAdjust="x"===plugin.corner.precedance?[WIDTH,LEFT]:["height",TOP],offset[tipAdjust[1]]-=tip[tipAdjust[0]]()),this.bgiframe.css(offset).css(dimensions)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this
;var perc,width,max,min,tooltip=this.qtip.tooltip,style=this.qtip.options.style,container=this.qtip.options.position.container;return this.qtip.drawing=1,style.height&&tooltip.css("height",style.height),style.width?tooltip.css(WIDTH,style.width):(tooltip.css(WIDTH,"").appendTo(this.redrawContainer),width=tooltip.width(),width%2<1&&(width+=1),max=tooltip.css("maxWidth")||"",min=tooltip.css("minWidth")||"",perc=(max+min).indexOf("%")>-1?container.width()/100:0,max=(max.indexOf("%")>-1?perc:1*parseInt(max,10))||width,min=(min.indexOf("%")>-1?perc:1*parseInt(min,10))||0,width=max+min?Math.min(Math.max(width,min),max):width,
tooltip.css(WIDTH,Math.round(width)).appendTo(container)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([window,this.qtip.tooltip],this._ns)}}),IE6=PLUGINS.ie6=function(api){return 6===BROWSER.ie?new Ie6(api):FALSE},IE6.initialize="render",CHECKS.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),define("taoQtiItem/portableLib/OAT/util/tooltip",["taoQtiItem/portableLib/jquery_2_1_1","taoQtiItem/portableLib/jquery.qtip"],function($){"use strict";return{render:function($container){$container.find('[data-role="tooltip-target"]').each(function(){
var $content,contentHtml,$target=$(this),contentId=$target.attr("aria-describedBy");contentId&&($content=$container.find("#"+contentId),$content.length&&(contentHtml=$content.html(),$target.qtip({overwrite:!0,theme:"default",content:{text:contentHtml},position:{target:"event",my:"bottom center",at:"top center"}})))})}}}),define("taoQtiItem/portableLib/OAT/util/html",["taoQtiItem/portableLib/OAT/util/xml","taoQtiItem/portableLib/OAT/util/math","taoQtiItem/portableLib/OAT/util/tooltip"],function(xml,math,tooltip){"use strict";return{render:function($container){var markup=$container.html();markup=xml.removeNamespace(markup),$container.html(markup),
math.render($container),tooltip.render($container)}}}),define("explo/runtime/js/renderer",["explo/runtime/js/defaultConfig","explo/runtime/js/lib/datatables","taoQtiItem/portableLib/OAT/util/html"],function(defaultjson,$,html){"use strict";function renderExplo(id,$container,config,assetManager){function evCollector(evName,var1,var2){var evString="{"+evName+":{"+var1+","+var2+"} }";eventCollector.push(evString),$container.find(".dataActions").html(eventCollector.join(","))}function runTree(){var i,evName,noMove=["cdRom","root","netWork","#"],writable=!0;$tree=$container.find(".jstree"),$tree.jstree({core:{data:function(){return treeFolder},
check_callback:function(operation,node,node_parent,node_position,more){if("move_node"==operation){for(i=0;i<noMove.length;i++){if(noMove.indexOf(node_parent.type)<0||noMove.indexOf(node_parent.id)<0)return $tree.jstree(!0).deselect_all(),writable=!0;writable=!1}return writable}if("copy_node"==operation)return!1}},plugins:["contextmenu","types","dnd","state","unique","wholerow"],contextmenu:{items:customMenu},dnd:{is_draggable:function(node){return"default"==node[0].type&&(evName="Drag du répertoire depuis l'arborescence ",evCollector(evName,"-","-"),!0)}},types:{bin:{icon:"jstree-bin"},volume:{icon:"jstree-hdrive"},cdRom:{icon:"jstree-CDrom"},netWork:{
icon:"jstree-network"},sdCard:{icon:"jstree-sdCard"},usb:{icon:"jstree-usb"},distant:{icon:"jstree-distant"},root:{icon:"jstree-root"}}}).bind("move_node.jstree",function(e,data){destiTarget=data.parent,evName="Déplacement de répertoire ",evCollector(evName,getDirName(data.node.id),getDirName(data.parent))}),$tree.jstree(!0).settings.core.data=treeFolder,$tree.jstree(!0).refresh(),$container.find(".explo").on("dnd_stop.vakata",function(e,data){var activDir,i,y;for(i=0;i<treeFolder.length;i++)for(y=0;y<data.data.nodes.length;y++)treeFolder[i].id==data.data.nodes[y]&&(treeFolder[i].parent=destiTarget,activDir=$tree.jstree(!0).get_selected(),
$tree.jstree(!0).select_node(activDir),$tree.jstree(!0).open_node(activDir),displayDirContent(activDir),dataFolder())})}function customMenu(node){return"volume"==$tree.jstree("get_selected",!0)[0].type?{createDir:{label:"Nouveau répertoire",action:function(obj){commandNewFolder()},icon:"fa fa-folder"},collerDir:{label:"Coller",action:function(obj){commandPaste()},icon:"fa fa-plus-square"},formatVol:{label:"Formater...",action:function(obj){var selectedNodeId=$tree.jstree("get_selected",!0);formater(selectedNodeId[0].text,selectedNodeId[0].id)}},propertiesDir:{label:"Propriétés",action:function(obj){commandProperties($tree.jstree("get_selected",!0))},
icon:"fa fa-cog"}}:"root"==$tree.jstree("get_selected",!0)[0].type?{propertiesDir:{label:"Propriétés",action:function(obj){commandProperties($tree.jstree("get_selected",!0))},icon:"fa fa-cog"}}:"usb"==$tree.jstree("get_selected",!0)[0].type||"sdCard"==$tree.jstree("get_selected",!0)[0].type?{createDir:{label:"Nouveau répertoire",action:function(obj){commandNewFolder()},icon:"fa fa-folder"},collerDir:{label:"Coller",action:function(obj){commandPaste()},icon:"fa fa-plus-square"},formatVol:{label:"Formater...",action:function(obj){var selectedNodeId=$tree.jstree("get_selected",!0);formater(selectedNodeId[0].text,selectedNodeId[0].id)}},propertiesDir:{
label:"Propriétés",action:function(obj){commandProperties($tree.jstree("get_selected",!0))},icon:"fa fa-cog"}}:"cdRom"==$tree.jstree("get_selected",!0)[0].type?{propertiesDir:{label:"Propriétés",action:function(obj){commandProperties($tree.jstree("get_selected",!0))},icon:"fa fa-cog"}}:"bin"==$tree.jstree("get_selected",!0)[0].type?{emptyBin:{label:"Vider la corbeille",action:function(obj){commandEmptyTrash()},icon:"fa fa-recycle"}}:"netWork"!=$tree.jstree("get_selected",!0)[0].type?{createDir:{label:"Nouveau répertoire",action:function(obj){commandNewFolder()},icon:"fa fa-folder"},renameDir:{label:"Renommer",action:function(obj){
var SelectedArr=$tree.jstree("get_selected",!0);if(SelectedArr.length>1)alert("Attention plusieurs éléments ont été sélectionnés");else if(SelectedArr.length){var selectedNodeId=$tree.jstree("get_selected",!0)[0].id,selectedNodeName=$tree.jstree("get_selected",!0)[0].text;commandRename(selectedNodeId,selectedNodeName)}else alert("Attention aucun élément n'est sélectionné")},icon:"fa fa-cog"},copierDir:{label:"Copier",action:function(obj){commandCopy($tree.jstree("get_selected",!0)[0].id)},icon:"fa fa-clipboard"},couperDir:{label:"Couper",action:function(obj){commandCut($tree.jstree("get_selected",!0)[0].id)},icon:"fa fa-scissors"},collerDir:{label:"Coller",
action:function(obj){commandPaste()},icon:"fa fa-plus-square"},deleteDir:{label:"Effacer",action:function(obj){commandTrash($tree.jstree("get_selected"))},icon:"fa fa-trash"},propsDir:{label:"Propriétés",action:function(obj){commandProperties($tree.jstree("get_selected",!0))},icon:"fa fa-cog"}}:void 0}function tableDisplayer(){$fileList=$container.find(".dirContent").DataTable({language:{emptyTable:"Aucun fichier dans ce répertoire."},destroy:!0,select:!0,paging:!1,ordering:!0,info:!1,searching:!1,columnDefs:[{defaultContent:"-",targets:"_all"}],columns:[{title:"fileId",visible:!1},{title:"Nom",width:"180px"},{title:"Date de Modification",width:"100px"},{
title:"Type",width:"160px"},{title:"Taille",width:"80px",className:"dt-body-right"},{title:"Date de Création",width:"100px",className:"dt-body-right"},{title:"Chemin",width:"350px",visible:!0}]}),$container.find(".dirContent tbody").on("mouseenter","tr",function(){$container.find(this).addClass("highlight")}),$container.find(".dirContent tbody").on("mouseleave","tr",function(){$container.find(this).removeClass("highlight")}),$container.find(".dirContent tbody").on("dblclick","tr",function(e){var evName,saveSelectDir,targetName,targetPlace;$container.find(".ctxMenu").css("display","none"),
"Répertoire"==$fileList.row(this).data()[3]||"Volume"==$fileList.row(this).data()[3]||"Mémoire Flash"==$fileList.row(this).data()[3]||"Mémoire Flash usb"==$fileList.row(this).data()[3]||"Lecteur Optique CD"==$fileList.row(this).data()[3]?(saveSelectDir=$fileList.row(this).data()[0],$tree.jstree("deselect_all"),$tree.jstree("select_node",saveSelectDir),evName="Double Clic dans liste- ouverture de ",evCollector(evName,getDirName(saveSelectDir),"-"),displayDirContent(saveSelectDir)):(targetName=$(e.currentTarget).find(".elementNameExt")[0].innerText,targetPlace=$tree.jstree(!0).get_selected(),fileCall(targetName,targetPlace),
evName="Double Clic - ouverture de fichier",evCollector(evName,targetName,getDirName(targetPlace)))})}function displayDirContent(activDir){function folderDisplayer(){for(var rowFolder,originalPath="",i=0;i<dirData.length;i++)"searchResult"==$tree.jstree(!0).get_node(dirData[i].id).parent&&(originalPath=$tree.jstree(!0).get_path(getOriginalPath(dirData[i].id)),originalPath.shift(),originalPath=originalPath.join("/")),
rowFolder=$fileList.row.add([dirData[i].id,"<span class='secretId'>"+dirData[i].id+"</span><div class = 'preIcon ico_folder'></div>"+$tree.jstree(!0).get_node(dirData[i].id).text,"<span class = 'hide' >"+dataMod+"</span>"+euroDate($tree.jstree(!0).get_node(dirData[i].id).data.dateMod),$tree.jstree(!0).get_node(dirData[i].id).data.type,$tree.jstree(!0).get_node(dirData[i].id).taille,"<span class = 'hide' >"+dataMod+"</span>"+euroDate($tree.jstree(!0).get_node(dirData[i].id).data.dateCreat),originalPath]).draw().node(),$container.find(rowFolder).attr({draggable:!0}),$container.find(rowFolder).attr({title:"Vous pouvez déplacer cet élément avec la souris."}),
$container.find(rowFolder).attr("data",dirData[i].id),$container.find(rowFolder).addClass("dropZone")}function getOriginalPath(idNode){for(var oPath,i=0;i<treeFolder.length;i++)treeFolder[i].id==idNode&&(oPath=treeFolder[i].data.originalPath);return oPath}function getVolType(volToFix){return"Lecteur CD/DVD"==volToFix?"ico_CDrom ":"Mémoire flash"==volToFix?"ico_sdCard ":"clé USB"==volToFix?"ico_usb ":"icoHdrive"}for(var exto,iconExt,labelExt,fileId,dataMod,dataCreat,orginalPath,dirData=$tree.jstree("get_children_dom",activDir),i=0;i<treeFolder.length;i++)treeFolder[i].parent;!function(dirActiv){
var pathArray=$tree.jstree("get_path",dirActiv),pathIdArray=$tree.jstree("get_path",dirActiv,"/",!0),pathStrg="";pathIdArray&&(pathIdArray=pathIdArray.split("/"));for(var i=0;i<pathArray.length;i++){var element=pathArray[i];pathStrg=pathStrg+'/ <a href="#" class="pathElement" name = "'+pathIdArray[i]+'">'+element+"</a>"}$container.find(".pathLine").html(pathStrg),$container.find(".pathElement").click(function(){var nodeId=$container.find(this).attr("name");$tree.jstree("deselect_all"),$tree.jstree("select_node",nodeId),displayDirContent(nodeId),$tree.jstree("open_node",nodeId)})}(activDir),$fileList.clear().draw(),
$tree.jstree("get_selected",!0)[0]&&("root"==$tree.jstree("get_selected",!0)[0].type?(!function(){for(var i=0;i<dirData.length;i++)$fileList.row.add([dirData[i].id,"<div class='preIcon "+getVolType($tree.jstree(!0).get_node(dirData[i].id).text)+"'></div>"+$tree.jstree(!0).get_node(dirData[i].id).text,"<span class='hide' >"+dataMod+"</span>"+euroDate($tree.jstree(!0).get_node(dirData[i].id).data.dateMod),$tree.jstree(!0).get_node(dirData[i].id).data.type,bytUnit($tree.jstree(!0).get_node(dirData[i].id).data.capacity),bytUnit(freeSpace($tree.jstree(!0).get_node(dirData[i].id)))]).draw()}(),$fileList.column(1).header().innerText="Lecteurs",
$fileList.column(3).header().innerText="Description",$fileList.column(4).header().innerText="Capacités",$fileList.column(5).header().innerText="Espace libre",$fileList.column(6).visible(!1,!1),$fileList.column(2).visible(!0,!1),$fileList.column(5).visible(!0,!1)):"bin"==$tree.jstree("get_selected",!0)[0].type?(folderDisplayer(),$fileList.column(1).header().innerText="Nom",$fileList.column(2).header().innerText="Date de suppression",$fileList.column(6).visible(!1,!1),$fileList.column(2).visible(!0,!1),$fileList.column(5).visible(!0,!1)):"netWork"==$tree.jstree("get_selected",!0)[0].type?(folderDisplayer(),$fileList.column(6).visible(!1,!1),
$fileList.column(2).visible(!0,!1),$fileList.column(5).visible(!0,!1)):"searchResult"==$tree.jstree("get_selected",!0)[0].id?(folderDisplayer(),$fileList.column(1).header().innerText="Nom",$fileList.column(2).header().innerText="Date de Modification",$fileList.column(3).header().innerText="Type",$fileList.column(4).header().innerText="Taille",$fileList.column(2).visible(!1,!1),$fileList.column(5).visible(!1,!1),$fileList.column(6).visible(!0,!1)):(folderDisplayer(),$fileList.column(1).header().innerText="Nom",$fileList.column(2).header().innerText="Date de Modification",$fileList.column(3).header().innerText="Type",
$fileList.column(4).header().innerText="Taille",$fileList.column(5).header().innerText="Date de Création",$fileList.column(2).visible(!0,!1),$fileList.column(5).visible(!0,!1),$fileList.column(6).visible(!1,!1)));for(var index=0;index<mapFile.length;index++)if(exto=mapFile[index].extension,iconExt=function(extor){
return""==extor?"ico_folder":".js"==extor?"ico_js":".html"==extor?"ico_html":".txt"==extor?"ico_txt":".png"==extor||".jpeg"==extor||".jpg"==extor||".tiff"==extor||".ico"==extor||".gif"==extor||".bmp"==extor||".svg"==extor?"icoPic":".mov"==extor||".mkv"==extor?"ico_vid":".xls"==extor||".xlsx"==extor?"ico_xls":".doc"==extor||".docx"==extor?"ico_doc":".ppt"==extor||".pptx"==extor?"ico_ppt":".pdf"==extor?"ico_pdf":".cad"==extor?"ico_cad":"ico_else"}(exto),labelExt=getLabelExt(mapFile[index].extension),fileId=mapFile[index].fileId,dataMod=mapFile[index].dateMod,dataCreat=mapFile[index].dateCreat,orginalPath="-",mapFile[index].node==activDir){
"searchResult"==activDir&&(orginalPath=mapFile[index].originalPath,orginalPath=$tree.jstree(!0).get_path(orginalPath),orginalPath.shift(),orginalPath=orginalPath.join("/"));var rowFile=$fileList.row.add([fileId,"<div class = 'preIcon "+iconExt+"'></div><div class='elementNameExt'>"+mapFile[index].name+exto+"</div>","<span class = 'hide' >"+dataMod+"</span>"+euroDate(dataMod),labelExt,bytUnit(mapFile[index].size),"<span class = 'hide' >"+dataCreat+"</span>"+euroDate(dataCreat),orginalPath]).draw().node();$container.find(rowFile).attr("draggable",!0),$container.find(rowFile).attr("data",fileId)}
!window.chrome||!window.chrome.webstore?($container.find("tr").on("dragstart",function(event){dragFF(event)}),$container.find(".dropZone").on("dragover",function(event){event.preventDefault(),event.stopPropagation(),$container.find(this).addClass("dragging")}),$container.find(".dropZone").on("drop",function(event){event.preventDefault(),event.stopPropagation(),drop(event)})):($container.find("tr").on("dragstart",function(){drag(event)}),$container.find(".dropZone").on("dragover",function(){event.preventDefault(),event.stopPropagation(),$container.find(this).addClass("dragging")}),$container.find(".dropZone").on("drop",function(){event.preventDefault(),
event.stopPropagation(),drop(event)})),$container.find("tbody").css({"background-color":"#fffdf9"})}function getLabelExt(extor){return""==extor?"":".js"==extor?"Document Javascript":".html"==extor?"Document HTML":".txt"==extor?"Document texte":".png"==extor||".jpeg"==extor||".jpg"==extor||".tiff"==extor||".ico"==extor||".gif"==extor||".bmp"==extor||".svg"==extor?"image":".mov"==extor||".mkv"==extor?"Video":".xls"==extor||".xlsx"==extor?"Feuille de calcul":".doc"==extor||".docx"==extor?"Document":".ppt"==extor||".pptx"==extor?"Diaporama":".pdf"==extor?"Document PDF":".cad"==extor?"Diagramme Picaxe":"fichier"}function getFileName(id){
for(var targetFileName="",index=0;index<mapFile.length;index++)mapFile[index].fileId==id&&(targetFileName=mapFile[index].name);return targetFileName}function getExtension(id){for(var target="",index=0;index<mapFile.length;index++)mapFile[index].fileId==id&&(target=mapFile[index].extension);return target}function getFolderName(id){for(var targetFolderName="",index=0;index<treeFolder.length;index++)treeFolder[index].id==id&&(targetFolderName=treeFolder[index].text);return targetFolderName}function formater(volumeName,volumeId){if($container.find(".modali").css("height","450px").show(),$container.find(".modalTitle").remove(),
volumeName)$container.find(".contentModal").html('<h3>Formater un volume logique</h3><p>Nom du volume : <input disabled = "disabled" type="text" value="'+volumeName+'"></p><p>Label : <input type="text"></p><p>Capacité : <input type="text"></p><p>Taille d\'unité d\'allocation : <input type="text"></p><p> Type de formatage : <select> <option value="FAT 32">FAT 32</option> <option value="exFAT" selected>exFAT</option> <option value="NFTS">NFTS</option><option value="HFS+">HFS+</option> </select> </p><button class="startFormat">Lancer le formatage</button><button class="annule">Annuler</button><div class="meter"><span></span></div><button disabled="disabled" class="doneClose">Fermer</button>');else{
$container.find(".contentModal").html('<h3>Formater un volume logique</h3><p>Nom du volume : <select class="volId"></select></p><p>Label : <input type="text"></p><p>Capacité : <input type="text"></p><p>Taille d\'unité d\'allocation : <input type="text"></p><p> Type de formatage : <select> <option value="FAT 32">FAT 32</option> <option value="exFAT" selected>exFAT</option> <option value="NFTS">NFTS</option><option value="HFS+">HFS+</option> </select> </p><button class="startFormat">Lancer le formatage</button><button class="annule">Annuler</button><div class="meter"><span></span></div><button disabled="disabled" class="doneClose">Fermer</button>')
;for(var i=0;i<treeFolder.length;i++)"volume"!=treeFolder[i].type&&"usb"!=treeFolder[i].type&&"sdCard"!=treeFolder[i].type||$container.find(".volId").append("<option class="+treeFolder[i].id+">"+treeFolder[i].text+"</option>")}$container.find(".annule").on("click",function(){evCollector("Mcontextuel ABANDON du Formatage du volume","-","-"),$container.find(".modali").hide()}),$container.find(".startFormat").on("click",function(){var evName;if(volumeId||(volumeName=$container.find(".volId option:selected").text(),volumeId=$container.find(".volId option:selected")[0].className),
confirm("Attention vous allez formater le volume : "+volumeName+" ! Etes vous sûr ? l'ensemble des données seront perdues.")){for(var i=0;i<mapFile.length;i++)mapFile[i].node==volumeId&&(mapFile[i].node="erased",dataFiles(),volumeName.search("C:")>=0&&$container.find(".documents").hide(),volumeName.search("D:")>=0&&($container.find(".images").hide(),$container.find(".videos").hide(),$container.find(".downloads").hide()));for(var x=0;x<treeFolder.length;x++)treeFolder[x].parent==volumeId&&(treeFolder[x].parent="erased",$tree.jstree().move_node(treeFolder[x].id,"erased"),dataFolder());$container.find(".meter").show(),
$container.find(".meter > span").show().each(function(){$container.find(this).data("0%",$container.find(this).width()).width(0).animate({width:"100%"},3e3,function(){alert("formatage terminé.")})}),$container.find(".startFormat").attr("disabled","disabled"),$container.find(".doneClose").attr("disabled",!1),$container.find(".doneClose").on("click",function(){$container.find(".modali").hide(),$tree.jstree("deselect_all"),$tree.jstree("select_node","root"),$tree.jstree("open_node","root")}),evName="Formatage du volume",evCollector(evName,getDirName(volumeId),"-")}})}function dragFF(ev){var evName,FileArray=[];DDFile=[],
ev.originalEvent.dataTransfer.setData("text/plain",ev.target.id);var ddTarget,idCheck;if(idCheck=ev.target.getAttribute("data"),ev.target.cells[0].innerText,"Répertoire"==ev.target.cells[2].innerText)for(var i=0;i<treeFolder.length;i++)treeFolder[i].id==idCheck&&(treeFolder[i].origin=treeFolder[i].parent,DDFolder.push(treeFolder[i].id),evName="Drag répertoire non sélectionné depuis la liste",evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].parent)));else for(var i=0;i<mapFile.length;i++)mapFile[i].fileId==idCheck&&(mapFile[i].origin=mapFile[i].node,DDFile.push(mapFile[i].fileId),evName="Drag fichier non sélectionné depuis la liste",
evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].origin)));ddTarget=$fileList.rows({selected:!0})[0];for(var i=0;i<ddTarget.length;i++){var dataId=$fileList.row(ddTarget[i]).data()[0];if($fileList.row(ddTarget[i]).data().includes("Répertoire")){for(var i=0;i<treeFolder.length;i++)treeFolder[i].id==dataId&&(treeFolder[i].origin=treeFolder[i].parent,evName="Drag répertoire(s)  sélectionné(s) depuis la liste",evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].origin)));-1===DDFolder.indexOf(dataId)&&DDFolder.push(dataId)}else FileArray.push(dataId)}
for(var y=0;y<FileArray.length;y++)for(var i=0;i<mapFile.length;i++)mapFile[i].fileId==FileArray[y]&&(mapFile[i].origin=mapFile[i].node,evName="Drag fichier(s) sélectionné(s) depuis la liste",evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].origin)),-1===DDFile.indexOf(FileArray[y])&&DDFile.push(FileArray[y]))}function drag(ev){var evName,FileArray=[];DDFile=[],ev.dataTransfer.setData("text/plain",ev.target.id);var ddTarget,idCheck;if(idCheck=ev.target.getAttribute("data"),ev.target.cells[0].innerText,
"Répertoire"==ev.target.cells[2].innerText)for(var i=0;i<treeFolder.length;i++)treeFolder[i].id==idCheck&&(treeFolder[i].origin=treeFolder[i].parent,DDFolder.push(treeFolder[i].id),evName="Drag répertoire non sélectionné depuis la liste",evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].parent)));else for(var i=0;i<mapFile.length;i++)mapFile[i].fileId==idCheck&&(mapFile[i].origin=mapFile[i].node,DDFile.push(mapFile[i].fileId),evName="Drag fichier non sélectionné depuis la liste",evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].origin)));ddTarget=$fileList.rows({selected:!0})[0];for(var i=0;i<ddTarget.length;i++){
var dataId=$fileList.row(ddTarget[i]).data()[0];if($fileList.row(ddTarget[i]).data().includes("Répertoire")){for(var i=0;i<treeFolder.length;i++)treeFolder[i].id==dataId&&(treeFolder[i].origin=treeFolder[i].parent,evName="Drag répertoire(s)  sélectionné(s) depuis la liste",evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].origin)));-1===DDFolder.indexOf(dataId)&&DDFolder.push(dataId)}else FileArray.push(dataId)}for(var y=0;y<FileArray.length;y++)for(var i=0;i<mapFile.length;i++)mapFile[i].fileId==FileArray[y]&&(mapFile[i].origin=mapFile[i].node,evName="Drag fichier(s) sélectionné(s) depuis la liste",
evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].origin)),-1===DDFile.indexOf(FileArray[y])&&DDFile.push(FileArray[y]))}function drop(ev){var evName,activDir=$tree.jstree(!0).get_selected();if(ev.preventDefault(),$fileList.rows(".selected").remove().draw(),DDFile.length>0){for(var y=0;y<DDFile.length;y++)for(var targetFileId=DDFile[y],i=0;i<mapFile.length;i++)if(targetFileId==mapFile[i].fileId)for(var x=0;x<treeFolder.length;x++){var evtstring=String(ev.target.id);if(evtstring=evtstring.substring(0,evtstring.length-7),treeFolder[x].id==evtstring){
if("cdRom"==treeFolder[x].id||"root"==treeFolder[x].id||"netWork"==treeFolder[x].id)return alert("Opération interdite - il est impossible d'écrire sur cet emplacement"),$tree.jstree().deselect_all(),$tree.jstree().select_node(mapFile[i].node),DDFile=[],evName="Drop Interdit",void evCollector(evName,targetFileId,treeFolder[x].text);verifDbl(mapFile[i],treeFolder[x].id,"DD"),dataFiles(),evName="Drop de fichier exécuté",evCollector(evName,targetFileId,treeFolder[x].text)}else{var evtstring=String(ev.target.id);evtstring=evtstring.substring(0,evtstring.length-7),
DDFile[y]==mapFile[i].fileId&&($(ev.target).find(".secretId")[0]?treeFolder[x].id!=$(ev.target).find(".secretId")[0].innerText&&treeFolder[x].id!=evtstring||verifDbl(mapFile[i],treeFolder[x].id,"DD"):treeFolder[x].id==evtstring&&verifDbl(mapFile[i],treeFolder[x].id,"DD"))}}return $tree.jstree(!0).select_node(activDir),$tree.jstree(!0).open_node(activDir),displayDirContent(activDir),DDFile=[],"ciblos"}if(DDFolder.length>0)for(var cblFolderId=function(evTarget){var targetId
;if("Cet Ordinateur"==evTarget.find(".secretId").context.innerText)targetId="root";else if("Lecteur CD/DVD"==evTarget.find(".secretId").context.innerText)targetId="cdRom";else if("Réseau Local"==evTarget.find(".secretId").context.innerText)targetId="netWork";else if(void 0!==evTarget.find(".secretId")[0])targetId=evTarget.find(".secretId")[0].innerText;else{var evtstring=String(ev.target.id);targetId=evtstring.substring(0,evtstring.length-7)}return targetId}($(ev.target)),y=0;y<DDFolder.length;y++){var targetFolderId=DDFolder[y];WbranchSize=branchSize(targetFolderId)
;for(var i=0;i<treeFolder.length;i++)if(targetFolderId==treeFolder[i].id)for(var x=0;x<treeFolder.length;x++){var procy=!0;if("Normalfolder"!==cblFolderId)if(treeFolder[x].id==cblFolderId)if("cdRom"==treeFolder[x].id||"root"==treeFolder[x].id||"netWork"==treeFolder[x].id)alert("Opération interdite - il est impossible d'écrire sur cet emplacement"),targetFolderId=toString(treeFolder[x].id),$tree.jstree().deselect_all(),$tree.jstree().select_node(treeFolder[i].parent),evName="Drop répertoire Interdit",evCollector(evName,getDirName(DDFolder[y]),getDirName(treeFolder[x].id));else{
if(!testFreeSpaceFolder(treeFolder[x].id,WbranchSize))return alert("Operation impossible, il n'y pas assez d'espace sur le support de destination"),DDFolder=[],void displayDirContent(activDir);$tree.jstree().move_node(targetFolderId,treeFolder[x].id),treeFolder[i].id==treeFolder[x].id||procy&&(verifDbl(treeFolder[i].id,treeFolder[x].id,"DD"),treeFolder[i].parent=treeFolder[x].id,dataFolder(),evName="Drop répertoire réalisé",evCollector(evName,getDirName(DDFolder[y]),getDirName(treeFolder[x].id)),procy=!1),$tree.jstree(!0).select_node(activDir),$tree.jstree(!0).open_node(activDir),displayDirContent(activDir)}else!0}}DDFolder=[],WbranchSize=0}
function commandCut(selectedNodeId){var evName,originalNodes;if(selectedNodeId){originalNodes=$tree.jstree(!0).get_selected(selectedNodeId);for(var x=0;x<originalNodes.length;x++){WbranchSize=branchSize(originalNodes[x].id),$tree.jstree().move_node(originalNodes[x].id,"clipboard");for(var oriNodeId=originalNodes[x].id,i=0;i<treeFolder.length;i++){treeFolder[i].id==oriNodeId&&(treeFolder[i].parent="clipBoard",dataFolder(),evName="Mcontextuel - Couper répertoire",evCollector(evName,treeFolder[i].text,getDirName(oriNodeId)))}}}else{SelectedArr=$fileList.rows({selected:!0})[0];for(var index=0;index<SelectedArr.length;index++){
for(var indexElement=SelectedArr[index],element=$fileList.row(indexElement).data(),i=0;i<mapFile.length;i++)element[0]==mapFile[i].fileId&&(clipBoard.push(mapFile[i]),dataFiles());for(var i=0;i<mapFile.length;i++){if(mapFile[i].fileId==element[0]){var oriNodeId=mapFile[i].node;mapFile[i].origin=mapFile[i].node,mapFile[i].node="clipBoard",evName="Mcontextuel - Couper fichier",evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(oriNodeId)),dataFiles()}}for(var i=0;i<treeFolder.length;i++)if(treeFolder[i].id==element[0]){WbranchSize=branchSize(element[0]);var oriNodeId=treeFolder[i].parent;treeFolder[i].origin=oriNodeId,
treeFolder[i].parent="clipBoard",$tree.jstree().move_node(treeFolder[i].id,"clipboard"),$tree.jstree(!0).select_node(oriNodeId),$tree.jstree(!0).open_node(oriNodeId),displayDirContent(oriNodeId),dataFolder(),evName="Mcontextuel - Couper répertoire",evCollector(evName,treeFolder[i].text,getDirName(oriNodeId))}}}$fileList.rows(".selected").remove().draw()}function commandPaste(){for(var evName,clipDir=$tree.jstree(!0).get_node("clipboard"),destiPaste=$tree.jstree(!0).get_selected(),y=0;y<clipBoard.length;y++)if(clipBoard[y].fileId)if(clipBoard[y].copy){clipBoard[y].node=destiPaste[0],verifDbl(clipBoard[y],destiPaste[0],"copy"),displayDirContent(destiPaste),
dataClipBoard(),evName="Mcontextuel - Coller fichier depuis copier",evCollector(evName,clipBoard[y].name+clipBoard[y].extension,getDirName(destiPaste[0])),dataFiles();for(var i=0;i<mapFile.length;i++)mapFile[i].fileId==clipBoard[y].fileId&&(mapFile[i].copy=!1)}else{for(var i=0;i<mapFile.length;i++)mapFile[i].fileId==clipBoard[y].fileId&&(verifDbl(mapFile[i],destiPaste[0],"cut"),evName="Mcontextuel - Coller fichier depuis couper",evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].node)),dataFiles());displayDirContent(destiPaste)}clipBoard=[]
;for(var childArray=clipDir.children,allchildArray=clipDir.children_d,ifold=0;ifold<allchildArray.length;ifold++)for(var i=0;i<treeFolder.length;i++)if(treeFolder[i].id==allchildArray[ifold]){for(var testWritable=verifDbl(treeFolder[i],destiPaste[0],"copy"),j=0;j<childArray.length;j++){if(!testFreeSpaceFolder(destiPaste[0],WbranchSize))return void alert("Operation impossible, il n'y pas assez d'espace sur le support de destination");$tree.jstree().move_node(childArray[j],destiPaste[0])}
if(testWritable)for(var y=0;y<treeFolder.length;y++)if(treeFolder[y].id==allchildArray[ifold])for(var x=0;x<mapFile.length;x++)mapFile[x].node==treeFolder[y].data.copy&&mapFile.push({fileId:mapFile.length+1,node:allchildArray[ifold],name:mapFile[x].name,extension:mapFile[x].extension,size:mapFile[x].size,dateMod:getNowDate(),dateCreat:mapFile[x].dateCreat,image_url:mapFile[x].image_url,app:mapFile[x].app,dateLastAcces:mapFile[x].dateLastAcces,author:mapFile[x].author,content:mapFile[x].content});dataFolder(),evName="Mcontextuel - Coller répertoire",evCollector(evName,treeFolder[i].text,getDirName(destiPaste[0]))}WbranchSize=0,
$tree.jstree(!0).select_node(destiPaste[0]),$tree.jstree(!0).open_node(destiPaste[0]),displayDirContent(destiPaste[0])}function verifDbl(element,placeId,operation){var testWritable=!0,FolderWritable=!0;if("default"==element.type||"Répertoire"==element.type){for(var i=0;i<treeFolder.length;i++)if(treeFolder[i].text==element.text&&treeFolder[i].parent==placeId){var toriz=confirm("Attention un répertoire avec le même nom existe déjà à cet emplacement, voulez-vous l'écraser ?");if(1==toriz){FolderWritable=!0,$tree.jstree(!0).move_node(treeFolder[i],"erased");for(var x=0;x<treeFolder.length;x++)treeFolder[x].id==element.id&&(treeFolder[x].parent=placeId,
treeFolder[x].data.type=element.data.type,treeFolder[x].data.type=element.data.dateMod,treeFolder[x].data.type=element.data.dateCreat,treeFolder[i].parent=erased,$tree.jstree(!0).move_node(treeFolder[x],placeId));return FolderWritable}FolderWritable=!1,alert("cet élément reste temporairement disponible en mémoire. Vous pouvez le coller à un autre endroit pour le rendre à nouveau disponible.")}return FolderWritable}if("copy"==operation)if(placeId==element.origin){var testFP=testFreeSpace(placeId,element,"copy");testFP?(element.fileId=mapFile.length+1,element.name="copie_"+incrementor+"_de_"+element.name,element.dateMod=getNowDate(),mapFile.push(element),
incrementor+=1):alert("Espace insuffisant pour achever l'opération. Libérer de l'espace et recommencer")}else{for(var i=0;i<mapFile.length;i++)if(mapFile[i].name==element.name&&mapFile[i].extension==element.extension&&mapFile[i].node==placeId){var autoriz=confirm("Attention un fichier avec le même nom et la même extension existe déjà à cet emplacement, voulez-vous l'écraser ?");if(1==autoriz){var testFP=testFreeSpace(placeId,element,"copy");testFP?(mapFile[i].size=element.size,mapFile[i].dateMod=getNowDate(),mapFile[i].dateCreat=element.dateCreat,mapFile[i].content=element.content,mapFile[i].dateLastAcces=element.dateLastAcces,
mapFile[i].author=element.author,mapFile[i].app=element.app,mapFile[i].image_url=element.image_url,testWritable=!1):(alert("Espace insuffisant pour achever l'opération. Libérer de l'espace et recommencer"),testWritable=!1)}else testWritable=!1}if(testWritable){var testFP=testFreeSpace(placeId,element);testFP?(element.node=placeId,element.fileId=mapFile.length+1,element.dateMod=getNowDate(),mapFile.push(element)):(alert("Espace insuffisant pour achever l'opération. Libérer de l'espace et recommencer"),testWritable=!1)}}else if("cut"==operation){
for(var i=0;i<mapFile.length;i++)if(mapFile[i].name==element.name&&mapFile[i].node==placeId&&mapFile[i].extension==element.extension){var autoriz=confirm("Attention un fichier avec le même nom et la même extension existe déjà à cet emplacement, voulez-vous l'écraser ?");if(1==autoriz){var testFP=testFreeSpace(placeId,element,"move");if(testFP){mapFile[i].node="erased";for(var y=0;y<mapFile.length;y++)if(mapFile[y].name==element.name&&"clipBoard"==mapFile[y].node&&mapFile[y].extension==element.extension)return mapFile[y].node=placeId,mapFile[y]}else{alert("Espace insuffisant pour achever l'opération. Libérer de l'espace et recommencer")
;for(var y=0;y<mapFile.length;y++)mapFile[y].name==element.name&&"clipBoard"==mapFile[y].node&&mapFile[y].extension==element.extension&&(mapFile[y].node=mapFile[y].origin);testWritable=!1}}else for(var y=0;y<mapFile.length;y++)mapFile[y].name==element.name&&"clipBoard"==mapFile[y].node&&mapFile[y].extension==element.extension&&(mapFile[y].node=mapFile[y].origin);testWritable=!1}if(1==testWritable){for(var i=0;i<mapFile.length;i++)if(mapFile[i].name==element.name&&mapFile[i].extension==element.extension&&"clipBoard"==mapFile[i].node){var testFP=testFreeSpace(placeId,element,"move");if(testFP)mapFile[i].node=placeId;else{
alert("Espace insuffisant pour achever l'opération. Libérer de l'espace et recommencer"),testWritable=!1;for(var y=0;y<mapFile.length;y++)mapFile[y].name==element.name&&"clipBoard"==mapFile[y].node&&mapFile[y].extension==element.extension&&(mapFile[y].node=mapFile[y].origin)}}displayDirContent(placeId)}}else{for(var i=0;i<mapFile.length;i++)if(mapFile[i].name==element.name&&mapFile[i].node==placeId&&mapFile[i].extension==element.extension){var autoriz=confirm("Attention un fichier avec le même nom et la même extension existe déjà à cet emplacement, voulez-vous l'écraser ?");if(1==autoriz){mapFile[i].node="erased"
;for(var y=0;y<mapFile.length;y++)if(mapFile[y].fileId==element.fileId){var testFP=testFreeSpace(placeId,element,"move");if(testFP)return mapFile[y].node=placeId,mapFile[y];alert("Espace insuffisant pour achever l'opération. Libérer de l'espace et recommencer");for(var y=0;y<mapFile.length;y++)mapFile[y].fileId==element.fileId&&(mapFile[y].node=mapFile[y].origin),mapFile[y].name==element.name&&mapFile[y].extension==element.extension&&"erased"==mapFile[y].node&&(mapFile[y].node=placeId);testWritable=!1}}else for(var y=0;y<mapFile.length;y++)mapFile[y].fileId==element.fileId&&(mapFile[y].node=mapFile[y].origin),
mapFile[y].name==element.name&&mapFile[y].extension==element.extension&&"erased"==mapFile[y].node&&(mapFile[y].node=placeId);testWritable=!1}if(1==testWritable){for(var i=0;i<mapFile.length;i++)if(mapFile[i].fileId==element.fileId){var testFP=testFreeSpace(placeId,element,"move");if(testFP)mapFile[i].node=placeId;else{alert("Espace insuffisant pour achever l'opération. Libérer de l'espace et recommencer");for(var y=0;y<mapFile.length;y++)mapFile[y].fileId==element.fileId&&(mapFile[y].node=mapFile[y].origin);testWritable=!1}}displayDirContent(placeId)}}}function branchSize(rootId){var bSize,rootNode,childNode;if(rootNode=$tree.jstree(!0).get_node(rootId)){
childNode=rootNode.children_d,childNode.push(rootNode.id);for(var i=0;i<childNode.length;i++)for(var y=0;y<mapFile.length;y++)mapFile[y].node==childNode[i]&&(bSize=0,bSize+=parseInt(mapFile[y].size))}return bSize||(bSize=0),bSize}function commandCopy(selectedId){function addCopyToJson(neoNode,DirId,parentDir,TFolder){neoNode.data={},neoNode.data.type=TFolder.data.type,neoNode.data.dateMod=TFolder.data.dateMod,neoNode.data.dateCreat=TFolder.data.dateCreat,treeFolder.push({id:DirId,parent:parentDir,text:TFolder.text,type:TFolder.type,data:{copy:TFolder.id,type:TFolder.data.type,dateMod:TFolder.data.dateMod,dateCreat:TFolder.data.dateCreat}})}
function findOriginal(baseTree){for(var ChildNodeArr=[],baseNode=$tree.jstree(!0).get_node(baseTree.id),i=0;i<baseNode.children_d.length;i++){var nChild=$tree.jstree(!0).get_node(baseNode.children_d[i]);ChildNodeArr.push(nChild)}return ChildNodeArr}var evName;if(selectedId){var copyNodes=$tree.jstree(!0).get_selected();WbranchSize=branchSize(selectedId);for(var x=0;x<copyNodes.length;x++){for(var newNode=$tree.jstree().copy_node(copyNodes[x],"clipboard"),newNodeData=$tree.jstree().get_node(newNode),i=0;i<treeFolder.length;i++)if(treeFolder[i].id==copyNodes[x]){addCopyToJson(newNodeData,newNode,"clipboard",treeFolder[i]),childGroup=newNodeData.children_d
;for(var y=0;y<childGroup.length;y++)for(var newChild=$tree.jstree(!0).get_node(childGroup[y]),newChildDir=childGroup[y],parentDir=newChild.parent,CNodeOriginal=findOriginal(treeFolder[i],newChild.text),x=0;x<CNodeOriginal.length;x++)CNodeOriginal[x].text==newChild.text&&addCopyToJson(newChild,newChildDir,parentDir,CNodeOriginal[x])}dataFolder(),evName="Mcontextuel  - copie de répertoire"}}else{SelectedArr=$fileList.rows({selected:!0})[0];for(var index=0;index<SelectedArr.length;index++){for(var childGroup,indexElement=SelectedArr[index],newId=mapFile.length+1,element=$fileList.row(indexElement).data(),i=0;i<mapFile.length;i++){var idf=mapFile[i]
;if(idf.fileId==element[0]){var newEl={fileId:newId,node:"clipBoard",name:idf.name,extension:idf.extension,size:idf.size,dateMod:idf.dateMod,dateCreat:idf.dateCreat,image_url:idf.image_url,app:idf.app,dateLastAcces:idf.dateLastAcces,author:idf.author,content:idf.content,origin:idf.node,copy:!0};clipBoard.push(newEl),dataClipBoard(),dataFiles(),evName="Mcontextuel - Copier fichier",evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].node))}}for(var i=0;i<treeFolder.length;i++)if(treeFolder[i].id==element[0]){var newDir=$tree.jstree(!0).copy_node(treeFolder[i],"clipboard"),newNode=$tree.jstree(!0).get_node(newDir)
;if(WbranchSize=branchSize(element[0]),addCopyToJson(newNode,newDir,"clipboard",treeFolder[i]),$tree.jstree(!0).get_node(newDir).data.dateMod=treeFolder[i].data.dateMod,$tree.jstree(!0).get_node(newDir).data.type=treeFolder[i].data.type,$tree.jstree(!0).get_node(newDir).taille="",$tree.jstree(!0).get_node(newDir).data.dateCreat=treeFolder[i].data.dateCreat,childGroup=newNode.children_d,
childGroup.length>0)for(var y=0;y<childGroup.length;y++)for(var newChild=$tree.jstree(!0).get_node(childGroup[y]),newChildDir=childGroup[y],parentDir=newChild.parent,CNodeOriginal=findOriginal(treeFolder[i],newChild.text),x=0;x<CNodeOriginal.length;x++)CNodeOriginal[x].text==newChild.text&&addCopyToJson(newChild,newChildDir,parentDir,CNodeOriginal[x])}}}}function commandNewFile(){var evName;$container.find(".modali").show().css({width:"550px",height:"140px"}),$container.find(".modalTitle").remove(),
$container.find(".contentModal").html("<h3>Nouveau Fichier</h3><input class='newFile' type='text' placeholder='Nom du nouveau fichier'>.<input type='text' class='inputExtension' placeholder='Extension'><button class='createNewFile'>OK</button><button class='annulModal'>Annuler</button>"),$container.find(".newFile").focus(),$container.find(".annulModal").click(function(){$container.find(".modali").hide()});var actifNode=$tree.jstree(!0).get_selected(!0);$container.find(".createNewFile").click(function(){
for(var writable,newName=$container.find(".newFile").val(),newExt=$container.find(".inputExtension").val(),i=0;i<mapFile.length;i++)if(mapFile[i].name==newName&&mapFile[i].extension=="."+newExt&&mapFile[i].node==actifNode[0].id){var crashIt=confirm("Un fichier porte déjà ce nom dans ce répertoire ! Désirez-vous l'écraser ?");if(!crashIt)return writable=!1;mapFile[i].node="erased",writable=!0}else writable=!0;1==writable&&(mapFile.push({fileId:mapFile.length+1,node:actifNode[0].id,name:newName,extension:"."+newExt,size:"0",dateMod:getNowDate(),dateCreat:getNowDate(),app:"Text Editor",image_url:"",dateLastAcces:getNowDate(),author:"Anonymous",content:""}),
$tree.jstree("open_node",actifNode[0].id),$container.find(".modali").hide(),displayDirContent(actifNode[0].id),evName="Mcontextuel - Création de fichier",evCollector(evName,newName,getDirName(actifNode[0].id)),dataFiles())})}function commandNewFolder(){var actifNode=$tree.jstree(!0).get_selected(!0),newNodeData={};newNodeData.id=ID(),newNodeData.parent=actifNode[0].id,newNodeData.text="",newNodeData.type="default",newNodeData.li_attr={},newNodeData.a_attr={},newNodeData.data={},newNodeData.data.type="Répertoire",newNodeData.data.dateMod=getNowDate(),newNodeData.data.dateCreat=getNowDate(),$container.find(".modali").show().css({width:"500px",height:"140px"}),
$container.find(".modalTitle").remove(),$container.find(".contentModal").html("<h3>Nouveau Répertoire</h3><input class='newFolderInput' type='text' placeholder='Nom du nouveau répertoire'><button class='createNewFolder'>OK</button><button class='annulModal'>Annuler</button>"),$container.find(".newFolderInput").css("width","170px").focus(),$container.find(".annulModal").click(function(){$container.find(".modali").hide()}),$container.find(".createNewFolder").click(function(){function NewFolderCreator(){var evName;newNodeData.text=newName,treeFolder.push(newNodeData),createNode("#"+actifNode[0].id+"_anchor",newNodeData.id,newNodeData.text,"last"),
$tree.jstree("open_node",actifNode[0].id),$tree.jstree(!0).get_node(newNodeData.id).data={},$tree.jstree(!0).get_node(newNodeData.id).data.dateMod=newNodeData.data.dateMod,$tree.jstree(!0).get_node(newNodeData.id).data.type="Répertoire",$tree.jstree(!0).get_node(newNodeData.id).data.taille="",$tree.jstree(!0).get_node(newNodeData.id).data.dateCreat=newNodeData.data.dateCreat,displayDirContent(actifNode[0].id),dataFolder(),evName="Mcontextuel - Création de répertoire",evCollector(evName,newNodeData.text,getDirName(newNodeData.parent)),$container.find(".modali").hide()}var writable,i,crashIt,newName=$container.find(".newFolderInput").val()
;for(i=0;i<treeFolder.length;i++){if(treeFolder[i].text==newName&&treeFolder[i].parent==actifNode[0].id)return crashIt=confirm("Un répertoire porte déjà ce nom à cet endroit ! Désirez-vous l'écraser ? Attention l'ensemble des sous-dossiers seront perdus."),crashIt?($tree.jstree().move_node(treeFolder[i].id,"erased"),writable=!0,NewFolderCreator(),writable):(writable=!1,$container.find(".modali").hide(),writable);writable=!0}1==writable&&NewFolderCreator()})}function createNode(parent_node,new_node_id,new_node_text,position){$tree.jstree("create_node",$(parent_node),{text:new_node_text,id:new_node_id},position,!1,!1)}function commandTrash(selectedNodes){
var evName,dirOn,folderToMove=[];if(selectedNodes)for(var x=0;x<selectedNodes.length;x++)for(var element=selectedNodes[x],i=0;i<treeFolder.length;i++){var idfold=treeFolder[i];idfold.id==element&&(treeFolder[i].origin=treeFolder[i].parent,treeFolder[i].parent="bin",$tree.jstree().move_node(idfold.id,"bin"),evName="Mcontextuel - Suppression de Répertoire",evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].origin)),dataFolder())}else{SelectedArr=$fileList.rows({selected:!0})[0];for(var index=0;index<SelectedArr.length;index++){var element=$fileList.rows(".selected").data()[index]
;if("Répertoire"==element[3])for(var sID=element[0],i=0;i<treeFolder.length;i++)treeFolder[i].id==sID&&(treeFolder[i].origin=treeFolder[i].parent,dirOn=treeFolder[i].parent,treeFolder[i].parent="bin",folderToMove.push(treeFolder[i].id),evName="Mcontextuel - Suppression de Répertoire vers corbeille",evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].origin)),dataFolder());else{var sID=element[0]-1;mapFile[sID].origin=mapFile[sID].node,dirOn=mapFile[sID].node,mapFile[sID].node="bin",evName="Mcontextuel - Suppression de fichier vers corbeille",evCollector(evName,mapFile[sID].name+mapFile[sID].extension,getDirName(mapFile[sID].origin)),dataFiles()}}
for(var i=0;i<folderToMove.length;i++)$tree.jstree().move_node(folderToMove[i],"bin");$tree.jstree(!0).select_node(dirOn),$tree.jstree(!0).open_node(dirOn),displayDirContent(dirOn)}$fileList.rows(".selected").remove().draw()}function commandRename(selectedNodeId,selectedNodeName){var element,evName,activDir=$tree.jstree(!0).get_selected(),renamable=!0;if(selectedNodeId)$container.find(".modali").show().css({width:"500px",height:"140px"}),$container.find(".renamerInput").css("width","170px").focus(),
$container.find(".contentModal").html("<h3>Renommer le répertoire</h3><input class='renamerInput' type='text' value="+selectedNodeName+" ><button class='btDirRenamer'>OK</button><button class='annulModal'>Annuler</button>"),$container.find(".annulModal").click(function(){$container.find(".modali").hide()}),$container.find(".btDirRenamer").click(function(){for(var i=0;i<treeFolder.length;i++)if(treeFolder[i].id==selectedNodeId){for(var newName=$container.find(".renamerInput").val(),y=0;y<treeFolder.length;y++){
if(treeFolder[y].text==newName&&treeFolder[y].parent==treeFolder[i].parent)return alert("Un répertoire porte déjà ce nom à cet endroit ! Impossible de le renommer ainsi. Choisissez un autre nom."),renamable=!1;renamable=!0}renamable&&($tree.jstree("rename_node",$tree.jstree(!0).get_node(treeFolder[i].id),$container.find(".renamerInput").val()),treeFolder[i].originalName=treeFolder[i].text,treeFolder[i].text=newName,treeFolder[i].data.dateMod=getNowDate(),$tree.jstree(!0).refresh(),evName="Mcontextuel - Renommage du répertoire",evCollector(evName,treeFolder[i].originalName,treeFolder[i].text),dataFolder())}$container.find(".modali").hide(),
$tree.jstree("open_node",activDir),displayDirContent(activDir)});else if(SelectedArr=$fileList.rows({selected:!0})[0],SelectedArr.length>1)alert("Attention plusieurs éléments ont été sélectionnés");else if(SelectedArr.length){for(var index=0;index<SelectedArr.length;index++){var indexElement=SelectedArr[index];if(element=$fileList.row(indexElement).data(),"Répertoire"==element[3])$container.find(".contentModal").html("<h3>Renommer le répertoire</h3><input class='renamerInput' type='text' value="+getFolderName(element[0])+" ><button class='btDirRenamer'>OK</button><button class='annulModal'>Annuler</button>"),$container.find(".btDirRenamer").click(function(){
for(var i=0;i<treeFolder.length;i++)if(treeFolder[i].id==element[0]){for(var newName=$container.find(".renamerInput").val(),y=0;y<treeFolder.length;y++){if(treeFolder[y].text==newName&&treeFolder[y].parent==treeFolder[i].parent)return alert("Un répertoire porte déjà ce nom à cet endroit ! Impossible de le renommer ainsi. Choisissez un autre nom."),renamable=!1;renamable=!0}renamable&&($tree.jstree("rename_node",$tree.jstree(!0).get_node(treeFolder[i].id),$container.find(".renamerInput").val()),treeFolder[i].originalName=treeFolder[i].text,treeFolder[i].text=newName,treeFolder[i].data.dateMod=getNowDate(),$tree.jstree(!0).refresh(),
evName="Mcontextuel - Renommage du répertoire",evCollector(evName,treeFolder[i].originalName,treeFolder[i].text),dataFolder())}$container.find(".modali").hide(),displayDirContent(activDir)});else for(var ix=0;ix<mapFile.length;ix++){var fileElement=mapFile[ix];if(fileElement.fileId==element[0]){$container.find(".contentModal").html("<h3>Renommer le fichier</h3><input class='renamerInput' type='text' value="+getFileName(element[0])+"> . <input class='RenameExtension' type='text' value="+getExtension(element[0]).substring(1)+"><button class='btFileRenamer'>OK</button><button class='annulModal'>Annuler</button>");var protectedFile=fileElement
;$container.find(".btFileRenamer").click(function(){if(protectedFile.name==$container.find(".renamerInput").val()&&protectedFile.extension=="."+$container.find(".RenameExtension").val()&&protectedFile.node==activDir)return alert("Un fichier porte déjà ce nom et cette extension à cet endroit ! Impossible de le renommer ainsi. Choisissez un autre nom."),renamable=!1;var oldName=protectedFile.name+protectedFile.extension;if(protectedFile.name=$container.find(".renamerInput").val(),protectedFile.extension="."+$container.find(".RenameExtension").val(),renamable=!0,renamable){var newName=protectedFile.name+protectedFile.extension
;protectedFile.dateMod=getNowDate(),$container.find(".modali").hide(),$tree.jstree("open_node",activDir),displayDirContent(activDir),evName="Mcontextuel - Renommer le fichier",evCollector(evName,oldName,newName),dataFiles()}})}}}$container.find(".modali").show().css({width:"600px",height:"140px"}),$container.find(".renamerInput").css("width","170px").focus(),$container.find(".modalTitle").remove(),$container.find(".annulModal").click(function(){$container.find(".modali").hide()})}else alert("Attention aucun élément n'est sélectionné")}function commandProperties(selectedNode){var evName
;if(selectedNode)$container.find(".fakeModalWindow").html('<div class="modalTitle"><div class="windowTools"></div></div>'),$container.find(".modalTitle").css({height:"37px",opacity:"0.8"}),$container.find(".windowTools").html('<div class="icoClose annulModal"></div>'),
"#"==selectedNode[0].parent?$container.find(".contentModal").html("<h3>Propriétés</h3><ul class = 'nav nav-tabs'> <li class = 'active'> <a data-toggle = 'tab' href='#home'> Général </a></li> <li><a data-toggle = 'tab' href='#menu1'> Sécurité </a></li> <li> <a data-toggle = 'tab' href='#menu2'> Détails </a></li> </ul><div class='tab-content'> <div id='home' class='tab-pane fade in active'> <h3>Localisation -> "+selectedNode[0].text+"</h3><p>Informations : <ul><li>Répertoire parent : - <li>Date de création : "+euroDate(selectedNode[0].data.dateCreat)+"<li>Date de dernière modification : "+euroDate(selectedNode[0].data.dateMod)+" </ul> </p> </div> <div id = 'menu1' class='tab-pane fade'><h3> Sécurité </h3> <p>Vous ne disposez pas des autorisations pour accéder à ces informations</p> </div> <div id='menu2' class='tab-pane fade'> <h3>Détails</h3> <p>Ce répertoire a été crée par</p><p> .... vous ne disposez pas des droits pour accéder à cette information.</p> </div> </div><button class='annulModal'>Fermer</button>"):$container.find(".contentModal").html("<h3>Propriétés</h3><ul class = 'nav nav-tabs'> <li class = 'active'> <a data-toggle = 'tab' href='#home'> Général </a></li> <li><a data-toggle = 'tab' href='#menu1'> Sécurité </a></li> <li> <a data-toggle = 'tab' href='#menu2'> Détails </a></li> </ul><div class='tab-content'> <div id='home' class='tab-pane fade in active'> <h3>Localisation -> "+selectedNode[0].text+"</h3><p>Informations : <ul><li>Répertoire parent : "+getDirName(selectedNode[0].parent)+"<li>Date de création : "+euroDate(selectedNode[0].data.dateCreat)+"<li>Date de dernière modification : "+euroDate(selectedNode[0].data.dateMod)+"<li>Capacité : "+bytUnit(selectedNode[0].data.capacity)+"<li>Espace disponible : "+bytUnit(freeSpace(selectedNode[0]))+"</ul> </p> </div> <div id = 'menu1' class='tab-pane fade'><h3> Sécurité </h3 > <p> Vous ne disposez pas des autorisations pour accéder à ces informations </p> </div > <div id = 'menu2' class = 'tab-pane fade'> <h3> Détails </h3> <p>Ce répertoire a été crée par</p><p> ....vous ne disposez pas des droits pour accéder à cette information. </p> </div > </div><button class='annulModal'>Fermer</button > "),
$container.find(".modali").show().css({width:"500px",height:"500px"});else{var SelectedArr=$fileList.rows({selected:!0})[0],indexElement=SelectedArr[0],element=$fileList.row(indexElement).data();if(0==SelectedArr.length)alert("Aucun élément n'est sélectionné dans la liste.");else if("Répertoire"==element[3]||"Mémoire Flash"==element[3]||"Lecteur Optique CD"==element[3]||"Mémoire Flash usb"==element[3]||"Volume"==element[3])for(var i=0;i<treeFolder.length;i++)treeFolder[i].id==element[0]&&($container.find(".fakeModalWindow").html('<div class="modalTitle"><div class="windowTools"></div></div>'),
$container.find(".windowTools").html('<div class="icoClose annulModal"></div>'),$container.find(".modalTitle").css({height:"37px",opacity:"0.8"}),
$container.find(".contentModal").html("<h3>Propriétés</h3><ul class = 'nav nav-tabs'> <li class = 'active'> <a data-toggle = 'tab' href='#home'> Général </a></li> <li><a data-toggle = 'tab' href='#menu1'> Sécurité </a></li> <li> <a data-toggle = 'tab' href='#menu2'> Détails </a></li> </ul><div class='tab-content'> <div id='home' class='tab-pane fade in active'> <h3>Nom du répertoire : "+treeFolder[i].text+"</h3><p>Informations : <ul><li>Répertoire parent : "+getDirName(treeFolder[i].parent)+"<li>Date de création : "+euroDate(treeFolder[i].data.dateCreat)+"<li>Date de dernière modification : "+euroDate(treeFolder[i].data.dateMod)+"<li>Capacité : "+bytUnit(treeFolder[i].data.capacity)+"<li>Espace disponible : "+bytUnit(treeFolder[i].data.freeSpace)+"</ul> </p> </div> <div id = 'menu1' class='tab-pane fade'><h3> Sécurité </h3> <p>Vous ne disposez pas des autorisations pour accéder à ces informations</p> </div> <div id='menu2' class='tab-pane fade'> <h3>Détails</h3> <p>Ce répertoire a été crée par</p><p> .... vous ne disposez pas des droits pour accéder à cette information.</p> </div> </div><button class='annulModal'>Fermer</button>"),
$container.find(".modali").show().css({width:"500px",height:"500px"}),evName="Consultation des propriétés du répertoire",evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].parent)));else for(var i=0;i<mapFile.length;i++)mapFile[i].fileId==element[0]&&($container.find(".fakeModalWindow").html('<div class="modalTitle"><div class="windowTools"></div></div>'),$container.find(".windowTools").html('<div class="icoClose annulModal"></div>'),$container.find(".modalTitle").css({height:"37px",opacity:"0.8"}),
$container.find(".contentModal").html("<h3>Propriétés</h3><ul class = 'nav nav-tabs'> <li class = 'active'> <a data-toggle = 'tab' href='#home'> Général </a></li> <li><a data-toggle = 'tab' href='#menu1'> Sécurité </a></li> <li> <a data-toggle = 'tab' href='#menu2'> Détails </a></li> </ul><div class='tab-content'> <div id='home' class='tab-pane fade in active'> <h3>Nom du fichier : "+mapFile[i].name+mapFile[i].extension+"</h3><p>Informations : <ul><li>Répertoire parent : "+getDirName(mapFile[i].node)+"<li>Date de création : "+euroDate(mapFile[i].dateCreat)+"<li>Date de dernière modification : "+euroDate(mapFile[i].dateMod)+"<li>Date du dernier accès : "+euroDate(mapFile[i].dateLastAcces)+"<li>Application associée : "+mapFile[i].app+"<li>Auteur : "+mapFile[i].author+"</ul> </p> </div> <div id = 'menu1' class='tab-pane fade'><h3> Sécurité </h3> <p>Vous ne disposez pas des autorisations pour accéder à ces informations</p> </div> <div id='menu2' class='tab-pane fade'> <h3>Détails</h3> <p>Ce répertoire a été crée par</p><p> .... vous ne disposez pas des droits pour accéder à cette information.</p> </div> </div><button class='annulModal'>Fermer</button>"),
$container.find(".modali").show().css({width:"500px",height:"500px"}),evName="Consultation des propriétés du fichier",evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].node)))}$container.find(".annulModal").click(function(){$container.find(".modali").hide()})}function commandEmptyTrash(){var evName;confirm("Vous allez vider la corbeille... Les données seront définitivement effacées.");for(var activDir=$tree.jstree(!0).get_selected(),index=0;index<mapFile.length;index++)"bin"==mapFile[index].node&&(mapFile[index].node="erased",evName="Mcontextuel - Destruction définitive de fichier",
evCollector(evName,mapFile[index].name+mapFile[index].extension,getDirName(mapFile[index].origin)),dataFiles());for(var i=0;i<treeFolder.length;i++)"bin"==treeFolder[i].parent&&($tree.jstree().move_node(treeFolder[i].id,"erased"),treeFolder[i].parent="erased",evName="Mcontextuel Destruction définitive de répertoire",evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].origin)),dataFolder());displayDirContent(activDir),$tree.jstree("open_node",activDir)}function commandRestaure(){var evName;if("bin"==$tree.jstree(!0).get_selected()){SelectedArr=$fileList.rows({selected:!0})[0];for(var index=0;index<SelectedArr.length;index++){
for(var indexElement=SelectedArr[index],element=$fileList.row(indexElement).data(),i=0;i<mapFile.length;i++)mapFile[i].fileId==element[0]&&(mapFile[i].node=mapFile[i].origin,mapFile[i].origin="bin",evName="Mcontextuel - Restaurer fichier de la corbeille",evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].node)),dataFiles());for(var i=0;i<treeFolder.length;i++){var idfold=treeFolder[i];idfold.id==element[0]&&(treeFolder[i].parent=treeFolder[i].origin,treeFolder[i].origin="bin",$tree.jstree().move_node(idfold.id,"bin"),dataFolder(),evName="Mcontextuel Restauration de répertoire",
evCollector(evName,treeFolder[i].text,getDirName(treeFolder[i].parent)))}}$tree.jstree(!0).refresh()}else $tree.jstree("deselect_all"),$tree.jstree("select_node","bin"),$tree.jstree("open_node","bin")}function commandOpen(){var evName,SelectedArr=$fileList.rows({selected:!0})[0];if(0==SelectedArr.length)alert("Aucun fichier ou répertoire n'a été sélectionné. Sélectionner d'abord un élément de la liste ou double cliquer sur l'élément pour l'ouvrir");else{var indexElement=SelectedArr[0],element=$fileList.row(indexElement).data()
;if("Répertoire"==element[3]||"Mémoire Flash"==element[3]||"Lecteur Optique CD"==element[3]||"Mémoire Flash usb"==element[3]||"Volume"==element[3])$tree.jstree("deselect_all"),$tree.jstree("select_node",element[0]),$tree.jstree("open_node",element[0]);else for(var i=0;i<mapFile.length;i++)element[0]==mapFile[i].fileId&&(evName="Mcontextuel - ouvrir fichier",evCollector(evName,mapFile[i].name+mapFile[i].extension,getDirName(mapFile[i].node)),fileCall(mapFile[i].name+mapFile[i].extension,$tree.jstree(!0).get_selected()))}}function euroDate(isodate){var eurodate;if(isNaN(isodate[0]))eurodate="-";else{var dateObj=new Date(isodate)
;eurodate=("0"+dateObj.getDate()).slice(-2)+"/"+("0"+(dateObj.getMonth()+1)).slice(-2)+"/"+dateObj.getFullYear()}return eurodate}function ID(){return"_"+Math.random().toString(36).substr(2,9)}function getNowDate(){return(new Date).toISOString().substring(0,10).replace(/-/g,"/")}function getDirName(id){for(var i=0;i<treeFolder.length;i++)if(id==treeFolder[i].id)var namer=treeFolder[i].text;return namer}function isURL(str){return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(str)}
function fileCall(targetName,targetPlace){for(var evName,i=0;i<mapFile.length;i++){if(mapFile[i].name+mapFile[i].extension==targetName&&mapFile[i].node==targetPlace){mapFile[i].dateLastAcces=getNowDate();var appImgUrl=mapFile[i].image_url;if(appImgUrl||(appImgUrl=assetManager.resolve("explo/runtime/assets/Processing.png")),".txt"==mapFile[i].extension||".doc"==mapFile[i].extension||".docx"==mapFile[i].extension){var indexMap=i;if(mapFile[i].content)var content=mapFile[i].content;content||(content=" "),$container.find(".modalApp").show().css({width:"700px",height:"530px",padding:"10px","text-align":"center"}),
$container.find(".windowToolbar").html('<div class="icoClose closeWindow"></div>').hide(),$container.find(".contentModalApp").addClass("imageAppContainer");var editorID=ID();$container.find(".contentModalApp").html("<textarea class='richContent' cols='300' id="+editorID+">"+content+"</textarea><img class='waitIcon' src= "+assetManager.resolve("explo/runtime/assets/Loading_icon.gif")+">"),$(".richContent").richText(),$container.find(".nicEdit-panelContain").parent().width("100%"),$container.find(".nicEdit-panelContain").parent().next().width("98%"),$container.find(".nicEdit-panelContain").parent().next().height("250px"),
$container.find(".nicEdit-main").width("98%"),$container.find(".waitIcon").hide(),$container.find(".windowToolbar").show(),$container.find(".contentModalApp").append("<button class='saveTxt butcloser'>Sauvegarder et fermer</button><button class='annulModal butcloser'>fermer sans sauvegarder</button>"),$container.find(".annulModal").click(function(){$container.find(".modalApp").hide(),$container.find(".saveTxt").remove(),evName="Fermeture du fichier texte sans sauvegarder",evCollector(evName,mapFile[indexMap].name,mapFile[indexMap].content)}),$container.find(".saveTxt").click(function(params){mapFile[indexMap].dateMod=getNowDate(),
mapFile[indexMap].content=$container.find(".richText-editor")[0].innerText,mapFile[indexMap].size=mapFile[indexMap].content.length/10,dataFiles(),evName="Sauvegarde du fichier texte",evCollector(evName,mapFile[indexMap].name,mapFile[indexMap].content),$container.find(".modalApp").hide(),$container.find(".saveTxt").remove(),$tree.jstree(!0).open_node(mapFile[indexMap].node),displayDirContent(targetPlace)}),$container.find(".closeWindow").click(function(){$container.find(".modalApp").hide(),$container.find(".saveTxt").remove()})}else if(isURL(appImgUrl)){var indexMap=i;$container.find(".modalApp").show().css({width:"1000px",height:"550px"}),
$container.find(".windowToolbar").html('<div class="icoClose closeWindow"></div>'),$container.find(".windowToolbar img").addClass("closeWindow"),$container.find(".contentModalApp").addClass("imageAppContainer"),$container.find(".contentModalApp").html("<button class='annulModal topButtonCloser'>Fermer l'application et retourner à l'explorateur de fichiers</button><img class='imageApp' src="+appImgUrl+">"),$container.find(".annulModal").click(function(){$container.find(".modalApp").hide(),evName="Confirmation de la consultation de l'image liée au fichier",evCollector(evName,mapFile[indexMap].name+mapFile[indexMap].extension,getDirName(mapFile[indexMap].node))
}),$container.find(".closeWindow").click(function(){$container.find(".modalApp").hide()})}else".js"==mapFile[i].extension||".xls"==mapFile[i].extension||".doc"==mapFile[i].extension||".ppt"==mapFile[i].extension?($container.find(".modali").show().css({width:"500px",height:"500px"}),$container.find(".windowTools").hide(),$container.find(".contentModal").html("<br /><hr><h2>Vous venez de lancer l'application permettant d'ouvrir ce fichier.</h2><img class='processing' width='430px' src="+assetManager.resolve("explo/runtime/assets/Processing.png")+"/><button class='annulModal'>Retourner à l'explorateur de fichiers</button>"),
$container.find(".annulModal").click(function(){$container.find(".modali").hide()})):alert("Aucune application n'est associée à ce type de fichier.")}}}function reorganizeChildren(childBrut){for(var subtstring=childBrut.split("\n"),result=[],i=0;i<subtstring.length;i++)" "!==subtstring[i]&&result.push(subtstring[i]);return result}function searchElement(el,startSearchId){var folderChildren=[],folderChildrenID=[];$tree.jstree(!0).open_all(startSearchId)
;for(var children=$tree.jstree("get_children_dom",startSearchId),i=0;i<children.length;i++)for(var cleanChildren=reorganizeChildren(children[i].innerText),z=0;z<cleanChildren.length;z++)folderChildren.push(cleanChildren[z]);for(var u=0;u<treeFolder.length;u++)for(var x=0;x<folderChildren.length;x++)treeFolder[u].text==folderChildren[x]&&-1===folderChildrenID.indexOf(treeFolder[u].id)&&folderChildrenID.push(treeFolder[u].id);0==onlyOne&&(!function(){folderChildrenID.push(startSearchId);for(var i=0;i<mapFile.length;i++)for(var ci=0;ci<folderChildrenID.length;ci++)if(folderChildrenID[ci]==mapFile[i].node){
var childrenNameLC=mapFile[i].name.toLowerCase(),childrenExtLC=mapFile[i].extension.toLowerCase(),elLC=el.toLowerCase(),searchTestName=childrenNameLC.search(elLC),searchTestExt=childrenExtLC.search(elLC);if(searchTestName>=0||searchTestExt>=0){var newId=mapFile.length+1,newEl={fileId:newId,node:"searchResult",name:mapFile[i].name,extension:mapFile[i].extension,size:mapFile[i].size,dateMod:mapFile[i].dateMod,dateCreat:mapFile[i].dateCreat,app:mapFile[i].app,image_url:mapFile[i].image_url,dateLastAcces:mapFile[i].dateLastAcces,author:mapFile[i].author,content:mapFile[i].content,originalPath:mapFile[i].node};mapFile.push(newEl)}}}(),onlyOne++),
function(folderChildren){for(var childrenNameLC,elLC,scanRsFolder=[],scanRsFolderID=[],i=0;i<folderChildren.length;i++)childrenNameLC=folderChildren[i].toLowerCase(),elLC=el.toLowerCase(),childrenNameLC.search(elLC)>=0&&scanRsFolder.push(folderChildren[i]);for(var a=0;a<scanRsFolder.length;a++)for(var wi=0;wi<treeFolder.length;wi++)treeFolder[wi].text==scanRsFolder[a]&&-1===scanRsFolderID.indexOf(treeFolder[wi].id)&&scanRsFolderID.push(treeFolder[wi].id);for(var b=0;b<scanRsFolderID.length;b++){
for(var pathSearchedfolder=$tree.jstree().get_path(scanRsFolderID[b]),newSearchName="",s=1;s<pathSearchedfolder.length;s++)var newSearchName=newSearchName+pathSearchedfolder[s]+"/";var originalNode=$tree.jstree(!0).get_node(scanRsFolderID[b]),copyOfNode=$tree.jstree(!0).copy_node(scanRsFolderID[b],"searchResult"),copyObj=$tree.jstree(!0).get_node(copyOfNode);$tree.jstree().rename_node(copyOfNode,newSearchName),copyObj.data=[],copyObj.data.type=originalNode.data.type,copyObj.data.dateMod=originalNode.data.dateMod,copyObj.data.dateCreat=originalNode.data.dateCreat,copyObj.data.originalPath=originalNode.parent,treeFolder.push({id:copyOfNode,
parent:"searchResult",text:newSearchName,type:copyObj.type,data:{type:originalNode.data.type,dateMod:originalNode.data.dateMod,dateCreat:originalNode.data.dateCreat,originalPath:originalNode.parent}})}}(folderChildren)}function cleanSearch(){for(var i=0;i<treeFolder.length;i++)"searchResult"==treeFolder[i].parent&&$tree.jstree(!0).delete_node(treeFolder[i].id);for(var y=0;y<mapFile.length;y++)"searchResult"==mapFile[y].node&&(mapFile[y].node="archivSearch",displayDirContent("searchResult"))}function bytUnit(size){var rightSize,megabyteTest=parseInt(size)/1e3,gigabyteTest=parseInt(size)/1e6,terabyteTest=parseInt(size)/1e9
;return rightSize=megabyteTest<1?Number.parseFloat(size).toFixed(2)+" Ko":gigabyteTest<1?Number.parseFloat(megabyteTest).toFixed(2)+" Mo":terabyteTest<1?Number.parseFloat(gigabyteTest).toFixed(2)+" Go":Number.parseFloat(terabyteTest).toFixed(2)+" To","NaN"==rightSize?"-":rightSize}function getAllChildren(node){return $tree.jstree("get_node",node[0]).children_d}function getvol(node){var node_info=$tree.jstree("get_node",node);if(node_info){var parents=[];"Volume"==node_info.data.type||"Mémoire Flash"==node_info.data.type||"Mémoire Flash usb"==node_info.data.type?parents.push(node_info.id):parents=node_info.parents
;for(var i=0;i<parents.length;i++)for(var y=0;y<treeFolder.length;y++)if(parents[i]==treeFolder[y].id&&"Volume"==treeFolder[y].data.type||parents[i]==treeFolder[y].id&&"Mémoire Flash"==node_info.data.type||parents[i]==treeFolder[y].id&&"Mémoire Flash usb"==node_info.data.type)return treeFolder[y].id}}function freeSpace(vol){var freeSpace=0,occSpace=0,ChildArray=[],tNode=$tree.jstree(!0).get_node(vol,!0);if(ChildArray=getAllChildren(tNode),vol){-1===ChildArray.indexOf(vol.id)&&ChildArray.push(vol.id);var filteredArr=ChildArray.filter(function(item,index){if(ChildArray.indexOf(item)==index)return item});ChildArray=filteredArr
;for(var i=0;i<ChildArray.length;i++)for(var y=0;y<mapFile.length;y++)mapFile[y].node==ChildArray[i]&&(occSpace+=parseInt(mapFile[y].size));for(var i=0;i<treeFolder.length;i++)treeFolder[i].id==vol.id&&(freeSpace=parseInt(treeFolder[i].data.capacity)-occSpace,treeFolder[i].data.freeSpace=freeSpace);return freeSpace}return 1e10}function testFreeSpace(desti,element,operation){var destiNodeId,originalVol,freespace,rest,size=element.size;return destiNodeId=getvol(desti),originalVol=getvol(element.origin),destiNodeId==originalVol&&"move"==operation?!0:"bin"==desti?!0:(freespace=freeSpace($tree.jstree(!0).get_node(destiNodeId)),rest=freespace-parseInt(size),
rest>0)}function testFreeSpaceFolder(desti,size){var destiNodeId,freespace,rest;return destiNodeId=getvol(desti),freespace=freeSpace($tree.jstree(!0).get_node(destiNodeId)),rest=freespace-parseInt(size),rest>0}function dataFolder(){$container.find(".dataTree").html(JSON.stringify(treeFolder))}function dataFiles(){$container.find(".dataFiles").html(JSON.stringify(mapFile))}function dataClipBoard(){$container.find(".dataClipBoard").html(JSON.stringify(clipBoard))}var mapFile,treeFolder,$fileList,$tree,WbranchSize,destiTarget,onlyOne,DDFile=[],DDFolder=[],SelectedArr=[],clipBoard=[],eventCollector=[],incrementor=1,searchResultArr=[]
;$container.find(".prompt").hide(),
$container.find(".navbar").html('<div class="container-fluid"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li class="active"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Fichier <span class="caret"></span> </a> <ul class="dropdown-menu"> <li> <a href="#" class="formater">Formater lecteur</a> </li>  \x3c!-- <li> <a href="#">Gestion Espace</a> </li> --\x3e </ul> </li> <li> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Affichage <span class="caret"></span> </a> <ul class="dropdown-menu"> \x3c!-- <li> <a href="#">Grandes icônes</a> </li> <li> <a href="#">Petites icônes</a> </li> --\x3e <li> <a href="#">Détails</a> </li> \x3c!-- <li> <a href="#">Afficher les fichiers cachés</a> </li> --\x3e </ul> </li> <li> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Navigation <span class="caret"></span> </a> <ul class="dropdown-menu"> <li> <a href="#">Réseau</a> </li> \x3c!-- <li> <a href="#">Ajouter un accès rapide</a> </li> <li> <a href="#">Prévisualiser</a> </li> --\x3e </ul> </li> </ul> </div> \x3c!--/.nav-collapse --\x3e </div> \x3c!--/.container-fluid --\x3e'),
$container.find(".path").html('<div class="preIconPath"></div> <div class="pathLine">Loading...</div><div title="cliquez pour lancer la recherche" class="magnify"></div><input class="searchInput" type="text" placeholder="Rechercher fichier ou dossier"> '),""==config.data?(mapFile=defaultjson.mapFile,treeFolder=defaultjson.treeFolder,runTree(),tableDisplayer()):(mapFile=config.data.mapFile,treeFolder=config.data.treeFolder,runTree(),$tree.jstree().destroy(),$container.find(".tree").html('<div class="jstree "></div>'),runTree(),tableDisplayer(),$fileList.destroy(),$container.find(".dirContent").remove(),
$container.find(".fileList").html('<table class="table dirContent"></table>'),tableDisplayer()),$tree.bind("select_node.jstree",function(e,data){return data.instance.toggle_node(data.node)}),$tree.on("changed.jstree",function(e,data){$container.find(".ctxMenu").css("display","none"),$container.find(".jstree-node").on("dragover",function(event){event.preventDefault(),event.stopPropagation(),$container.find(this).addClass("dragging")}),$container.find(".jstree-node").on("drop",function(event){event.preventDefault(),event.stopPropagation(),drop(event)}),displayDirContent(data.selected)})
;for(var i=0;i<treeFolder.length;i++)"vol1"==treeFolder[i].id&&$container.find(".listItemRapid").html('<li class="rapidLi vol1"><div class="icoHdrive icoRacc"></div><div class="raccVolC">'+treeFolder[i].text+"</div></li>"),"images"==treeFolder[i].id&&$container.find(".listItemRapid").prepend('<li class = "rapidLi images "><div class="icoPic icoRacc"></div><div class="raccVolC">'+treeFolder[i].text+"</div></li>"),"videos"==treeFolder[i].id&&$container.find(".listItemRapid").prepend('<li class="rapidLi videos "><div class="icoVideo icoRacc"></div><div class="raccVolC">'+treeFolder[i].text+"</div></li>"),
"documents"==treeFolder[i].id&&$container.find(".listItemRapid").prepend('<li class="rapidLi documents "><div class="icoDocument icoRacc"></div><div class="raccVolC">'+treeFolder[i].text+"</div></li>"),"downloads"==treeFolder[i].id&&$container.find(".listItemRapid").prepend('<li class="rapidLi downloads "><div class="icoDownload icoRacc"></div><div class="raccVolC">'+treeFolder[i].text+"</div></li>");$container.find(".images").on("click",function(){$tree.jstree("deselect_all"),$tree.jstree("select_node","images"),displayDirContent("images")}),$container.find(".videos").on("click",function(){$tree.jstree("deselect_all"),$tree.jstree("select_node","videos"),
displayDirContent("videos")}),$container.find(".documents").on("click",function(){$tree.jstree("deselect_all"),$tree.jstree("select_node","documents"),displayDirContent("documents")}),$container.find(".downloads").on("click",function(){$tree.jstree("deselect_all"),$tree.jstree("select_node","downloads"),displayDirContent("downloads")}),$container.find(".vol1").on("click",function(){$tree.jstree("deselect_all"),$tree.jstree("select_node","vol1"),displayDirContent("vol1")}),$container.find(".accesRapide").addClass("fa fa-angle-down"),$container.find(".QuickTitle").click(function(){$container.find(".listItemRapid").slideToggle()}),
$container.find(".formater").on("click",function(){formater()}),$container.find(".commandWindow").on("click",function(){$container.find(".comWin").show(),$container.find(".comLine").focus()}),$container.find(".windowTools").click(function(){$container.find(".modali").hide()}),$container.find(".closeWindow").click(function(){$container.find(".modali").hide()}),$container.find("div").on("contextmenu",function(event){event.preventDefault()}),$container.find("nav").on("contextmenu",function(event){return event.preventDefault(),!1}),$container.find(".fileZone").on("contextmenu",function(event){event.preventDefault()}),
$container.find(".accesRapide").on("click",function(){$container.find(".ctxMenu").css("display","none")}),$container.find(".navbar").on("click",function(){$container.find(".ctxMenu").css("display","none")}),$container.find(".path").on("click",function(){$container.find(".ctxMenu").css("display","none")}),$container.find(".fileZone").on("click",function(){$container.find(".ctxMenu").css("display","none")});var $ctxMenu=$container.find(".ctxMenu");$container.find(".fileZone").contextmenu(function(event){$ctxMenu.css("display","block"),$ctxMenu.css("left",event.pageX-200+"px"),$ctxMenu.css("top",event.pageY-50+"px")}),
$container.find(".explo").on("click",function(){$ctxMenu.css("display","none")}),$container.find(".copyOrder").on("click",function(){commandCopy(),$ctxMenu.css("display","none")}),$container.find(".cutOrder").on("click",function(){commandCut(),$ctxMenu.css("display","none")}),$container.find(".pasteOrder").on("click",function(){commandPaste(),$ctxMenu.css("display","none")}),$container.find(".newFileOrder").on("click",function(){commandNewFile(),$ctxMenu.css("display","none")}),$container.find(".newFolderOrder").on("click",function(){commandNewFolder(),$ctxMenu.css("display","none")}),$container.find(".openOrder").on("click",function(){commandOpen(),
$ctxMenu.css("display","none")}),$container.find(".renameOrder").on("click",function(){commandRename(),$ctxMenu.css("display","none")}),$container.find(".deleteOrder").on("click",function(){commandTrash(),$ctxMenu.css("display","none")}),$container.find(".propsOrder").on("click",function(){commandProperties(),$ctxMenu.css("display","none")}),$container.find(".emptyTrashOrder").on("click",function(){commandEmptyTrash(),$ctxMenu.css("display","none")}),$container.find(".restaureOrder").on("click",function(){commandRestaure(),$ctxMenu.css("display","none")}),$container.find(".homeOrder").on("click",function(){$tree.jstree("deselect_all"),
$tree.jstree("select_node","root"),$tree.jstree("open_node","root"),$ctxMenu.css("display","none")}),searchResultArr=[],onlyOne=0,$container.find(".magnify").on("click",function(){var el=$container.find(".searchInput").val(),startSearchId=$tree.jstree(!0).get_selected()[0];startSearchId||(startSearchId="root"),onlyOne=0,el?(cleanSearch(),searchResultArr=[],searchElement(el,startSearchId),$tree.jstree("deselect_all"),$tree.jstree("select_node","searchResult")):alert("Préciser votre recherche")})}return{render:function(id,container,config,assetManager){renderExplo(id,$(container),config,assetManager)},renderExplo:function(id,container,config,assetManager){
renderExplo(id,$(container),config,assetManager)}}}),function(){function n(n,t,e){e=(e||0)-1;for(var r=n?n.length:0;++e<r;)if(n[e]===t)return e;return-1}function t(t,e){var r=typeof e;if(t=t.l,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?e:b+e;return t=(t=t[r])&&t[u],"object"==r?t&&-1<n(t,e)?0:-1:t?0:-1}function e(n){var t=this.l,e=typeof n;if("boolean"==e||null==n)t[n]=!0;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?n:b+n,t=t[e]||(t[e]={});"object"==e?(t[r]||(t[r]=[])).push(n):t[r]=!0}}function r(n){return n.charCodeAt(0)}function u(n,t){for(var e=n.m,r=t.m,u=-1,o=e.length;++u<o;){
var a=e[u],i=r[u];if(a!==i){if(a>i||void 0===a)return 1;if(a<i||void 0===i)return-1}}return n.n-t.n}function o(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;for(u=l(),u.false=u.null=u.true=u.undefined=!1,o=l(),o.k=n,o.l=u,o.push=e;++t<r;)o.push(n[t]);return o}function a(n){return"\\"+Y[n]}function i(){return v.pop()||[]}function l(){return y.pop()||{k:null,l:null,m:null,false:!1,n:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,o:null}}function f(n){return"function"!=typeof n.toString&&"string"==typeof(n+"")}function c(n){n.length=0,
v.length<w&&v.push(n)}function p(n){var t=n.l;t&&p(t),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,y.length<w&&y.push(n)}function s(n,t,e){t||(t=0),void 0===e&&(e=n?n.length:0);var r=-1;e=e-t||0;for(var u=Array(0>e?0:e);++r<e;)u[r]=n[t+r];return u}function g(e){function v(n){return n&&"object"==typeof n&&!qe(n)&&we.call(n,"__wrapped__")?n:new y(n)}function y(n,t){this.__chain__=!!t,this.__wrapped__=n}function w(n){function t(){if(r){var n=s(r);je.apply(n,arguments)}if(this instanceof t){var o=nt(e.prototype),n=e.apply(o,n||arguments);return xt(n)?n:o}return e.apply(u,n||arguments)}var e=n[0],r=n[2],u=n[4];return ze(t,n),t}function Y(n,t,e,r,u){if(e){
var o=e(n);if(void 0!==o)return o}if(!xt(n))return n;var a=he.call(n);if(!V[a]||!Le.nodeClass&&f(n))return n;var l=Te[a];switch(a){case L:case z:return new l(+n);case W:case M:return new l(n);case J:return o=l(n.source,S.exec(n)),o.lastIndex=n.lastIndex,o}if(a=qe(n),t){var p=!r;r||(r=i()),u||(u=i());for(var g=r.length;g--;)if(r[g]==n)return u[g];o=a?l(n.length):{}}else o=a?s(n):Ye({},n);return a&&(we.call(n,"index")&&(o.index=n.index),we.call(n,"input")&&(o.input=n.input)),t?(r.push(n),u.push(o),(a?Xe:tr)(n,function(n,a){o[a]=Y(n,t,e,r,u)}),p&&(c(r),c(u)),o):o}function nt(n){return xt(n)?Se(n):{}}function tt(n,t,e){if("function"!=typeof n)return Ht
;if(void 0===t||!("prototype"in n))return n;var r=n.__bindData__;if(void 0===r&&(Le.funcNames&&(r=!n.name),!(r=r||!Le.funcDecomp))){var u=be.call(n);Le.funcNames||(r=!A.test(u)),r||(r=B.test(u),ze(n,r))}if(!1===r||!0!==r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,u){return n.call(t,e,r,u)};case 4:return function(e,r,u,o){return n.call(t,e,r,u,o)}}return Mt(n,t)}function et(n){function t(){var n=l?a:this;if(u){var h=s(u);je.apply(h,arguments)}return(o||c)&&(h||(h=s(arguments)),o&&je.apply(h,o),c&&h.length<i)?(r|=16,
et([e,p?r:-4&r,h,null,a,i])):(h||(h=arguments),f&&(e=n[g]),this instanceof t?(n=nt(e.prototype),h=e.apply(n,h),xt(h)?h:n):e.apply(n,h))}var e=n[0],r=n[1],u=n[2],o=n[3],a=n[4],i=n[5],l=1&r,f=2&r,c=4&r,p=8&r,g=e;return ze(t,n),t}function rt(e,r){var u=-1,a=ht(),i=e?e.length:0,l=i>=_&&a===n,f=[];if(l){var c=o(r);c?(a=t,r=c):l=!1}for(;++u<i;)c=e[u],0>a(r,c)&&f.push(c);return l&&p(r),f}function ot(n,t,e,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){var a=n[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(qe(a)||dt(a))){t||(a=ot(a,t,e));var i=-1,l=a.length,f=o.length;for(o.length+=l;++i<l;)o[f++]=a[i]}else e||o.push(a)}return o}
function at(n,t,e,r,u,o){if(e){var a=e(n,t);if(void 0!==a)return!!a}if(n===t)return 0!==n||1/n==1/t;if(n===n&&!(n&&X[typeof n]||t&&X[typeof t]))return!1;if(null==n||null==t)return n===t;var l=he.call(n),p=he.call(t);if(l==T&&(l=G),p==T&&(p=G),l!=p)return!1;switch(l){case L:case z:return+n==+t;case W:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case J:case M:return n==ie(t)}if(!(p=l==$)){var s=we.call(n,"__wrapped__"),g=we.call(t,"__wrapped__");if(s||g)return at(s?n.__wrapped__:n,g?t.__wrapped__:t,e,r,u,o);if(l!=G||!Le.nodeClass&&(f(n)||f(t)))return!1;if(l=!Le.argsObject&&dt(n)?oe:n.constructor,s=!Le.argsObject&&dt(t)?oe:t.constructor,
l!=s&&!(jt(l)&&l instanceof l&&jt(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}for(l=!u,u||(u=i()),o||(o=i()),s=u.length;s--;)if(u[s]==n)return o[s]==t;var h=0,a=!0;if(u.push(n),o.push(t),p){if(s=n.length,h=t.length,(a=h==s)||r)for(;h--;)if(p=s,g=t[h],r)for(;p--&&!(a=at(n[p],g,e,r,u,o)););else if(!(a=at(n[h],g,e,r,u,o)))break}else nr(t,function(t,i,l){return we.call(l,i)?(h++,a=we.call(n,i)&&at(n[i],t,e,r,u,o)):void 0}),a&&!r&&nr(n,function(n,t,e){return we.call(e,t)?a=-1<--h:void 0});return u.pop(),o.pop(),l&&(c(u),c(o)),a}function it(n,t,e,r,u){(qe(t)?Dt:tr)(t,function(t,o){var a,i,l=t,f=n[o];if(t&&((i=qe(t))||er(t))){
for(l=r.length;l--;)if(a=r[l]==t){f=u[l];break}if(!a){var c;e&&(l=e(f,t),c=void 0!==l)&&(f=l),c||(f=i?qe(f)?f:[]:er(f)?f:{}),r.push(t),u.push(f),c||it(f,t,e,r,u)}}else e&&void 0===(l=e(f,t))&&(l=t),void 0!==l&&(f=l);n[o]=f})}function lt(n,t){return n+de(Fe()*(t-n+1))}function ft(e,r,u){var a=-1,l=ht(),f=e?e.length:0,s=[],g=!r&&f>=_&&l===n,h=u||g?i():s;for(g&&(h=o(h),l=t);++a<f;){var v=e[a],y=u?u(v,a,e):v;(r?!a||h[h.length-1]!==y:0>l(h,y))&&((u||g)&&h.push(y),s.push(v))}return g?(c(h.k),p(h)):u&&c(h),s}function ct(n){return function(t,e,r){var u={};if(e=v.createCallback(e,r,3),qe(t)){r=-1;for(var o=t.length;++r<o;){var a=t[r];n(u,a,e(a,r,t),t)}
}else Xe(t,function(t,r,o){n(u,t,e(t,r,o),o)});return u}}function pt(n,t,e,r,u,o){var a=1&t,i=4&t,l=16&t,f=32&t;if(!(2&t||jt(n)))throw new le;l&&!e.length&&(t&=-17,l=e=!1),f&&!r.length&&(t&=-33,f=r=!1);var c=n&&n.__bindData__;return c&&!0!==c?(c=s(c),c[2]&&(c[2]=s(c[2])),c[3]&&(c[3]=s(c[3])),!a||1&c[1]||(c[4]=u),!a&&1&c[1]&&(t|=8),!i||4&c[1]||(c[5]=o),l&&je.apply(c[2]||(c[2]=[]),e),f&&Ee.apply(c[3]||(c[3]=[]),r),c[1]|=t,pt.apply(null,c)):(1==t||17===t?w:et)([n,t,e,r,u,o])}function st(){Q.h=F,Q.b=Q.c=Q.g=Q.i="",Q.e="t",Q.j=!0;for(var n,t=0;n=arguments[t];t++)for(var e in n)Q[e]=n[e];t=Q.a,Q.d=/^[^,]+/.exec(t)[0],n=ee,t="return function("+t+"){",e=Q
;var r="var n,t="+e.d+",E="+e.e+";if(!t)return E;"+e.i+";";e.b?(r+="var u=t.length;n=-1;if("+e.b+"){",Le.unindexedChars&&(r+="if(s(t)){t=t.split('')}"),r+="while(++n<u){"+e.g+";}}else{"):Le.nonEnumArgs&&(r+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+e.g+";}}else{"),Le.enumPrototypes&&(r+="var G=typeof t=='function';"),Le.enumErrorProps&&(r+="var F=t===k||t instanceof Error;");var u=[];if(Le.enumPrototypes&&u.push('!(G&&n=="prototype")'),Le.enumErrorProps&&u.push('!(F&&(n=="message"||n=="name"))'),e.j&&e.f)r+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),
r+="}";else if(r+="for(n in t){",e.j&&u.push("m.call(t, n)"),u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}",Le.nonEnumShadows){for(r+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)r+="n='"+e.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",e.j||(r+="||(!x[n]&&t[n]!==A[n])"),r+="){"+e.g+"}";r+="}"}return(e.b||Le.nonEnumArgs)&&(r+="}"),r+=e.c+";return E",n("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+r+"}")(tt,q,ce,we,d,dt,qe,kt,Q.f,pe,X,$e,M,se,he)}function gt(n){return Ve[n]}function ht(){var t=(t=v.indexOf)===zt?n:t;return t}function vt(n){return"function"==typeof n&&ve.test(n)}function yt(n){
var t,e;return!(!(n&&he.call(n)==G&&(t=n.constructor,!jt(t)||t instanceof t))||!Le.argsClass&&dt(n)||!Le.nodeClass&&f(n))&&(Le.ownLast?(nr(n,function(n,t,r){return e=we.call(r,t),!1}),!1!==e):(nr(n,function(n,t){e=t}),void 0===e||we.call(n,e)))}function mt(n){return He[n]}function dt(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==T||!1}function bt(n,t,e){var r=We(n),u=r.length;for(t=tt(t,e,3);u--&&(e=r[u],!1!==t(n[e],e,n)););return n}function _t(n){var t=[];return nr(n,function(n,e){jt(n)&&t.push(e)}),t.sort()}function wt(n){for(var t=-1,e=We(n),r=e.length,u={};++t<r;){var o=e[t];u[n[o]]=o}return u}function jt(n){
return"function"==typeof n}function xt(n){return!(!n||!X[typeof n])}function Ct(n){return"number"==typeof n||n&&"object"==typeof n&&he.call(n)==W||!1}function kt(n){return"string"==typeof n||n&&"object"==typeof n&&he.call(n)==M||!1}function Et(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;)u[t]=n[e[t]];return u}function Ot(n,t,e){var r=-1,u=ht(),o=n?n.length:0,a=!1;return e=(0>e?Be(0,o+e):e)||0,qe(n)?a=-1<u(n,t,e):"number"==typeof o?a=-1<(kt(n)?n.indexOf(t,e):u(n,t,e)):Xe(n,function(n){return++r<e?void 0:!(a=n===t)}),a}function St(n,t,e){var r=!0;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&(r=!!t(n[e],e,n)););
}else Xe(n,function(n,e,u){return r=!!t(n,e,u)});return r}function At(n,t,e){var r=[];if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u;){var o=n[e];t(o,e,n)&&r.push(o)}}else Xe(n,function(n,e,u){t(n,e,u)&&r.push(n)});return r}function It(n,t,e){if(t=v.createCallback(t,e,3),!qe(n)){var r;return Xe(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r}e=-1;for(var u=n.length;++e<u;){var o=n[e];if(t(o,e,n))return o}}function Dt(n,t,e){if(t&&void 0===e&&qe(n)){e=-1;for(var r=n.length;++e<r&&!1!==t(n[e],e,n););}else Xe(n,t,e);return n}function Nt(n,t,e){var r=n,u=n?n.length:0;if(t=t&&void 0===e?t:tt(t,e,3),qe(n))for(;u--&&!1!==t(n[u],u,n););else{
if("number"!=typeof u)var o=We(n),u=o.length;else Le.unindexedChars&&kt(n)&&(r=n.split(""));Xe(n,function(n,e,a){return e=o?o[--u]:--u,t(r[e],e,a)})}return n}function Bt(n,t,e){var r=-1,u=n?n.length:0,o=Zt("number"==typeof u?u:0);if(t=v.createCallback(t,e,3),qe(n))for(;++r<u;)o[r]=t(n[r],r,n);else Xe(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function Pt(n,t,e){var u=-1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];i>o&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n,function(n,e,r){(e=t(n,e,r))>u&&(u=e,o=n)});return o}function Rt(n,t,e,r){var u=3>arguments.length
;if(t=v.createCallback(t,r,4),qe(n)){var o=-1,a=n.length;for(u&&(e=n[++o]);++o<a;)e=t(e,n[o],o,n)}else Xe(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)});return e}function Ft(n,t,e,r){var u=3>arguments.length;return t=v.createCallback(t,r,4),Nt(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)}),e}function Tt(n){var t=-1,e=n?n.length:0,r=Zt("number"==typeof e?e:0);return Dt(n,function(n){var e=lt(0,++t);r[t]=r[e],r[e]=n}),r}function $t(n,t,e){var r;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&!(r=t(n[e],e,n)););}else Xe(n,function(n,e,u){return!(r=t(n,e,u))});return!!r}function Lt(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){
var o=-1;for(t=v.createCallback(t,e,3);++o<u&&t(n[o],o,n);)r++}else if(null==(r=t)||e)return n?n[0]:h;return s(n,0,Pe(Be(0,r),u))}function zt(t,e,r){if("number"==typeof r){var u=t?t.length:0;r=0>r?Be(0,u+r):r||0}else if(r)return r=Kt(t,e),t[r]===e?r:-1;return n(t,e,r)}function qt(n,t,e){if("number"!=typeof t&&null!=t){var r=0,u=-1,o=n?n.length:0;for(t=v.createCallback(t,e,3);++u<o&&t(n[u],u,n);)r++}else r=null==t||e?1:Be(0,t);return s(n,r)}function Kt(n,t,e,r){var u=0,o=n?n.length:u;for(e=e?v.createCallback(e,r,1):Ht,t=e(t);u<o;)r=u+o>>>1,e(n[r])<t?u=r+1:o=r;return u}function Wt(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,
e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(e=v.createCallback(e,r,3)),ft(n,t,e)}function Gt(){for(var n=1<arguments.length?arguments:arguments[0],t=-1,e=n?Pt(ar(n,"length")):0,r=Zt(0>e?0:e);++t<e;)r[t]=ar(n,t);return r}function Jt(n,t){var e=-1,r=n?n.length:0,u={};for(t||!r||qe(n[0])||(t=[]);++e<r;){var o=n[e];t?u[o]=t[e]:o&&(u[o[0]]=o[1])}return u}function Mt(n,t){return 2<arguments.length?pt(n,17,s(arguments,2),null,t):pt(n,1,null,null,t)}function Vt(n,t,e){var r,u,o,a,i,l,f,c=0,p=!1,s=!0;if(!jt(n))throw new le;if(t=Be(0,t)||0,!0===e)var g=!0,s=!1;else xt(e)&&(g=e.leading,p="maxWait"in e&&(Be(t,e.maxWait)||0),s="trailing"in e?e.trailing:s)
;var v=function(){var e=t-(ir()-a);0<e?l=Ce(v,e):(u&&me(u),e=f,u=l=f=h,e&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null)))},y=function(){l&&me(l),u=l=f=h,(s||p!==t)&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null))};return function(){if(r=arguments,a=ir(),i=this,f=s&&(l||!g),!1===p)var e=g&&!l;else{u||g||(c=a);var h=p-(a-c),m=0>=h;m?(u&&(u=me(u)),c=a,o=n.apply(i,r)):u||(u=Ce(y,h))}return m&&l?l=me(l):l||t===p||(l=Ce(v,t)),e&&(m=!0,o=n.apply(i,r)),!m||l||u||(r=i=null),o}}function Ht(n){return n}function Ut(n,t,e){var r=!0,u=t&&_t(t);t&&(e||u.length)||(null==e&&(e=t),o=y,t=n,n=v,u=_t(t)),!1===e?r=!1:xt(e)&&"chain"in e&&(r=e.chain);var o=n,a=jt(o);Dt(u,function(e){
var u=n[e]=t[e];a&&(o.prototype[e]=function(){var t=this.__chain__,e=this.__wrapped__,a=[e];if(je.apply(a,arguments),a=u.apply(n,a),r||t){if(e===a&&xt(a))return this;a=new o(a),a.__chain__=t}return a})})}function Qt(){}function Xt(n){return function(t){return t[n]}}function Yt(){return this.__wrapped__}e=e?ut.defaults(Z.Object(),e,ut.pick(Z,R)):Z
;var Zt=e.Array,ne=e.Boolean,te=e.Date,ee=e.Function,re=e.Math,ue=e.Number,oe=e.Object,ae=e.RegExp,ie=e.String,le=e.TypeError,fe=[],ce=e.Error.prototype,pe=oe.prototype,se=ie.prototype,ge=e._,he=pe.toString,ve=ae("^"+ie(he).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ye=re.ceil,me=e.clearTimeout,de=re.floor,be=ee.prototype.toString,_e=vt(_e=oe.getPrototypeOf)&&_e,we=pe.hasOwnProperty,je=fe.push,xe=pe.propertyIsEnumerable,Ce=e.setTimeout,ke=fe.splice,Ee=fe.unshift,Oe=function(){try{var n={},t=vt(t=oe.defineProperty)&&t,e=t(n,n,n)&&t}catch(r){}return e
}(),Se=vt(Se=oe.create)&&Se,Ae=vt(Ae=Zt.isArray)&&Ae,Ie=e.isFinite,De=e.isNaN,Ne=vt(Ne=oe.keys)&&Ne,Be=re.max,Pe=re.min,Re=e.parseInt,Fe=re.random,Te={};Te[$]=Zt,Te[L]=ne,Te[z]=te,Te[K]=ee,Te[G]=oe,Te[W]=ue,Te[J]=ae,Te[M]=ie;var $e={};$e[$]=$e[z]=$e[W]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},$e[L]=$e[M]={constructor:!0,toString:!0,valueOf:!0},$e[q]=$e[K]=$e[J]={constructor:!0,toString:!0},$e[G]={constructor:!0},function(){for(var n=F.length;n--;){var t,e=F[n];for(t in $e)we.call($e,t)&&!we.call($e[t],e)&&($e[t][e]=!1)}}(),y.prototype=v.prototype;var Le=v.support={};!function(){var n=function(){this.x=1},t={0:1,length:1},r=[];n.prototype={
valueOf:1,y:1};for(var u in new n)r.push(u);for(u in arguments);Le.argsClass=he.call(arguments)==T,Le.argsObject=arguments.constructor==oe&&!(arguments instanceof Zt),Le.enumErrorProps=xe.call(ce,"message")||xe.call(ce,"name"),Le.enumPrototypes=xe.call(n,"prototype"),Le.funcDecomp=!vt(e.WinRTError)&&B.test(g),Le.funcNames="string"==typeof ee.name,Le.nonEnumArgs=0!=u,Le.nonEnumShadows=!/valueOf/.test(r),Le.ownLast="x"!=r[0],Le.spliceObjects=(fe.splice.call(t,0,1),!t[0]),Le.unindexedChars="xx"!="x"[0]+oe("x")[0];try{Le.nodeClass=!(he.call(document)==G&&!({toString:0}+""))}catch(o){Le.nodeClass=!0}}(1),v.templateSettings={escape:/<%-([\s\S]+?)%>/g,
evaluate:/<%([\s\S]+?)%>/g,interpolate:I,variable:"",imports:{_:v}},Se||(nt=function(){function n(){}return function(t){if(xt(t)){n.prototype=t;var r=new n;n.prototype=null}return r||e.Object()}}());var ze=Oe?function(n,t){U.value=t,Oe(n,"__bindData__",U)}:Qt;Le.argsClass||(dt=function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&we.call(n,"callee")&&!xe.call(n,"callee")||!1});var qe=Ae||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==$||!1},Ke=st({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),We=Ne?function(n){
return xt(n)?Le.enumPrototypes&&"function"==typeof n||Le.nonEnumArgs&&n.length&&dt(n)?Ke(n):Ne(n):[]}:Ke,Ge={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:We,g:"if(e(t[n],n,g)===false)return E"},Je={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:We,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Me={i:"if(!B[typeof t])return E;"+Ge.i,b:!1},Ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He=wt(Ve),Ue=ae("("+We(He).join("|")+")","g"),Qe=ae("["+We(Ve).join("")+"]","g"),Xe=st(Ge),Ye=st(Je,{
i:Je.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Ze=st(Je),nr=st(Ge,Me,{j:!1}),tr=st(Ge,Me);jt(/x/)&&(jt=function(n){return"function"==typeof n&&he.call(n)==K});var er=_e?function(n){if(!n||he.call(n)!=G||!Le.argsClass&&dt(n))return!1;var t=n.valueOf,e=vt(t)&&(e=_e(t))&&_e(e);return e?n==e||_e(n)==e:yt(n)}:yt,rr=ct(function(n,t,e){we.call(n,e)?n[e]++:n[e]=1}),ur=ct(function(n,t,e){(we.call(n,e)?n[e]:n[e]=[]).push(t)}),or=ct(function(n,t,e){n[e]=t}),ar=Bt,ir=vt(ir=te.now)&&ir||function(){return(new te).getTime()
},lr=8==Re(j+"08")?Re:function(n,t){return Re(kt(n)?n.replace(D,""):n,t||0)};return v.after=function(n,t){if(!jt(t))throw new le;return function(){return 1>--n?t.apply(this,arguments):void 0}},v.assign=Ye,v.at=function(n){var t=arguments,e=-1,r=ot(t,!0,!1,1),t=t[2]&&t[2][t[1]]===n?1:r.length,u=Zt(t);for(Le.unindexedChars&&kt(n)&&(n=n.split(""));++e<t;)u[e]=n[r[e]];return u},v.bind=Mt,v.bindAll=function(n){for(var t=1<arguments.length?ot(arguments,!0,!1,1):_t(n),e=-1,r=t.length;++e<r;){var u=t[e];n[u]=pt(n[u],1,null,null,n)}return n},v.bindKey=function(n,t){return 2<arguments.length?pt(t,19,s(arguments,2),null,n):pt(t,3,null,null,n)},v.chain=function(n){
return n=new y(n),n.__chain__=!0,n},v.compact=function(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r},v.compose=function(){for(var n=arguments,t=n.length;t--;)if(!jt(n[t]))throw new le;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},v.constant=function(n){return function(){return n}},v.countBy=rr,v.create=function(n,t){var e=nt(n);return t?Ye(e,t):e},v.createCallback=function(n,t,e){var r=typeof n;if(null==n||"function"==r)return tt(n,t,e);if("object"!=r)return Xt(n);var u=We(n),o=u[0],a=n[o];return 1!=u.length||a!==a||xt(a)?function(t){
for(var e=u.length,r=!1;e--&&(r=at(t[u[e]],n[u[e]],null,!0)););return r}:function(n){return n=n[o],a===n&&(0!==a||1/a==1/n)}},v.curry=function(n,t){return t="number"==typeof t?t:+t||n.length,pt(n,4,null,null,null,t)},v.debounce=Vt,v.defaults=Ze,v.defer=function(n){if(!jt(n))throw new le;var t=s(arguments,1);return Ce(function(){n.apply(h,t)},1)},v.delay=function(n,t){if(!jt(n))throw new le;var e=s(arguments,2);return Ce(function(){n.apply(h,e)},t)},v.difference=function(n){return rt(n,ot(arguments,!0,!0,1))},v.filter=At,v.flatten=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),
null!=e&&(n=Bt(n,e,r)),ot(n,t)},v.forEach=Dt,v.forEachRight=Nt,v.forIn=nr,v.forInRight=function(n,t,e){var r=[];nr(n,function(n,t){r.push(t,n)});var u=r.length;for(t=tt(t,e,3);u--&&!1!==t(r[u--],r[u],n););return n},v.forOwn=tr,v.forOwnRight=bt,v.functions=_t,v.groupBy=ur,v.indexBy=or,v.initial=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else r=null==t||e?1:t||r;return s(n,0,Pe(Be(0,u-r),u))},v.intersection=function(){for(var e=[],r=-1,u=arguments.length,a=i(),l=ht(),f=l===n,s=i();++r<u;){var g=arguments[r];(qe(g)||dt(g))&&(e.push(g),a.push(f&&g.length>=_&&o(r?e[r]:s)))}
var f=e[0],h=-1,v=f?f.length:0,y=[];n:for(;++h<v;){var m=a[0],g=f[h];if(0>(m?t(m,g):l(s,g))){for(r=u,(m||s).push(g);--r;)if(m=a[r],0>(m?t(m,g):l(e[r],g)))continue n;y.push(g)}}for(;u--;)(m=a[u])&&p(m);return c(a),c(s),y},v.invert=wt,v.invoke=function(n,t){var e=s(arguments,2),r=-1,u="function"==typeof t,o=n?n.length:0,a=Zt("number"==typeof o?o:0);return Dt(n,function(n){a[++r]=(u?t:n[t]).apply(n,e)}),a},v.keys=We,v.map=Bt,v.mapValues=function(n,t,e){var r={};return t=v.createCallback(t,e,3),tr(n,function(n,e,u){r[e]=t(n,e,u)}),r},v.max=Pt,v.memoize=function(n,t){if(!jt(n))throw new le;var e=function(){var r=e.cache,u=t?t.apply(this,arguments):b+arguments[0]
;return we.call(r,u)?r[u]:r[u]=n.apply(this,arguments)};return e.cache={},e},v.merge=function(n){var t=arguments,e=2;if(!xt(n))return n;if("number"!=typeof t[2]&&(e=t.length),3<e&&"function"==typeof t[e-2])var r=tt(t[--e-1],t[e--],2);else 2<e&&"function"==typeof t[e-1]&&(r=t[--e]);for(var t=s(arguments,1,e),u=-1,o=i(),a=i();++u<e;)it(n,t[u],r,o,a);return c(o),c(a),n},v.min=function(n,t,e){var u=1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];i<o&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n,function(n,e,r){(e=t(n,e,r))<u&&(u=e,o=n)});return o},v.omit=function(n,t,e){var r={}
;if("function"!=typeof t){var u=[];nr(n,function(n,t){u.push(t)});for(var u=rt(u,ot(arguments,!0,!1,1)),o=-1,a=u.length;++o<a;){var i=u[o];r[i]=n[i]}}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)||(r[e]=n)});return r},v.once=function(n){var t,e;if(!jt(n))throw new le;return function(){return t?e:(t=!0,e=n.apply(this,arguments),n=null,e)}},v.pairs=function(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;){var o=e[t];u[t]=[o,n[o]]}return u},v.partial=function(n){return pt(n,16,s(arguments,1))},v.partialRight=function(n){return pt(n,32,null,s(arguments,1))},v.pick=function(n,t,e){var r={}
;if("function"!=typeof t)for(var u=-1,o=ot(arguments,!0,!1,1),a=xt(n)?o.length:0;++u<a;){var i=o[u];i in n&&(r[i]=n[i])}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r},v.pluck=ar,v.property=Xt,v.pull=function(n){for(var t=arguments,e=0,r=t.length,u=n?n.length:0;++e<r;)for(var o=-1,a=t[e];++o<u;)n[o]===a&&(ke.call(n,o--,1),u--);return n},v.range=function(n,t,e){n=+n||0,e="number"==typeof e?e:+e||1,null==t&&(t=n,n=0);var r=-1;t=Be(0,ye((t-n)/(e||1)));for(var u=Zt(t);++r<t;)u[r]=n,n+=e;return u},v.reject=function(n,t,e){return t=v.createCallback(t,e,3),At(n,function(n,e,r){return!t(n,e,r)})},v.remove=function(n,t,e){
var r=-1,u=n?n.length:0,o=[];for(t=v.createCallback(t,e,3);++r<u;)e=n[r],t(e,r,n)&&(o.push(e),ke.call(n,r--,1),u--);return o},v.rest=qt,v.shuffle=Tt,v.sortBy=function(n,t,e){var r=-1,o=qe(t),a=n?n.length:0,f=Zt("number"==typeof a?a:0);for(o||(t=v.createCallback(t,e,3)),Dt(n,function(n,e,u){var a=f[++r]=l();o?a.m=Bt(t,function(t){return n[t]}):(a.m=i())[0]=t(n,e,u),a.n=r,a.o=n}),a=f.length,f.sort(u);a--;)n=f[a],f[a]=n.o,o||c(n.m),p(n);return f},v.tap=function(n,t){return t(n),n},v.throttle=function(n,t,e){var r=!0,u=!0;if(!jt(n))throw new le;return!1===e?r=!1:xt(e)&&(r="leading"in e?e.leading:r,u="trailing"in e?e.trailing:u),H.leading=r,H.maxWait=t,
H.trailing=u,Vt(n,t,H)},v.times=function(n,t,e){n=-1<(n=+n)?n:0;var r=-1,u=Zt(n);for(t=tt(t,e,1);++r<n;)u[r]=t(r);return u},v.toArray=function(n){return n&&"number"==typeof n.length?Le.unindexedChars&&kt(n)?n.split(""):s(n):Et(n)},v.transform=function(n,t,e,r){var u=qe(n);if(null==e)if(u)e=[];else{var o=n&&n.constructor;e=nt(o&&o.prototype)}return t&&(t=v.createCallback(t,r,4),(u?Xe:tr)(n,function(n,r,u){return t(e,n,r,u)})),e},v.union=function(){return ft(ot(arguments,!0,!0))},v.uniq=Wt,v.values=Et,v.where=At,v.without=function(n){return rt(n,s(arguments,1))},v.wrap=function(n,t){return pt(t,16,[n])},v.xor=function(){for(var n=-1,t=arguments.length;++n<t;){
var e=arguments[n];if(qe(e)||dt(e))var r=r?ft(rt(r,e).concat(rt(e,r))):e}return r||[]},v.zip=Gt,v.zipObject=Jt,v.collect=Bt,v.drop=qt,v.each=Dt,v.eachRight=Nt,v.extend=Ye,v.methods=_t,v.object=Jt,v.select=At,v.tail=qt,v.unique=Wt,v.unzip=Gt,Ut(v),v.clone=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e=t,t=!1),Y(n,t,"function"==typeof e&&tt(e,r,1))},v.cloneDeep=function(n,t,e){return Y(n,!0,"function"==typeof t&&tt(t,e,1))},v.contains=Ot,v.escape=function(n){return null==n?"":ie(n).replace(Qe,gt)},v.every=St,v.find=It,v.findIndex=function(n,t,e){var r=-1,u=n?n.length:0;for(t=v.createCallback(t,e,3);++r<u;)if(t(n[r],r,n))return r;return-1},
v.findKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),tr(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.findLast=function(n,t,e){var r;return t=v.createCallback(t,e,3),Nt(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r},v.findLastIndex=function(n,t,e){var r=n?n.length:0;for(t=v.createCallback(t,e,3);r--;)if(t(n[r],r,n))return r;return-1},v.findLastKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),bt(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.has=function(n,t){return!!n&&we.call(n,t)},v.identity=Ht,v.indexOf=zt,v.isArguments=dt,v.isArray=qe,v.isBoolean=function(n){
return!0===n||!1===n||n&&"object"==typeof n&&he.call(n)==L||!1},v.isDate=function(n){return n&&"object"==typeof n&&he.call(n)==z||!1},v.isElement=function(n){return n&&1===n.nodeType||!1},v.isEmpty=function(n){var t=!0;if(!n)return t;var e=he.call(n),r=n.length;return e==$||e==M||(Le.argsClass?e==T:dt(n))||e==G&&"number"==typeof r&&jt(n.splice)?!r:(tr(n,function(){return t=!1}),t)},v.isEqual=function(n,t,e,r){return at(n,t,"function"==typeof e&&tt(e,r,2))},v.isFinite=function(n){return Ie(n)&&!De(parseFloat(n))},v.isFunction=jt,v.isNaN=function(n){return Ct(n)&&n!=+n},v.isNull=function(n){return null===n},v.isNumber=Ct,v.isObject=xt,v.isPlainObject=er,
v.isRegExp=function(n){return n&&X[typeof n]&&he.call(n)==J||!1},v.isString=kt,v.isUndefined=function(n){return void 0===n},v.lastIndexOf=function(n,t,e){var r=n?n.length:0;for("number"==typeof e&&(r=(0>e?Be(0,r+e):Pe(e,r-1))+1);r--;)if(n[r]===t)return r;return-1},v.mixin=Ut,v.noConflict=function(){return e._=ge,this},v.noop=Qt,v.now=ir,v.parseInt=lr,v.random=function(n,t,e){var r=null==n,u=null==t;return null==e&&("boolean"==typeof n&&u?(e=n,n=1):u||"boolean"!=typeof t||(e=t,u=!0)),r&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,e||n%1||t%1?(e=Fe(),Pe(n+e*(t-n+parseFloat("1e-"+((e+"").length-1))),t)):lt(n,t)},v.reduce=Rt,v.reduceRight=Ft,v.result=function(n,t){
if(n){var e=n[t];return jt(e)?n[t]():e}},v.runInContext=g,v.size=function(n){var t=n?n.length:0;return"number"==typeof t?t:We(n).length},v.some=$t,v.sortedIndex=Kt,v.template=function(n,t,e){var r=v.templateSettings;n=ie(n||""),e=Ze({},e,r);var u,o=Ze({},e.imports,r.imports),r=We(o),o=Et(o),i=0,l=e.interpolate||N,f="__p+='",l=ae((e.escape||N).source+"|"+l.source+"|"+(l===I?O:N).source+"|"+(e.evaluate||N).source+"|$","g");n.replace(l,function(t,e,r,o,l,c){return r||(r=o),f+=n.slice(i,c).replace(P,a),e&&(f+="'+__e("+e+")+'"),l&&(u=!0,f+="';"+l+";\n__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),i=c+t.length,t}),f+="';",l=e=e.variable,l||(e="obj",
f="with("+e+"){"+f+"}"),f=(u?f.replace(x,""):f).replace(C,"$1").replace(E,"$1;"),f="function("+e+"){"+(l?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}";try{var c=ee(r,"return "+f).apply(h,o)}catch(p){throw p.source=f,p}return t?c(t):(c.source=f,c)},v.unescape=function(n){return null==n?"":ie(n).replace(Ue,mt)},v.uniqueId=function(n){var t=++m;return ie(null==n?"":n)+t},v.all=St,v.any=$t,v.detect=It,v.findWhere=It,v.foldl=Rt,v.foldr=Ft,v.include=Ot,v.inject=Rt,Ut(function(){var n={};return tr(v,function(t,e){v.prototype[e]||(n[e]=t)}),n}(),!1),v.first=Lt,
v.last=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else if(null==(r=t)||e)return n?n[u-1]:h;return s(n,Be(0,u-r))},v.sample=function(n,t,e){return n&&"number"!=typeof n.length?n=Et(n):Le.unindexedChars&&kt(n)&&(n=n.split("")),null==t||e?n?n[lt(0,n.length-1)]:h:(n=Tt(n),n.length=Pe(Be(0,t),n.length),n)},v.take=Lt,v.head=Lt,tr(v,function(n,t){var e="sample"!==t;v.prototype[t]||(v.prototype[t]=function(t,r){var u=this.__chain__,o=n(this.__wrapped__,t,r);return u||null!=t&&(!r||e&&"function"==typeof t)?new y(o,u):o})}),v.VERSION="2.4.1",v.prototype.chain=function(){
return this.__chain__=!0,this},v.prototype.toString=function(){return ie(this.__wrapped__)},v.prototype.value=Yt,v.prototype.valueOf=Yt,Xe(["join","pop","shift"],function(n){var t=fe[n];v.prototype[n]=function(){var n=this.__chain__,e=t.apply(this.__wrapped__,arguments);return n?new y(e,n):e}}),Xe(["push","reverse","sort","unshift"],function(n){var t=fe[n];v.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Xe(["concat","slice","splice"],function(n){var t=fe[n];v.prototype[n]=function(){return new y(t.apply(this.__wrapped__,arguments),this.__chain__)}}),Le.spliceObjects||Xe(["pop","shift","splice"],function(n){
var t=fe[n],e="splice"==n;v.prototype[n]=function(){var n=this.__chain__,r=this.__wrapped__,u=t.apply(r,arguments);return 0===r.length&&delete r[0],n||e?new y(u,n):u}}),v}
var h,v=[],y=[],m=0,d={},b=+new Date+"",_=75,w=40,j=" \t\v\f \ufeff\n\r\u2028\u2029 ᠎             　",x=/\b__p\+='';/g,C=/\b(__p\+=)''\+/g,E=/(__e\(.*?\)|\b__t\))\+'';/g,O=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,I=/<%=([\s\S]+?)%>/g,D=RegExp("^["+j+"]*0+(?=.$)"),N=/($^)/,B=/\bthis\b/,P=/['\n\r\t\u2028\u2029\\]/g,R="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),T="[object Arguments]",$="[object Array]",L="[object Boolean]",z="[object Date]",q="[object Error]",K="[object Function]",W="[object Number]",G="[object Object]",J="[object RegExp]",M="[object String]",V={}
;V[K]=!1,V[T]=V[$]=V[L]=V[z]=V[W]=V[G]=V[J]=V[M]=!0;var H={leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},Q={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},X={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,nt=X[typeof exports]&&exports&&!exports.nodeType&&exports,tt=X[typeof module]&&module&&!module.nodeType&&module,et=tt&&tt.exports===nt&&nt,rt=X[typeof global]&&global;!rt||rt.global!==rt&&rt.window!==rt||(Z=rt);var ut=g()
;"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=ut,define("taoQtiItem/portableLib/lodash",[],function(){return ut})):nt&&tt?et?(tt.exports=ut)._=ut:nt._=ut:Z._=ut}.call(this),define("taoQtiItem/portableLib/OAT/util/EventMgr",["taoQtiItem/portableLib/lodash"],function(_){"use strict";return function(){var events={};this.get=function(event){return event&&events[event]?_.clone(events[event]):[]},this.on=function(event,callback){var name,tokens=event.split(".");tokens[0]&&(name=tokens.shift(),events[name]=events[name]||[],events[name].push({ns:tokens,callback:callback}))},this.off=function(event){event&&events[event]&&(events[event]=[])
},this.trigger=function(event,data){events[event]&&_.forEach(events[event],function(e){e.callback.apply({type:event,ns:[]},data)})}}}),define("taoQtiItem/portableLib/OAT/util/event",["taoQtiItem/portableLib/OAT/util/EventMgr"],function(EventMgr){return{addEventMgr:function(instance){var eventMgr=new EventMgr;instance.on=function(event,callback){eventMgr.on(event,callback)},instance.off=function(event){eventMgr.off(event)},instance.trigger=function(event,data){eventMgr.trigger(event,data)}}}}),
define("explo/runtime/explo.amd",["qtiCustomInteractionContext","taoQtiItem/portableLib/jquery_2_1_1","explo/runtime/js/renderer","taoQtiItem/portableLib/OAT/util/event"],function(qtiCustomInteractionContext,$,renderer,event){"use strict";var explo={id:-1,getTypeIdentifier:function(){return"explo"},initialize:function(id,dom,config,assetManager){event.addEventMgr(this);var _this=this;this.id=id,this.dom=dom,this.config=config||{},renderer.render(this.id,this.dom,this.config,assetManager),qtiCustomInteractionContext.notifyReady(this),this.on("jsonImporterChange",function(jsonData){_this.config.data=jsonData,
renderer.render(_this.id,_this.dom,_this.config,assetManager)})},setResponse:function(response){$(this.dom)},getResponse:function(){var $container=$(this.dom);return{base:{string:"Tree : "+$container.find(".dataTree").html()+"|File List : "+$container.find(".dataFiles").html()+"|ClipBoard : "+$container.find(".dataClipBoard").html()+"|Actions : "+$container.find(".dataActions").html()}}},resetResponse:function(){$(this.dom)},destroy:function(){$(this.dom).off().empty()},setSerializedState:function(state){},getSerializedState:function(){return{}}};qtiCustomInteractionContext.register(explo)}),define(["explo/runtime/explo.amd"],function(PCI){return PCI});
//# sourceMappingURL=explo.min.js.map